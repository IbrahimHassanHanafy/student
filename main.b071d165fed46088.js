"use strict";(self.webpackChunkstudentCrud=self.webpackChunkstudentCrud||[]).push([[179],{2011:(ut,Te,k)=>{k.d(Te,{Dh:()=>de,GT:()=>le,cc:()=>Ae,hO:()=>Ve,on:()=>U,pX:()=>re,xv:()=>he});var p=k(4650),X=k(127),O=k(5813);ut=k.hmd(ut);const se=["ngOnDestroy"],re=(fe,Ye,it,Se={})=>new Proxy(fe,{get:(ve,Ie)=>it.runOutsideAngular(()=>{var je;if(fe[Ie])return!(null===(je=Se?.spy)||void 0===je)&&je.get&&Se.spy.get(Ie,fe[Ie]),fe[Ie];if(se.indexOf(Ie)>-1)return()=>{};const $e=Ye.toPromise().then(V=>{const pe=V&&V[Ie];return"function"==typeof pe?pe.bind(V):pe&&pe.then?pe.then(z=>it.run(()=>z)):it.run(()=>pe)});return new Proxy(()=>{},{get:(V,pe)=>$e[pe],apply:(V,pe,z)=>$e.then(Q=>{var ne;const te=Q&&Q(...z);return!(null===(ne=Se?.spy)||void 0===ne)&&ne.apply&&Se.spy.apply(Ie,z,te),te})})})}),le=(fe,Ye)=>{Ye.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(Se=>{Object.defineProperty(fe.prototype,Se,Object.getOwnPropertyDescriptor(it.prototype||it,Se))})})};class ue{constructor(Ye){return Ye}}const de=new p.OlP("angularfire2.app.options"),he=new p.OlP("angularfire2.app.name");function U(fe,Ye,it){const ve="object"==typeof it&&it||{};ve.name=ve.name||"string"==typeof it&&it||"[DEFAULT]";const je=X.Z.apps.filter($e=>$e&&$e.name===ve.name)[0]||Ye.runOutsideAngular(()=>X.Z.initializeApp(fe,ve));try{JSON.stringify(fe)!==JSON.stringify(je.options)&&B("error",`${je.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(je)}const B=(fe,...Ye)=>{(0,p.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},W={provide:ue,useFactory:U,deps:[de,p.R0b,[new p.FiY,he]]};let Ve=(()=>{class fe{constructor(it){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",p.q4F.full,it.toString())}static initializeApp(it,Se){return{ngModule:fe,providers:[{provide:de,useValue:it},{provide:he,useValue:Se}]}}}return fe.\u0275fac=function(it){return new(it||fe)(p.LFG(p.Lbi))},fe.\u0275mod=p.oAB({type:fe}),fe.\u0275inj=p.cJS({providers:[W]}),fe})();function Ae(fe,Ye,it,Se,ve){const[,Ie,je]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===fe)||[];if(Ie)return function we(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(ve,je)||(ge("error",`${Ye} was already initialized on the ${it} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ve,was:je})),Ie;{const $e=Se();return globalThis.\u0275AngularfireInstanceCache.push([fe,$e,ve]),$e}}const Xe=!!ut.hot,ge=(fe,...Ye)=>{(0,p.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Te,k)=>{k.d(Te,{q4:()=>at,iC:()=>Ji,HU:()=>Ro,vb:()=>bs,JM:()=>Ta});var p=k(4650),X=k(5867),O=k(5861),se=k(9681),re=k(2090),le=k(4859),ue=k(1877),de=k(8766);const he="@firebase/installations",U="0.5.16",W=`w:${U}`,Ve="FIS_v2",Ye=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Se({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:Q(D.expiresIn),creationTime:Date.now()}}function Ie(D,b){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:b}){const x=$e(D);return x.append("Authorization",function ne(D){return`${Ve} ${D}`}(b)),x}function pe(D){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function Q(D){return Number(D.replace("s","000"))}function te(D,b){return ke.apply(this,arguments)}function ke(){return(ke=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=Se(D),Z=$e(D),ee=b.getImmediate({optional:!0});if(ee){const yt=yield ee.getHeartbeatsHeader();yt&&Z.append("x-firebase-client",yt)}const Me={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Ve,appId:D.appId,sdkVersion:W})},tt=yield pe(()=>fetch(F,Me));if(tt.ok){const yt=yield tt.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:ve(yt.authToken)}}throw yield Ie("Create Installation",tt)})).apply(this,arguments)}function Ne(D){return new Promise(b=>{setTimeout(b,D)})}const Yt=/^[cdef][\w-]{21}$/;function We(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function sn(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Yt.test(x)?x:""}catch{return""}}function pn(D){return`${D.appName}!${D.appId}`}const Zt=new Map;function Qt(D,b){const x=pn(D);an(x,b),function ji(D,b){const x=function Ar(){return!hi&&"BroadcastChannel"in self&&(hi=new BroadcastChannel("[Firebase] FID Change"),hi.onmessage=D=>{an(D.data.key,D.data.fid)}),hi}();x&&x.postMessage({key:D,fid:b}),function Br(){0===Zt.size&&hi&&(hi.close(),hi=null)}()}(x,b)}function an(D,b){const x=Zt.get(D);if(x)for(const F of x)F(b)}let hi=null;const Zr="firebase-installations-store";let Kr=null;function ta(){return Kr||(Kr=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Zr)}})),Kr}function Ze(D,b){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*(D,b){const x=pn(D),Z=(yield ta()).transaction(Zr,"readwrite"),ee=Z.objectStore(Zr),Ee=yield ee.get(x);return yield ee.put(b,x),yield Z.done,(!Ee||Ee.fid!==b.fid)&&Qt(D,b.fid),b})).apply(this,arguments)}function cs(D){return zn.apply(this,arguments)}function zn(){return(zn=(0,O.Z)(function*(D){const b=pn(D),F=(yield ta()).transaction(Zr,"readwrite");yield F.objectStore(Zr).delete(b),yield F.done})).apply(this,arguments)}function Yr(D,b){return bi.apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*(D,b){const x=pn(D),Z=(yield ta()).transaction(Zr,"readwrite"),ee=Z.objectStore(Zr),Ee=yield ee.get(x),Me=b(Ee);return void 0===Me?yield ee.delete(x):yield ee.put(Me,x),yield Z.done,Me&&(!Ee||Ee.fid!==Me.fid)&&Qt(D,Me.fid),Me})).apply(this,arguments)}function Rn(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,O.Z)(function*(D){let b;const x=yield Yr(D.appConfig,F=>{const Z=dn(F),ee=ft(D,Z);return b=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function dn(D){return Ct(D||{fid:We(),registrationStatus:0})}function ft(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function st(D,b){return rn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:cr(D)}:{installationEntry:b}}function rn(){return(rn=(0,O.Z)(function*(D,b){try{const x=yield te(D,b);return Ze(D.appConfig,x)}catch(x){throw it(x)&&409===x.customData.serverCode?yield cs(D.appConfig):yield Ze(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function cr(D){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(D){let b=yield jr(D.appConfig);for(;1===b.registrationStatus;)yield Ne(100),b=yield jr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Rn(D);return F||x}return b})).apply(this,arguments)}function jr(D){return Yr(D,b=>{if(!b)throw Ye.create("installation-not-found");return Ct(b)})}function Ct(D){return function ls(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Xt(D,b){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=en(D,x),Z=V(D,x),ee=b.getImmediate({optional:!0});if(ee){const yt=yield ee.getHeartbeatsHeader();yt&&Z.append("x-firebase-client",yt)}const Me={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:W,appId:D.appId}})},tt=yield pe(()=>fetch(F,Me));if(tt.ok)return ve(yield tt.json());throw yield Ie("Generate Auth Token",tt)})).apply(this,arguments)}function en(D,{fid:b}){return`${Se(D)}/${b}/authTokens:generate`}function qn(D){return xr.apply(this,arguments)}function xr(){return(xr=(0,O.Z)(function*(D,b=!1){let x;const F=yield Yr(D.appConfig,ee=>{if(!Rt(ee))throw Ye.create("not-registered");const Ee=ee.authToken;if(!b&&j(Ee))return ee;if(1===Ee.requestStatus)return x=Je(D,b),ee;{if(!navigator.onLine)throw Ye.create("app-offline");const Me=q(ee);return x=_t(D,Me),Me}});return x?yield x:F.authToken})).apply(this,arguments)}function Je(D,b){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(D,b){let x=yield Qe(D.appConfig);for(;1===x.authToken.requestStatus;)yield Ne(100),x=yield Qe(D.appConfig);const F=x.authToken;return 0===F.requestStatus?qn(D,b):F})).apply(this,arguments)}function Qe(D){return Yr(D,b=>{if(!Rt(b))throw Ye.create("not-registered");return function _e(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function _t(D,b){return mt.apply(this,arguments)}function mt(){return(mt=(0,O.Z)(function*(D,b){try{const x=yield Xt(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield Ze(D.appConfig,F),x}catch(x){if(!it(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Ze(D.appConfig,F)}else yield cs(D.appConfig);throw x}})).apply(this,arguments)}function Rt(D){return void 0!==D&&2===D.registrationStatus}function j(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function q(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function ze(){return(ze=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield Rn(b);return F?F.catch(console.error):qn(b).catch(console.error),x.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,O.Z)(function*(D,b=!1){const x=D;return yield ln(x),(yield qn(x,b)).token})).apply(this,arguments)}function ln(D){return zt.apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(D){const{registrationPromise:b}=yield Rn(D);b&&(yield b)})).apply(this,arguments)}function ds(D){return Ye.create("missing-app-config-values",{valueName:D})}const po="installations",_n=D=>{const b=D.getProvider("app").getImmediate(),x=function gn(D){if(!D||!D.options)throw ds("App Configuration");if(!D.name)throw ds("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw ds(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Bs=D=>{const b=D.getProvider("app").getImmediate(),x=(0,se._getProvider)(b,po).getImmediate();return{getId:()=>function K(D){return ze.apply(this,arguments)}(x),getToken:Z=>function lt(D){return Kt.apply(this,arguments)}(x,Z)}};(function nu(){(0,se._registerComponent)(new le.wA(po,_n,"PUBLIC")),(0,se._registerComponent)(new le.wA("installations-internal",Bs,"PRIVATE"))})(),(0,se.registerVersion)(he,U),(0,se.registerVersion)(he,U,"esm2017");const Si="@firebase/remote-config",Un=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ih{constructor(b,x,F,Z){this.client=b,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Z}.`),Z}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return Z;b.eTag=Z&&Z.eTag;const ee=yield x.client.fetch(b),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Ee),ee})()}}function hc(D=navigator){return D.languages&&D.languages[0]||D.language}class fc{constructor(b,x,F,Z,ee,Ee){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=ee,this.appId=Ee}fetch(b){var x=this;return(0,O.Z)(function*(){var F,Z,ee;const[Ee,Me]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},dt={sdk_version:x.sdkVersion,app_instance_id:Ee,app_instance_id_token:Me,app_id:x.appId,language_code:hc()},In={method:"POST",headers:bt,body:JSON.stringify(dt)},fr=fetch(yt,In),No=new Promise((Oo,to)=>{b.signal.addEventListener(()=>{const wi=new Error("The operation was aborted.");wi.name="AbortError",to(wi)})});let As;try{yield Promise.race([fr,No]),As=yield fr}catch(Oo){let to="fetch-client-network";throw"AbortError"===(null===(F=Oo)||void 0===F?void 0:F.name)&&(to="fetch-timeout"),Un.create(to,{originalErrorMessage:null===(Z=Oo)||void 0===Z?void 0:Z.message})}let Tt=As.status;const Ni=As.headers.get("ETag")||void 0;let xs,ti;if(200===As.status){let Oo;try{Oo=yield As.json()}catch(to){throw Un.create("fetch-client-parse",{originalErrorMessage:null===(ee=to)||void 0===ee?void 0:ee.message})}xs=Oo.entries,ti=Oo.state}if("INSTANCE_STATE_UNSPECIFIED"===ti?Tt=500:"NO_CHANGE"===ti?Tt=304:("NO_TEMPLATE"===ti||"EMPTY_CONFIG"===ti)&&(xs={}),304!==Tt&&200!==Tt)throw Un.create("fetch-status",{httpStatus:Tt});return{status:Tt,eTag:Ni,config:xs}})()}}class Np{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,O.Z)(function*(){yield function Zn(D,b){return new Promise((x,F)=>{const Z=Math.max(b-Date.now(),0),ee=setTimeout(x,Z);D.addEventListener(()=>{clearTimeout(ee),F(Un.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const ee=yield Z.client.fetch(b);return yield Z.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Al(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ee))throw ee;const Ee={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(Ee),Z.attemptFetch(b,Ee)}})()}}class xl{constructor(b,x,F,Z,ee){this.app=b,this._client=x,this._storageCache=F,this._storage=Z,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pc(D,b){var x;const F=D.target.error||void 0;return Un.create(b,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const gs="app_namespace_store";class Fp{constructor(b,x,F,Z=function kp(){return new Promise((D,b)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Z=>{b(pc(Z,"storage-open"))},F.onsuccess=Z=>{D(Z.target.result)},F.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(gs,{keyPath:"compositeKey"})}}catch(F){b(Un.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,ee)=>{var Ee;const tt=F.transaction([gs],"readonly").objectStore(gs),yt=x.createCompositeKey(b);try{const bt=tt.get(yt);bt.onerror=dt=>{ee(pc(dt,"storage-get"))},bt.onsuccess=dt=>{const In=dt.target.result;Z(In?In.value:void 0)}}catch(bt){ee(Un.create("storage-get",{originalErrorMessage:null===(Ee=bt)||void 0===Ee?void 0:Ee.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((ee,Ee)=>{var Me;const yt=Z.transaction([gs],"readwrite").objectStore(gs),bt=F.createCompositeKey(b);try{const dt=yt.put({compositeKey:bt,value:x});dt.onerror=In=>{Ee(pc(In,"storage-set"))},dt.onsuccess=()=>{ee()}}catch(dt){Ee(Un.create("storage-set",{originalErrorMessage:null===(Me=dt)||void 0===Me?void 0:Me.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,ee)=>{var Ee;const tt=F.transaction([gs],"readwrite").objectStore(gs),yt=x.createCompositeKey(b);try{const bt=tt.delete(yt);bt.onerror=dt=>{ee(pc(dt,"storage-delete"))},bt.onsuccess=()=>{Z()}}catch(bt){ee(Un.create("storage-delete",{originalErrorMessage:null===(Ee=bt)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Rl{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),Z=b.storage.getActiveConfig(),ee=yield x;ee&&(b.lastFetchStatus=ee);const Ee=yield F;Ee&&(b.lastSuccessfulFetchTimestampMillis=Ee);const Me=yield Z;Me&&(b.activeConfig=Me)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function su(){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function ms(){(0,se._registerComponent)(new le.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),Z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Un.create("registration-window");if(!(0,re.hl)())throw Un.create("indexed-db-unavailable");const{projectId:ee,apiKey:Ee,appId:Me}=F.options;if(!ee)throw Un.create("registration-project-id");if(!Ee)throw Un.create("registration-api-key");if(!Me)throw Un.create("registration-app-id");const tt=new Fp(Me,F.name,x=x||"firebase"),yt=new Rl(tt),bt=new ue.Yd(Si);bt.logLevel=ue.in.ERROR;const dt=new fc(Z,se.SDK_VERSION,x,ee,Ee,Me),In=new Np(dt,tt),fr=new Ih(In,tt,yt,bt),No=new xl(F,fr,yt,tt,bt);return function dr(D){const b=(0,re.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(No),No},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Si,"0.3.15"),(0,se.registerVersion)(Si,"0.3.15","esm2017")}();const Ai="/firebase-messaging-sw.js",Hi="/firebase-cloud-messaging-push-scope",Gi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ia="google.c.a.c_id",ou="google.c.a.c_l",gc="google.c.a.ts",Dh="google.c.a.e";var zi=(()=>{return(D=zi||(zi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",zi;var D})();function Qr(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)Z[ee]=F.charCodeAt(ee);return Z}const go="fcm_token_details_db",hr="fcm_token_object_Store";function Ch(D){return bh.apply(this,arguments)}function bh(){return bh=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(go))return null;let b=null;return(yield(0,de.X3)(go,5,{upgrade:(F=(0,O.Z)(function*(Z,ee,Ee,Me){var tt;if(ee<2||!Z.objectStoreNames.contains(hr))return;const yt=Me.objectStore(hr),bt=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),bt)if(2===ee){const dt=bt;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;b={token:dt.fcmToken,createTime:null!==(tt=dt.createTime)&&void 0!==tt?tt:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:Qr(dt.vapidKey)}}}else if(3===ee){const dt=bt;b={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:Qr(dt.auth),p256dh:Qr(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:Qr(dt.vapidKey)}}}else if(4===ee){const dt=bt;b={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:Qr(dt.auth),p256dh:Qr(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:Qr(dt.vapidKey)}}}}),function(ee,Ee,Me,tt){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(go),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),bn(b)?b:null;var F}),bh.apply(this,arguments)}function bn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Jr="firebase-messaging-store";let Rr=null;function uu(){return Rr||(Rr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Jr)}})),Rr}function mo(D){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(D){const b=gi(D),F=yield(yield uu()).transaction(Jr).objectStore(Jr).get(b);if(F)return F;{const Z=yield Ch(D.appConfig.senderId);if(Z)return yield qt(D,Z),Z}})).apply(this,arguments)}function qt(D,b){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(D,b){const x=gi(D),Z=(yield uu()).transaction(Jr,"readwrite");return yield Z.objectStore(Jr).put(b,x),yield Z.done,b})).apply(this,arguments)}function Gs(D){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(D){const b=gi(D),F=(yield uu()).transaction(Jr,"readwrite");yield F.objectStore(Jr).delete(b),yield F.done})).apply(this,arguments)}function gi({appConfig:D}){return D.appId}const Dn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Et(D,b){return hu.apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(D,b){var x;const F=yield yc(D),Z=Ce(b),ee={method:"POST",headers:F,body:JSON.stringify(Z)};let Ee;try{Ee=yield(yield fetch(Wi(D.appConfig),ee)).json()}catch(Me){throw Dn.create("token-subscribe-failed",{errorInfo:null===(x=Me)||void 0===x?void 0:x.toString()})}if(Ee.error)throw Dn.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Dn.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function Sh(D,b){return fu.apply(this,arguments)}function fu(){return(fu=(0,O.Z)(function*(D,b){var x;const F=yield yc(D),Z=Ce(b.subscriptionOptions),ee={method:"PATCH",headers:F,body:JSON.stringify(Z)};let Ee;try{Ee=yield(yield fetch(`${Wi(D.appConfig)}/${b.token}`,ee)).json()}catch(Me){throw Dn.create("token-update-failed",{errorInfo:null===(x=Me)||void 0===x?void 0:x.toString()})}if(Ee.error)throw Dn.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Dn.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function pu(D,b){return mc.apply(this,arguments)}function mc(){return(mc=(0,O.Z)(function*(D,b){var x;const Z={method:"DELETE",headers:yield yc(D)};try{const Ee=yield(yield fetch(`${Wi(D.appConfig)}/${b}`,Z)).json();if(Ee.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(ee){throw Dn.create("token-unsubscribe-failed",{errorInfo:null===(x=ee)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Wi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function yc(D){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ce({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:b,p256dh:D}};return F!==Gi&&(Z.web.applicationPubKey=F),Z}const jt=6048e5;function gu(D){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(D){const b=yield vc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Qr(b.getKey("auth")),p256dh:Qr(b.getKey("p256dh"))},F=yield mo(D.firebaseDependencies);if(F){if(kl(F.subscriptionOptions,x))return Date.now()>=F.createTime+jt?yo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield pu(D.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return aa(D.firebaseDependencies,x)}return aa(D.firebaseDependencies,x)})).apply(this,arguments)}function Tn(D){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(D){const b=yield mo(D.firebaseDependencies);b&&(yield pu(D.firebaseDependencies,b.token),yield Gs(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function yo(D,b){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,O.Z)(function*(D,b){try{const x=yield Sh(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield qt(D.firebaseDependencies,F),x}catch(x){throw yield Tn(D),x}})).apply(this,arguments)}function aa(D,b){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D,b){const F={token:yield Et(D,b),createTime:Date.now(),subscriptionOptions:b};return yield qt(D,F),F.token})).apply(this,arguments)}function vc(D,b){return _c.apply(this,arguments)}function _c(){return(_c=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hr(b)})})).apply(this,arguments)}function kl(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function ca(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Sn(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const Z=b.notification.image;Z&&(D.notification.image=Z);const ee=b.notification.icon;ee&&(D.notification.icon=ee)}(b,D),function xi(D,b){!b.data||(D.data=b.data)}(b,D),function wc(D,b){var x,F,Z,ee,Ee;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Me=null!==(Z=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Z?Z:null===(ee=b.notification)||void 0===ee?void 0:ee.click_action;Me&&(D.fcmOptions.link=Me);const tt=null===(Ee=b.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;tt&&(D.fcmOptions.analyticsLabel=tt)}(b,D),b}function zs(D){return"object"==typeof D&&!!D&&ia in D}function Zi(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function la(D){return Dn.create("missing-app-config-values",{valueName:D})}Zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vp{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Lp(D){if(!D||!D.options)throw la("App Configuration Object");if(!D.name)throw la("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw la(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Ic(D){return vu.apply(this,arguments)}function vu(){return(vu=(0,O.Z)(function*(D){var b;try{D.swRegistration=yield navigator.serviceWorker.register(Ai,{scope:Hi}),D.swRegistration.update().catch(()=>{})}catch(x){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:null===(b=x)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function da(D,b){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Ic(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function ha(D,b){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Gi)})).apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(D,b){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield ha(D,b?.vapidKey),yield da(D,b?.serviceWorkerRegistration),gu(D)})).apply(this,arguments)}function Cc(D,b,x){return bc.apply(this,arguments)}function bc(){return(bc=(0,O.Z)(function*(D,b,x){const F=Tc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ia],message_name:x[ou],message_time:x[gc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tc(D){switch(D){case zi.NOTIFICATION_CLICKED:return"notification_open";case zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qs(){return(qs=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===zi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ca(x)):D.onMessageHandler.next(ca(x)));const F=x.data;zs(F)&&"1"===F[Dh]&&(yield Cc(D,x.messageType,F))})).apply(this,arguments)}const Ws="@firebase/messaging",Kn=D=>{const b=new Vp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Fl(D,b){return qs.apply(this,arguments)}(b,x)),b},Gr=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function _u(D,b){return wu.apply(this,arguments)}(b,F)}};function Ll(){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function mn(){(0,se._registerComponent)(new le.wA("messaging",Kn,"PUBLIC")),(0,se._registerComponent)(new le.wA("messaging-internal",Gr,"PRIVATE")),(0,se.registerVersion)(Ws,"0.10.0"),(0,se.registerVersion)(Ws,"0.10.0","esm2017")}();const _o="analytics",Bl="firebase_id",Ks="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cu="https://www.googletagmanager.com/gtag/js",An=new ue.Yd("@firebase/analytics");function bu(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function Tu(D,b){const x=document.createElement("script");x.src=`${Cu}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function xh(D,b,x,F,Z,ee){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(D,b,x,F,Z,ee){const Ee=F[Z];try{if(Ee)yield b[Ee];else{const tt=(yield bu(x)).find(yt=>yt.measurementId===Z);tt&&(yield b[tt.appId])}}catch(Me){An.error(Me)}D("config",Z,ee)})).apply(this,arguments)}function Io(D,b,x,F,Z){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(D,b,x,F,Z){try{let ee=[];if(Z&&Z.send_to){let Ee=Z.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Me=yield bu(x);for(const tt of Ee){const yt=Me.find(dt=>dt.measurementId===tt),bt=yt&&b[yt.appId];if(!bt){ee=[];break}ee.push(bt)}}0===ee.length&&(ee=Object.values(b)),yield Promise.all(ee),D("event",F,Z||{})}catch(ee){An.error(ee)}})).apply(this,arguments)}function $l(D){const b=window.document.getElementsByTagName("script");for(const x of Object.values(b))if(x.src&&x.src.includes(Cu)&&x.src.includes(D))return x;return null}const ir=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ma=new class Mi{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Gl(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ya(D){return xc.apply(this,arguments)}function xc(){return(xc=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,Z={method:"GET",headers:Gl(F)},ee=Ks.replace("{app-id}",x),Ee=yield fetch(ee,Z);if(200!==Ee.status&&304!==Ee.status){let Me="";try{const tt=yield Ee.json();null!==(b=tt.error)&&void 0!==b&&b.message&&(Me=tt.error.message)}catch{}throw ir.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Me})}return Ee.json()})).apply(this,arguments)}function Nn(D){return mi.apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(D,b=ma,x){const{appId:F,apiKey:Z,measurementId:ee}=D.options;if(!F)throw ir.create("no-app-id");if(!Z){if(ee)return{measurementId:ee,appId:F};throw ir.create("no-api-key")}const Ee=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Me=new Mu;return setTimeout((0,O.Z)(function*(){Me.abort()}),void 0!==x?x:6e4),Au({appId:F,apiKey:Z,measurementId:ee},Ee,Me,b)})).apply(this,arguments)}function Au(D,b,x){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,Z=ma){var ee,Ee;const{appId:Me,measurementId:tt}=D;try{yield va(F,b)}catch(yt){if(tt)return An.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${null===(ee=yt)||void 0===ee?void 0:ee.message}]`),{appId:Me,measurementId:tt};throw yt}try{const yt=yield ya(D);return Z.deleteThrottleMetadata(Me),yt}catch(yt){const bt=yt;if(!xu(bt)){if(Z.deleteThrottleMetadata(Me),tt)return An.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:Me,measurementId:tt};throw yt}const dt=503===Number(null===(Ee=bt?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,re.$s)(x,Z.intervalMillis,30):(0,re.$s)(x,Z.intervalMillis),In={throttleEndTimeMillis:Date.now()+dt,backoffCount:x+1};return Z.setThrottleMetadata(Me,In),An.debug(`Calling attemptFetch again in ${dt} millis`),Au(D,In,F,Z)}})).apply(this,arguments)}function va(D,b){return new Promise((x,F)=>{const Z=Math.max(b-Date.now(),0),ee=setTimeout(x,Z);D.addEventListener(()=>{clearTimeout(ee),F(ir.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function xu(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Mu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let _s,wa;function ws(){return(ws=(0,O.Z)(function*(D,b,x,F,Z){if(Z&&Z.global)D("event",x,F);else{const ee=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function Xs(D){wa=D}function Nc(D){_s=D}function Yi(){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(){var D;if(!(0,re.hl)())return An.warn(ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(b){return An.warn(ir.create("indexeddb-unavailable",{errorInfo:null===(D=b)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(D,b,x,F,Z,ee,Ee){var Me;const tt=Nn(D);tt.then(fr=>{x[fr.measurementId]=fr.appId,D.options.measurementId&&fr.measurementId!==D.options.measurementId&&An.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${fr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fr=>An.error(fr)),b.push(tt);const yt=Yi().then(fr=>{if(fr)return F.getId()}),[bt,dt]=yield Promise.all([tt,yt]);$l(ee)||Tu(ee,bt.measurementId),wa&&(Z("consent","default",wa),Xs(void 0)),Z("js",new Date);const In=null!==(Me=Ee?.config)&&void 0!==Me?Me:{};return In.origin="firebase",In.update=!0,null!=dt&&(In[Bl]=dt),Z("config",bt.measurementId,In),_s&&(Z("set",_s),Nc(void 0)),bt.measurementId})).apply(this,arguments)}class Ou{constructor(b){this.app=b}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},Is=[];const bo={};let So,eo,To="dataLayer",Ia=!1;function iy(D,b,x){!function Up(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=ir.create("invalid-analytics-context",{errorInfo:b});An.warn(x.message)}}();const F=D.options.appId;if(!F)throw ir.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ir.create("no-api-key");An.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[F])throw ir.create("already-exists",{id:F});if(!Ia){!function jl(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(To);const{wrappedGtag:ee,gtagCore:Ee}=function fa(D,b,x,F,Z){let ee=function(...Ee){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ee=window[Z]),window[Z]=function Su(D,b,x,F){function ee(){return(ee=(0,O.Z)(function*(Ee,Me,tt){try{"event"===Ee?yield Io(D,b,x,Me,tt):"config"===Ee?yield xh(D,b,x,F,Me,tt):"consent"===Ee?D("consent","update",tt):D("set",Me)}catch(yt){An.error(yt)}})).apply(this,arguments)}return function Z(Ee,Me,tt){return ee.apply(this,arguments)}}(ee,D,b,x),{gtagCore:ee,wrappedGtag:window[Z]}}(zr,Is,bo,To,"gtag");eo=ee,So=Ee,Ia=!0}return zr[F]=function Do(D,b,x,F,Z,ee,Ee){return Co.apply(this,arguments)}(D,Is,bo,b,So,To,x),new Ou(D)}function oy(){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const ot="@firebase/analytics";!function wn(){(0,se._registerComponent)(new le.wA(_o,(b,{options:x})=>iy(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new le.wA("analytics-internal",function D(b){try{const x=b.getProvider(_o).getImmediate();return{logEvent:(F,Z,ee)=>function cn(D,b,x,F){D=(0,re.m9)(D),function zl(D,b,x,F,Z){return ws.apply(this,arguments)}(eo,zr[D.app.options.appId],b,x,F).catch(Z=>An.error(Z))}(x,F,Z,ee)}}catch(x){throw ir.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(ot,"0.8.4"),(0,se.registerVersion)(ot,"0.8.4","esm2017")}();var vi=k(4408),Nr=k(7565);const ku=new class Es extends Nr.v{}(class Ea extends vi.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):(b.flush(this),0)}});var Pc=k(4986),Da=k(8505),Ao=k(9468),Ds=k(5363);const at=new p.GfV("7.4.1"),Ca="__angularfire_symbol__analyticsIsSupportedValue",Cs="__angularfire_symbol__analyticsIsSupported",ba="__angularfire_symbol__remoteConfigIsSupportedValue",xo="__angularfire_symbol__remoteConfigIsSupported",Yn="__angularfire_symbol__messagingIsSupportedValue",kc="__angularfire_symbol__messagingIsSupported";function Ta(D,b,x){if(b){if(1===b.length)return b[0];const ee=b.filter(Ee=>Ee.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Cs]||(globalThis[Cs]=oy().then(D=>globalThis[Ca]=D).catch(()=>globalThis[Ca]=!1)),globalThis[kc]||(globalThis[kc]=Ll().then(D=>globalThis[Yn]=D).catch(()=>globalThis[Yn]=!1)),globalThis[xo]||(globalThis[xo]=su().then(D=>globalThis[ba]=D).catch(()=>globalThis[ba]=!1));const bs=(D,b)=>{const x=b?[b]:(0,X.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(D).instances.forEach(Ee=>{F.includes(Ee)||F.push(Ee)})}),F};function Ts(){}class _i{constructor(b,x=ku){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const Z=this.zone;return this.delegate.schedule(function(Ee){Z.runGuarded(()=>{b.apply(this,[Ee])})},x,F)}}class Lc{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ts,{},Ts,Ts)),x.pipe((0,Da.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ro=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new _i(Zone.current)),this.insideAngular=x.run(()=>new _i(Zone.current,Pc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function qr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Ji(D){return qr(),function Bn(D){return function(x){return(x=x.lift(new Lc(D.ngZone))).pipe((0,Ao.R)(D.outsideAngular),(0,Ds.Q)(D.insideAngular))}}(qr())(D)}},2090:(ut,Te,k)=>{k.d(Te,{$s:()=>Qe,BH:()=>Ut,G6:()=>Ie,L:()=>de,LL:()=>Zt,Pz:()=>Yt,Sg:()=>We,UG:()=>we,US:()=>le,ZB:()=>B,ZR:()=>pn,aH:()=>ct,b$:()=>fe,eu:()=>$e,hl:()=>je,jU:()=>Xe,m9:()=>Rt,ne:()=>Fn,pd:()=>bi,r3:()=>fi,ru:()=>ge,tV:()=>he,uI:()=>Ae,vZ:()=>Ze,w1:()=>it,xO:()=>zn,xb:()=>Kr,z$:()=>Ve,zI:()=>V,zd:()=>Yr});const se=function(j){const L=[];let q=0;for(let _e=0;_e<j.length;_e++){let K=j.charCodeAt(_e);K<128?L[q++]=K:K<2048?(L[q++]=K>>6|192,L[q++]=63&K|128):55296==(64512&K)&&_e+1<j.length&&56320==(64512&j.charCodeAt(_e+1))?(K=65536+((1023&K)<<10)+(1023&j.charCodeAt(++_e)),L[q++]=K>>18|240,L[q++]=K>>12&63|128,L[q++]=K>>6&63|128,L[q++]=63&K|128):(L[q++]=K>>12|224,L[q++]=K>>6&63|128,L[q++]=63&K|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,L){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let K=0;K<j.length;K+=3){const ze=j[K],lt=K+1<j.length,Kt=lt?j[K+1]:0,ln=K+2<j.length,zt=ln?j[K+2]:0;let Ft=(15&Kt)<<2|zt>>6,nr=63&zt;ln||(nr=64,lt||(Ft=64)),_e.push(q[ze>>2],q[(3&ze)<<4|Kt>>4],q[Ft],q[nr])}return _e.join("")},encodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(j):this.encodeByteArray(se(j),L)},decodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(j):function(j){const L=[];let q=0,_e=0;for(;q<j.length;){const K=j[q++];if(K<128)L[_e++]=String.fromCharCode(K);else if(K>191&&K<224){const ze=j[q++];L[_e++]=String.fromCharCode((31&K)<<6|63&ze)}else if(K>239&&K<365){const ln=((7&K)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;L[_e++]=String.fromCharCode(55296+(ln>>10)),L[_e++]=String.fromCharCode(56320+(1023&ln))}else{const ze=j[q++],lt=j[q++];L[_e++]=String.fromCharCode((15&K)<<12|(63&ze)<<6|63&lt)}}return L.join("")}(this.decodeStringToByteArray(j,L))},decodeStringToByteArray(j,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let K=0;K<j.length;){const ze=q[j.charAt(K++)],Kt=K<j.length?q[j.charAt(K)]:0;++K;const zt=K<j.length?q[j.charAt(K)]:64;++K;const He=K<j.length?q[j.charAt(K)]:64;if(++K,null==ze||null==Kt||null==zt||null==He)throw Error();_e.push(ze<<2|Kt>>4),64!==zt&&(_e.push(Kt<<4&240|zt>>2),64!==He&&_e.push(zt<<6&192|He))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const L=se(j);return le.encodeByteArray(L,!0)}(j).replace(/\./g,"")},he=function(j){try{return le.decodeString(j,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function B(j,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!W(q)||(j[q]=B(j[q],L[q]));return j}function W(j){return"__proto__"!==j}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function it(){const j=Ve();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){return"object"==typeof indexedDB}function $e(){return new Promise((j,L)=>{try{let q=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(_e);K.onsuccess=()=>{K.result.close(),q||self.indexedDB.deleteDatabase(_e),j(!0)},K.onupgradeneeded=()=>{q=!1},K.onerror=()=>{var ze;L((null===(ze=K.error)||void 0===ze?void 0:ze.message)||"")}}catch(q){L(q)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=j&&he(j[1]);return L&&JSON.parse(L)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ct=()=>{var j;return null===(j=te())||void 0===j?void 0:j.config},Yt=j=>{var L;return null===(L=te())||void 0===L?void 0:L[`_${j}`]};class Ut{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,_e)=>{q?this.reject(q):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,_e))}}}function We(j,L){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",K=j.iat||0,ze=j.sub||j.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const lt=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:K,exp:K+3600,auth_time:K,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(lt)),""].join(".")}class pn extends Error{constructor(L,q,_e){super(q),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(L,q,_e){this.service=L,this.serviceName=q,this.errors=_e}create(L,...q){const _e=q[0]||{},K=`${this.service}/${L}`,ze=this.errors[L],lt=ze?function Qt(j,L){return j.replace(Sr,(q,_e)=>{const K=L[_e];return null!=K?String(K):`<${_e}?>`})}(ze,_e):"Error";return new pn(K,`${this.serviceName}: ${lt} (${K}).`,_e)}}const Sr=/\{\$([^}]+)}/g;function fi(j,L){return Object.prototype.hasOwnProperty.call(j,L)}function Kr(j){for(const L in j)if(Object.prototype.hasOwnProperty.call(j,L))return!1;return!0}function Ze(j,L){if(j===L)return!0;const q=Object.keys(j),_e=Object.keys(L);for(const K of q){if(!_e.includes(K))return!1;const ze=j[K],lt=L[K];if(mr(ze)&&mr(lt)){if(!Ze(ze,lt))return!1}else if(ze!==lt)return!1}for(const K of _e)if(!q.includes(K))return!1;return!0}function mr(j){return null!==j&&"object"==typeof j}function zn(j){const L=[];for(const[q,_e]of Object.entries(j))Array.isArray(_e)?_e.forEach(K=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function Yr(j){const L={};return j.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[K,ze]=_e.split("=");L[decodeURIComponent(K)]=decodeURIComponent(ze)}}),L}function bi(j){const L=j.indexOf("?");if(!L)return"";const q=j.indexOf("#",L);return j.substring(L,q>0?q:void 0)}function Fn(j,L){const q=new dn(j,L);return q.subscribe.bind(q)}class dn{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,_e){let K;if(void 0===L&&void 0===q&&void 0===_e)throw new Error("Missing Observer.");K=function st(j,L){if("object"!=typeof j||null===j)return!1;for(const q of L)if(q in j&&"function"==typeof j[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:_e},void 0===K.next&&(K.next=rn),void 0===K.error&&(K.error=rn),void 0===K.complete&&(K.complete=rn);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),ze}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function Qe(j,L=1e3,q=2){const _e=L*Math.pow(q,j),K=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+K)}function Rt(j){return j&&j._delegate?j._delegate:j}},6155:(ut,Te,k)=>{var p=k(4650);let X=null;function O(){return X}const ue=new p.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function he(){return(0,p.LFG)(B)}()},providedIn:"platform"}),n})();const U=new p.OlP("Location Initialized");let B=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){W()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){W()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ve(){return new B((0,p.LFG)(ue))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Ye)},providedIn:"root"}),n})();const fe=new p.OlP("appBaseHref");let Ye=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(de),p.LFG(fe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),it=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(de),p.LFG(fe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(je(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Ae,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(p.LFG(ge))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ve(){return new Se((0,p.LFG)(ge))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class na{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $s=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new na(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),ps(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ps(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ps(n,e){n.context.$implicit=e.item}let sa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function hr(n){return"server"===n}let au=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Th((0,p.LFG)(ue),window)}),n})();class Th{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Jr(this.window.history)||Jr(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Jr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class qs extends class Fl extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){X||(X=n)}(new qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Iu(){return Ws=Ws||document.querySelector("base"),Ws?Ws.getAttribute("href"):null}();return null==t?null:function Gr(n){Kn=Kn||document.createElement("a"),Kn.setAttribute("href",n);const e=Kn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ru(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Kn,Ws=null;const mn=new p.OlP("TRANSITION_ID"),Sc=[{provide:p.ip1,useFactory:function Ll(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[mn,ue,p.zs3],multi:!0}];let Ac=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=new p.OlP("EventManagerPlugins");let Vl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Eu),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Du{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Zs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),vo=(()=>{class n extends Zs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ul),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ul))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Ul(n){O().remove(n)}const _o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bl=/%COMP%/g;function Tu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Tu(n,o,t):(o=o.replace(Bl,n),t.push(o))}return t}function jl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wo=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Io(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new $l(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new Hl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Tu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vl),p.LFG(vo),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Io{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_o[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(fa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(fa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=_o[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=_o[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,jl(r)):this.eventManager.addEventListener(e,t,jl(r))}}function fa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $l extends Io{constructor(e,t,r,o){super(e),this.component=r;const u=Tu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function An(n){return"_ngcontent-%COMP%".replace(Bl,n)}(o+"-"+r.id),this.hostAttr=function bu(n){return"_nghost-%COMP%".replace(Bl,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Hl extends Io{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Tu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ir=(()=>{class n extends Du{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const pa=["alt","control","meta","shift"],ga={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ma=(()=>{class n extends Du{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),pa.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=ga[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),pa.forEach(d=>{d!==o&&(0,Mi[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Mu=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Au(){qs.makeCurrent()},multi:!0},{provide:ue,useFactory:function va(){return(0,p.RDi)(document),document},deps:[]}]),_s=new p.OlP(""),zl=[{provide:p.rWj,useClass:class Ah{addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],ws=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Qs(){return new p.qLn},deps:[]},{provide:Eu,useClass:ir,multi:!0,deps:[ue,p.R0b,p.Lbi]},{provide:Eu,useClass:ma,multi:!0,deps:[ue]},{provide:wo,useClass:wo,deps:[Vl,vo,p.AFp]},{provide:p.FYo,useExisting:wo},{provide:Zs,useExisting:vo},{provide:vo,useClass:vo,deps:[ue]},{provide:Vl,useClass:Vl,deps:[Eu,p.R0b]},{provide:class mo{},useClass:Ac,deps:[]},[]];let Mc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:mn,useExisting:p.AFp},Sc]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_s,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...ws,...zl],imports:[sa,p.hGG]}),n})(),Ki=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Eo(){return new Ki((0,p.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var cn=k(8996),yi=k(7669);function ot(...n){const e=(0,yi.yG)(n);return(0,cn.D)(n,e)}var ei=k(7579);class wn extends ei.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ea=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Nr=k(9751);const{isArray:Es}=Array,{getPrototypeOf:ku,prototype:jp,keys:Pc}=Object;function Da(n){if(1===n.length){const e=n[0];if(Es(e))return{args:e,keys:null};if(function Ao(n){return n&&"object"==typeof n&&ku(n)===jp}(e)){const t=Pc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ds=k(4671),at=k(4004);const{isArray:Ca}=Array;function ba(n){return(0,at.U)(e=>function Cs(n,e){return Ca(e)?n(...e):n(e)}(n,e))}function xo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Yn=k(5403),kc=k(9672);function Mo(...n){const e=(0,yi.yG)(n),t=(0,yi.jO)(n),{args:r,keys:o}=Da(n);if(0===r.length)return(0,cn.D)([],e);const u=new Nr.y(function $p(n,e,t=Ds.y){return r=>{Fc(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Fc(e,()=>{const C=(0,cn.D)(n[w],e);let A=!1;C.subscribe((0,Yn.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>xo(o,d):Ds.y));return t?u.pipe(ba(t)):u}function Fc(n,e,t){n?(0,kc.f)(t,n,e):e()}var Fu=k(8189);function bs(...n){return function Ta(){return(0,Fu.J)(1)}()((0,cn.D)(n,(0,yi.yG)(n)))}var Ts=k(8421);function _i(n){return new Nr.y(e=>{(0,Ts.Xf)(n()).subscribe(e)})}var Lc=k(9635),Ro=k(576);function qr(n,e){const t=(0,Ro.m)(n)?n:()=>n,r=o=>o.error(t());return new Nr.y(e?o=>e.schedule(r,0,o):r)}var Qi=k(515),Ri=k(727),vr=k(4482);function Ss(){return(0,vr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ji extends Nr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,vr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ri.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ri.w0.EMPTY)}return e}refCount(){return Ss()(this)}}function Bn(n,e){return(0,vr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Yn.x)(r,w=>{o?.unsubscribe();let C=0;const A=u++;(0,Ts.Xf)(n(w,A)).subscribe(o=(0,Yn.x)(r,N=>r.next(e?e(w,N,A,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}function yn(n){return n<=0?()=>Qi.E:(0,vr.e)((e,t)=>{let r=0;e.subscribe((0,Yn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Lu(...n){const e=(0,yi.yG)(n);return(0,vr.e)((t,r)=>{(e?bs(n,t,e):bs(n,t)).subscribe(r)})}function D(n,e){return(0,vr.e)((t,r)=>{let o=0;t.subscribe((0,Yn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var b=k(5577);function x(n){return(0,vr.e)((e,t)=>{let r=!1;e.subscribe((0,Yn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function F(n=Z){return(0,vr.e)((e,t)=>{let r=!1;e.subscribe((0,Yn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Z(){return new Ea}function ee(n,e){const t=arguments.length>=2;return r=>r.pipe(n?D((o,u)=>n(o,u,r)):Ds.y,yn(1),t?x(e):F(()=>new Ea))}function Ee(n,e){return(0,Ro.m)(e)?(0,b.z)(n,e,1):(0,b.z)(n,1)}var Me=k(8505);function tt(n){return(0,vr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Yn.x)(t,void 0,void 0,d=>{u=(0,Ts.Xf)(n(d,tt(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function yt(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,Yn.x)(d,A=>{const N=C++;w=m?n(w,A,N):(m=!0,A),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function bt(n,e){return(0,vr.e)(yt(n,e,arguments.length>=2,!0))}function dt(n){return n<=0?()=>Qi.E:(0,vr.e)((e,t)=>{let r=[];e.subscribe((0,Yn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function In(n,e){const t=arguments.length>=2;return r=>r.pipe(n?D((o,u)=>n(o,u,r)):Ds.y,dt(1),t?x(e):F(()=>new Ea))}function As(n){return(0,vr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tt="primary",Ni=Symbol("RouteTitle");class xs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ti(n){return new xs(n)}function Oo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Rh(n[o],e[o]))return!1;return!0}function Rh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Hp(n){return Array.prototype.concat.apply([],n)}function Gp(n){return n.length>0?n[n.length-1]:null}function Qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Oi(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,cn.D)(Promise.resolve(n)):ot(n)}const v0={exact:function qp(n,e,t){if(!ro(n.segments,e.segments)||!no(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!qp(n.children[r],e.children[r],t))return!1;return!0},subset:Sa},Oh={exact:function Ph(n,e){return wi(n,e)},subset:function Wp(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Rh(n[t],e[t]))},ignored:()=>!0};function ly(n,e,t){return v0[t.paths](n.root,e.root,t.matrixParams)&&Oh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Sa(n,e,t){return Wl(n,e,e.segments,t)}function Wl(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ro(o,t)||e.hasChildren()||!no(o,t,r))}if(n.segments.length===t.length){if(!ro(n.segments,t)||!no(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Sa(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ro(n.segments,o)&&no(n.segments,o,r)&&n.children[Tt])&&Wl(n.children[Tt],e,u,r)}}function no(n,e,t){return e.every((r,o)=>Oh[t](n[o].parameters,r.parameters))}class Aa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return Yl.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ql(this)}}class Zl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ti(this.parameters)),this._parameterMap}toString(){return Yp(this)}}function ro(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let kh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new Kl},providedIn:"root"}),n})();class Kl{parse(e){const t=new Ma(e);return new Aa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${xa(e.root,!0)}`,r=function w0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Uc(t)}=${Uc(o)}`).join("&"):`${Uc(t)}=${Uc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function dy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Yl=new Kl;function Ql(n){return n.segments.map(e=>Yp(e)).join("/")}function xa(n,e){if(!n.hasChildren())return Ql(n);if(e){const t=n.children[Tt]?xa(n.children[Tt],!1):"",r=[];return Qn(n.children,(o,u)=>{u!==Tt&&r.push(`${u}:${xa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Zp(n,e){let t=[];return Qn(n.children,(r,o)=>{o===Tt&&(t=t.concat(e(r,o)))}),Qn(n.children,(r,o)=>{o!==Tt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Tt?[xa(n.children[Tt],!1)]:[`${o}:${xa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${Ql(n)}/${t[0]}`:`${Ql(n)}/(${t.join("//")})`}}function Kp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uc(n){return Kp(n).replace(/%3B/gi,";")}function Pi(n){return Kp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Po(n){return decodeURIComponent(n)}function Fh(n){return Po(n.replace(/\+/g,"%20"))}function Yp(n){return`${Pi(n.path)}${function _0(n){return Object.keys(n).map(e=>`;${Pi(e)}=${Pi(n[e])}`).join("")}(n.parameters)}`}const I0=/^[^\/()?;=#]+/;function Lh(n){const e=n.match(I0);return e?e[0]:""}const Qp=/^[^=?&#]+/,hy=/^[^&#]+/;class Ma{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new $t(e,t)),r}parseSegment(){const e=Lh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new Zl(Po(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Lh(this.remaining);o&&(r=o,this.capture(r))}e[Po(t)]=Po(r)}parseQueryParam(e){const t=function Jp(n){const e=n.match(Qp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function E0(n){const e=n.match(hy);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Fh(t),u=Fh(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lh(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new p.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Tt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Tt]:new $t([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function Bc(n){return n.segments.length>0?new $t([],{[Tt]:n}):n}function ki(n){const e={};for(const r of Object.keys(n.children)){const u=ki(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ra(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function ko(n){return n instanceof Aa}function C0(n,e,t,r,o){if(0===t.length)return jc(e.root,e.root,e.root,r,o);const u=function eg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Vh(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Qn(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Vh(t,e,r)}(t);return u.toRoot()?jc(e.root,e.root,new $t([],{}),r,o):function d(w){const C=function Uh(n,e,t,r){if(n.isAbsolute)return new Uu(e.root,!0,0);if(-1===r)return new Uu(t,t===e.root,0);return function Bh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new p.vHH(4005,!1);o=r.segments.length}return new Uu(r,!1,o-u)}(t,r+(Na(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?so(C.segmentGroup,C.index,u.commands):$c(C.segmentGroup,C.index,u.commands);return jc(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function Na(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function io(n){return"object"==typeof n&&null!=n&&n.outlets}function jc(n,e,t,r,o){let d,u={};r&&Qn(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),d=n===e?t:py(n,e,t);const m=Bc(ki(d));return new Aa(m,u,o)}function py(n,e,t){const r={};return Qn(n.children,(o,u)=>{r[u]=o===e?t:py(o,e,t)}),new $t(n.segments,r)}class Vh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Na(r[0]))throw new p.vHH(4003,!1);const o=r.find(io);if(o&&o!==Gp(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Uu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $c(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return so(n,e,t);const r=function gy(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(io(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!ed(w,C,d))return u;r+=2}else{if(!ed(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new $t(n.segments.slice(0,r.pathIndex),{});return u.children[Tt]=new $t(n.segments.slice(r.pathIndex),n.children),so(u,0,o)}return r.match&&0===o.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?On(n,e,t):r.match?so(n,0,o):On(n,e,t)}function so(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function Jl(n){return io(n[0])?n[0].outlets:{[Tt]:n}}(t),o={};return Qn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=$c(n.children[d],e,u))}),Qn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new $t(n.segments,o)}}function On(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(io(u)){const w=Xl(u.outlets);return new $t(r,w)}if(0===o&&Na(t[0])){r.push(new Zl(n.segments[e].path,ng(t[0]))),o++;continue}const d=io(u)?u.outlets[Tt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Na(m)?(r.push(new Zl(d,ng(m))),o+=2):(r.push(new Zl(d,{})),o++)}return new $t(r,{})}function Xl(n){const e={};return Qn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=On(new $t([],{}),0,t))}),e}function ng(n){const e={};return Qn(n,(t,r)=>e[r]=`${t}`),e}function ed(n,e,t){return n==t.path&&wi(e,t.parameters)}class Ms{constructor(e,t){this.id=e,this.url=t}}class td extends Ms{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oa extends Ms{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nd extends Ms{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rg extends Ms{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class my extends Ms{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rd extends Ms{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b0 extends Ms{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bu extends Ms{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jh extends Ms{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ig{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sg{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class og{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ag{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class id{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sd{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class od{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Gc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Or(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Or(e,this._root).map(t=>t.value)}}function Gc(n,e){if(n===e.value)return e;for(const t of e.children){const r=Gc(n,t);if(r)return r}return null}function Or(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Or(n,t);if(r.length)return r.unshift(e),r}return[]}class ni{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ii(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ug extends od{constructor(e,t){super(e),this.snapshot=t,qc(this,e)}toString(){return this.snapshot.toString()}}function ju(n,e){const t=function $u(n,e){const d=new _r([],{},{},"",{},Tt,e,null,n.root,-1,{});return new ud("",new ni(d,[]))}(n,e),r=new wn([new Zl("",{})]),o=new wn({}),u=new wn({}),d=new wn({}),m=new wn(""),w=new Fo(r,o,d,m,u,Tt,e,t.root);return w.snapshot=t.root,new ug(new ni(w,[]),t)}class Fo{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,at.U)(C=>C[Ni]))??ot(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>ti(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>ti(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function ad(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _r{constructor(e,t,r,o,u,d,m,w,C,A,N,$){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[Ni],this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._correctedLastPathIndex=$??A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ud extends od{constructor(e,t){super(t),this.url=e,qc(this,t)}toString(){return cg(this._root)}}function qc(n,e){e.value._routerState=n,e.children.forEach(t=>qc(n,t))}function cg(n){const e=n.children.length>0?` { ${n.children.map(cg).join(", ")} } `:"";return`${n.value}${e}`}function $h(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wi(e.params,t.params)||n.params.next(t.params),function to(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Wc(n,e){const t=wi(n.params,e.params)&&function Vc(n,e){return ro(n,e)&&n.every((t,r)=>wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Wc(n.parent,e.parent))}function Pa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Hh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Pa(n,r,o);return Pa(n,r)})}(n,e,t);return new ni(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Pa(n,m)),d}}const r=function yy(n){return new Fo(new wn(n.url),new wn(n.params),new wn(n.queryParams),new wn(n.fragment),new wn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Pa(n,u));return new ni(r,o)}}const Xi="ngNavigationCancelingError";function Lo(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ko(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Gh(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Gh(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Xi]=!0,r.cancellationCode=e,t&&(r.url=t),r}function cd(n){return lg(n)&&ko(n.url)}function lg(n){return n&&n[Xi]}class ld{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new dd,this.attachRef=null}}let dd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ld,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hd=!1;let ka=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=o||Tt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,hd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,hd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,hd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,hd);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new vy(t,m,o.injector);if(r&&function y(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(dd),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class vy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fo?this.route:e===dd?this.childContexts:this.parent.get(e,t)}}let h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[ka],encapsulation:2}),n})();function g(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ht(n){const e=n.children&&n.children.map(ht),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=h),t}function on(n){return n.outlet||Tt}function ri(n,e){const t=n.filter(r=>on(r)===e);return t.push(...n.filter(r=>on(r)!==e)),t}function Fa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Zc{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$h(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Ii(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Qn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Ii(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Ii(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Ii(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new sd(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ag(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if($h(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),$h(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Fa(o.snapshot),w=m?.get(p._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class dg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fd{constructor(e,t){this.component=e,this.route=t}}function hg(n,e,t){const r=n._root;return La(r,e?e._root:null,t,[r.value])}function Hu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function La(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ii(e);return n.children.forEach(d=>{(function zh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function qh(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wc(n,e)||!wi(n.queryParams,e.queryParams);default:return!Wc(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new dg(r)):(u.data=d.data,u._resolvedData=d._resolvedData),La(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new fd(m.outlet.component,d))}else d&&Vo(e,m,o),o.canActivateChecks.push(new dg(r)),La(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Qn(u,(d,m)=>Vo(d,t.getContext(m),o)),o}function Vo(n,e,t){const r=Ii(n),o=n.value;Qn(r,(u,d)=>{Vo(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new fd(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Gu(n){return"function"==typeof n}function fg(n){return n instanceof Ea||"EmptyError"===n?.name}const pg=Symbol("INITIAL_VALUE");function pd(){return Bn(n=>Mo(n.map(e=>e.pipe(yn(1),Lu(pg)))).pipe((0,at.U)(e=>{for(const t of e)if(!0!==t){if(t===pg)return pg;if(!1===t||t instanceof Aa)return t}return!0}),D(e=>e!==pg),yn(1)))}function ii(n){return(0,Lc.z)((0,Me.b)(e=>{if(ko(e))throw Lo(0,e)}),(0,at.U)(e=>!0===e))}const gg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mg(n,e,t,r,o){const u=Pr(n,e,t);return u.matched?function Cy(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?ot(o.map(d=>{const m=Hu(d,n);return Oi(function kD(n){return n&&Gu(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(pd(),ii()):ot(!0)}(r=g(e,r),e,t).pipe((0,at.U)(d=>!0===d?u:{...gg})):ot(u)}function Pr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...gg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Oo)(t,n,e);if(!o)return{...gg};const u={};Qn(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function zu(n,e,t,r,o="corrected"){if(t.length>0&&function zD(n,e,t){return t.some(r=>yg(n,e,r)&&on(r)!==Tt)}(n,t,r)){const d=new $t(e,function GD(n,e,t,r){const o={};o[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&on(u)!==Tt){const d=new $t([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[on(u)]=d}return o}(n,e,r,new $t(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function M0(n,e,t){return t.some(r=>yg(n,e,r))}(n,t,r)){const d=new $t(n.segments,function x0(n,e,t,r,o,u){const d={};for(const m of r)if(yg(n,t,m)&&!o[on(m)]){const w=new $t([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[on(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new $t(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function yg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function by(n,e,t,r){return!!(on(n)===r||r!==Tt&&yg(e,t,n))&&("**"===n.path||Pr(e,n,t).matched)}function R0(n,e,t){return 0===e.length&&!n.children[t]}const Zh=!1;class vg{constructor(e){this.segmentGroup=e||null}}class N0{constructor(e){this.urlTree=e}}function Kh(n){return qr(new vg(n))}function O0(n){return qr(new N0(n))}class WD{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=zu(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Tt).pipe((0,at.U)(u=>this.createUrlTree(ki(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(tt(u=>{if(u instanceof N0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof vg?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tt).pipe((0,at.U)(o=>this.createUrlTree(ki(o),e.queryParams,e.fragment))).pipe(tt(o=>{throw o instanceof vg?this.noMatchError(o):o}))}noMatchError(e){return new p.vHH(4002,Zh)}createUrlTree(e,t,r){const o=Bc(e);return new Aa(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(u=>new $t([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,cn.D)(o).pipe(Ee(u=>{const d=r.children[u],m=ri(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,at.U)(w=>({segment:w,outlet:u})))}),bt((u,d)=>(u[d.outlet]=d.segment,u),{}),In())}expandSegment(e,t,r,o,u,d){return(0,cn.D)(r).pipe(Ee(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(tt(C=>{if(C instanceof vg)return ot(null);throw C}))),ee(m=>!!m),tt((m,w)=>{if(fg(m))return R0(t,o,u)?ot(new $t([],{})):Kh(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return by(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Kh(t):Kh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?O0(u):this.lineralizeSegments(r,u).pipe((0,b.z)(d=>{const m=new $t(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=Pr(t,o,u);if(!m)return Kh(t);const N=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?O0(N):this.lineralizeSegments(o,N).pipe((0,b.z)($=>this.expandSegment(e,t,r,$.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=g(r,e),r.loadChildren?(r._loadedRoutes?ot({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,at.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new $t(o,{})))):ot(new $t(o,{}))):mg(t,r,o,e).pipe(Bn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,b.z)(A=>{const N=A.injector??e,$=A.routes,{segmentGroup:Y,slicedSegments:oe}=zu(t,m,w,$),Oe=new $t(Y.segments,Y.children);if(0===oe.length&&Oe.hasChildren())return this.expandChildren(N,$,Oe).pipe((0,at.U)(Lt=>new $t(m,Lt)));if(0===$.length&&0===oe.length)return ot(new $t(m,{}));const Pe=on(r)===u;return this.expandSegment(N,Oe,$,oe,Pe?Tt:u,!0).pipe((0,at.U)(Pt=>new $t(m.concat(Pt.segments),Pt.children)))})):Kh(t)))}getChildConfig(e,t,r){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function HD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?ot(!0):ot(o.map(d=>{const m=Hu(d,n);return Oi(function Iy(n){return n&&Gu(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(pd(),ii())}(e,t,r).pipe((0,b.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Me.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function gd(n){return qr(Gh(Zh,3))}())):ot({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ot(r);if(o.numberOfChildren>1||!o.children[Tt])return qr(new p.vHH(4e3,Zh));o=o.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Aa(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Qn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Qn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new $t(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new p.vHH(4001,Zh);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class rA{}class Uo{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=zu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe((0,at.U)(t=>{if(null===t)return null;const r=new _r([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ni(r,t),u=new ud(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=zc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,cn.D)(Object.keys(r.children)).pipe(Ee(o=>{const u=r.children[o],d=ri(t,o);return this.processSegmentGroup(e,d,u,o)}),bt((o,u)=>o&&u?(o.push(...u),o):null),function fr(n,e=!1){return(0,vr.e)((t,r)=>{let o=0;t.subscribe((0,Yn.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),x(null),In(),(0,at.U)(o=>{if(null===o)return null;const u=xy(o);return function Sy(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,cn.D)(t).pipe(Ee(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),ee(d=>!!d),tt(d=>{if(fg(d))return R0(r,o,u)?ot([]):ot(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!by(t,r,o,u))return ot(null);let d;if("**"===t.path){const m=o.length>0?Gp(o).parameters:{},w=k0(r)+o.length;d=ot({snapshot:new _r(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_g(t),on(t),t.component??t._loadedComponent??null,t,md(r),w,wg(t),w),consumedSegments:[],remainingSegments:[]})}else d=mg(r,t,o,e).pipe((0,at.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const N=k0(r)+w.length;return{snapshot:new _r(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_g(t),on(t),t.component??t._loadedComponent??null,t,md(r),N,wg(t),N),consumedSegments:w,remainingSegments:C}}));return d.pipe(Bn(m=>{if(null===m)return ot(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function Ay(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:oe}=zu(r,C,A,$.filter(Pe=>void 0===Pe.redirectTo),this.relativeLinkResolution);if(0===oe.length&&Y.hasChildren())return this.processChildren(N,$,Y).pipe((0,at.U)(Pe=>null===Pe?null:[new ni(w,Pe)]));if(0===$.length&&0===oe.length)return ot([new ni(w,[])]);const Oe=on(t)===u;return this.processSegment(N,$,Y,oe,Oe?Tt:u).pipe((0,at.U)(Pe=>null===Pe?null:[new ni(w,Pe)]))}))}}function KD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xy(n){const e=[],t=new Set;for(const r of n){if(!KD(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=xy(r.children);e.push(new ni(r.value,o))}return e.filter(r=>!t.has(r))}function md(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function k0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function _g(n){return n.data||{}}function wg(n){return n.resolve||{}}function Ig(n){return"string"==typeof n.title||null===n.title}function Ry(n){return Bn(e=>{const t=n(e);return t?(0,cn.D)(t).pipe((0,at.U)(()=>e)):ot(e)})}let U0=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[Ni]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(B0)},providedIn:"root"}),n})(),B0=(()=>{class n extends U0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ki))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class JD{}class j0 extends class XD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Yh=new p.OlP("",{providedIn:"root",factory:()=>({})}),Oy=new p.OlP("ROUTES");let Py=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Oi(t.loadComponent()).pipe((0,Me.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),As(()=>{this.componentLoaders.delete(t)})),o=new Ji(r,()=>new ei.x).pipe(Ss());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,at.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=Hp(w.get(Oy,[],p.XFs.Self|p.XFs.Optional)));return{routes:C.map(ht),injector:w}}),As(()=>{this.childrenLoaders.delete(r)})),d=new Ji(u,()=>new ei.x).pipe(Ss());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Oi(t()).pipe((0,b.z)(r=>r instanceof p.YKP||Array.isArray(r)?ot(r):(0,cn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $0{}class H0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function G0(n){throw n}function z0(n,e,t){return e.parse("/")}const eC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function q0(){const n=(0,p.f3M)(kh),e=(0,p.f3M)(dd),t=(0,p.f3M)(Se),r=(0,p.f3M)(p.zs3),o=(0,p.f3M)(p.Sil),u=(0,p.f3M)(Oy,{optional:!0})??[],d=(0,p.f3M)(Yh,{optional:!0})??{},m=(0,p.f3M)(B0),w=(0,p.f3M)(U0,{optional:!0}),C=(0,p.f3M)($0,{optional:!0}),A=(0,p.f3M)(JD,{optional:!0}),N=new pr(null,n,e,t,r,o,Hp(u));return C&&(N.urlHandlingStrategy=C),A&&(N.routeReuseStrategy=A),N.titleStrategy=w??m,function Dg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let pr=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ei.x,this.errorHandler=G0,this.malformedUriErrorHandler=z0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ot(void 0),this.urlHandlingStrategy=new H0,this.routeReuseStrategy=new j0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Py),this.configLoader.onLoadEndListener=$=>this.triggerEvent(new sg($)),this.configLoader.onLoadStartListener=$=>this.triggerEvent(new ig($)),this.ngModule=d.get(p.h0i),this.console=d.get(p.c2e);const N=d.get(p.R0b);this.isNgZoneEnabled=N instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function zp(){return new Aa(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ju(this.currentUrlTree,this.rootComponentType),this.transitions=new wn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(D(o=>0!==o.id),(0,at.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Bn(o=>{let u=!1,d=!1;return ot(o).pipe((0,Me.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ky(m.source)&&(this.browserUrlTree=m.extractedUrl),ot(m).pipe(Bn(N=>{const $=this.transitions.getValue();return r.next(new td(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),$!==this.transitions.getValue()?Qi.E:Promise.resolve(N)}),function ZD(n,e,t,r){return Bn(o=>function Va(n,e,t,r,o){return new WD(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,at.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Me.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function L0(n,e,t,r,o,u){return(0,b.z)(d=>function iA(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new Uo(n,e,t,r,o,d,m,u).recognize().pipe(Bn(w=>null===w?function P0(n){return new Nr.y(e=>e.error(n))}(new rA):ot(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,at.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Me.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Y,N)}this.browserUrlTree=N.urlAfterRedirects}const $=new my(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next($)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:Y,source:oe,restoredState:Oe,extras:Pe}=m,St=new td($,this.serializeUrl(Y),oe,Oe);r.next(St);const Pt=ju(Y,this.rootComponentType).snapshot;return ot(o={...m,targetSnapshot:Pt,urlAfterRedirects:Y,extras:{...Pe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Qi.E}),(0,Me.b)(m=>{const w=new rd(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,at.U)(m=>o={...m,guards:hg(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function LD(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ot({...t,guardsResult:!0}):function VD(n,e,t,r){return(0,cn.D)(n).pipe((0,b.z)(o=>function $D(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ot(u.map(m=>{const w=Fa(e)??o,C=Hu(m,w);return Oi(function Wh(n){return n&&Gu(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(ee())})).pipe(pd()):ot(!0)}(o.component,o.route,t,e,r)),ee(o=>!0!==o,!0))}(d,r,o,n).pipe((0,b.z)(m=>m&&function S0(n){return"boolean"==typeof n}(m)?function Dy(n,e,t,r){return(0,cn.D)(e).pipe(Ee(o=>bs(function BD(n,e){return null!==n&&e&&e(new og(n)),ot(!0)}(o.route.parent,r),function UD(n,e){return null!==n&&e&&e(new id(n)),ot(!0)}(o.route,r),function A0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function wy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>_i(()=>ot(d.guards.map(w=>{const C=Fa(d.node)??t,A=Hu(w,C);return Oi(function Ey(n){return n&&Gu(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(ee())})).pipe(pd())));return ot(u).pipe(pd())}(n,o.path,t),function jD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ot(!0);const o=r.map(u=>_i(()=>{const d=Fa(e)??t,m=Hu(u,d);return Oi(function PD(n){return n&&Gu(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(ee())}));return ot(o).pipe(pd())}(n,o.route,t))),ee(o=>!0!==o,!0))}(r,u,n,e):ot(m)),(0,at.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Me.b)(m=>{if(o.guardsResult=m.guardsResult,ko(m.guardsResult))throw Lo(0,m.guardsResult);const w=new b0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),D(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Ry(m=>{if(m.guards.canActivateChecks.length)return ot(m).pipe((0,Me.b)(w=>{const C=new Bu(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Bn(w=>{let C=!1;return ot(w).pipe(function sA(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ot(t);let u=0;return(0,cn.D)(o).pipe(Ee(d=>function yd(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Ig(o)&&(u[Ni]=o.title),function My(n,e,t,r){const o=function V0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return ot({});const u={};return(0,cn.D)(o).pipe((0,b.z)(d=>function QD(n,e,t,r){const o=Fa(e)??r,u=Hu(n,o);return Oi(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ee(),(0,Me.b)(m=>{u[d]=m}))),dt(1),function No(n){return(0,at.U)(()=>n)}(u),tt(d=>fg(d)?Qi.E:qr(d)))}(u,n,e,r).pipe((0,at.U)(d=>(n._resolvedData=d,n.data=zc(n,t).resolve,o&&Ig(o)&&(n.data[Ni]=o.title),null)))}(d.route,r,n,e)),(0,Me.b)(()=>u++),dt(1),(0,b.z)(d=>u===o.length?ot(t):Qi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Me.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,Me.b)(w=>{const C=new jh(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),Ry(m=>{const w=C=>{const A=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,Me.b)(N=>{C.component=N}),(0,at.U)(()=>{})));for(const N of C.children)A.push(...w(N));return A};return Mo(w(m.targetSnapshot.root)).pipe(x(),yn(1))}),Ry(()=>this.afterPreactivation()),(0,at.U)(m=>{const w=function or(n,e,t){const r=Pa(n,e._root,t?t._root:void 0);return new ug(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,Me.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new Zc(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Me.b)({next(){u=!0},complete(){u=!0}}),As(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),tt(m=>{if(d=!0,lg(m)){cd(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new nd(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),cd(m)){const C=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ky(o.source)};this.scheduleNavigation(C,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new rg(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Qi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(ht),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),C0(C,this.currentUrlTree,t,N,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ko(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function W0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...eC}:!1===r?{...aA}:r,ko(t))return ly(this.currentUrlTree,t,o);const u=this.parseUrl(t);return ly(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Oa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,C;d?(m=d.resolve,w=d.reject,C=d.promise):C=new Promise(($,Y)=>{m=$,w=Y});const A=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:A,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch($=>Promise.reject($))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new nd(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:function(){return q0()},providedIn:"root"}),n})();function ky(n){return"imperative"!==n}let vd=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ei.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(pr),p.Y36(Fo),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})(),Qh=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ei.x,this.subscription=t.events.subscribe(u=>{u instanceof Oa&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(pr),p.Y36(Fo),p.Y36(ge))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})(),Jh=(()=>{class n{constructor(t,r,o,u,d,m){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=d,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=t.events.subscribe(w=>{w instanceof Oa&&this.update()})}ngAfterContentInit(){ot(this.links.changes,this.linksWithHrefs.changes,ot(null)).pipe((0,Fu.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,cn.D)(t).pipe((0,Fu.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Cg(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(pr),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(vd,8),p.Y36(Qh,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(p.Suo(o,vd,5),p.Suo(o,Qh,5)),2&t){let u;p.iGM(u=p.CRH())&&(r.links=u),p.iGM(u=p.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[p.TTD]}),n})();class Fy{}let Ly=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(D(t=>t instanceof Oa),Ee(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,cn.D)(o).pipe((0,Fu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ot(null);const u=o.pipe((0,b.z)(d=>null===d?ot(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,cn.D)([u,d]).pipe((0,Fu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pr),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(Fy),p.LFG(Py))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kc=new p.OlP("");let K0=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof td?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Oa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Hc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Yc(n,e){return{\u0275kind:n,\u0275providers:e}}function ef(n){return[{provide:Oy,multi:!0,useValue:n}]}function rC(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(pr),o=n.get(Vy);1===n.get(Uy)&&r.initialNavigation(),n.get(Rs,null,p.XFs.Optional)?.setUpPreloading(),n.get(Kc,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const Vy=new p.OlP("",{factory:()=>new ei.x}),Uy=new p.OlP("",{providedIn:"root",factory:()=>1});const Rs=new p.OlP("");function oC(n){return Yc(0,[{provide:Rs,useExisting:Ly},{provide:Fy,useExisting:n}])}const J0=new p.OlP("ROUTER_FORROOT_GUARD"),uC=[Se,{provide:kh,useClass:Kl},{provide:pr,useFactory:q0},dd,{provide:Fo,useFactory:function Y0(n){return n.routerState.root},deps:[pr]},Py];function X0(){return new p.PXZ("Router",pr)}let ew=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[uC,[],ef(t),{provide:J0,useFactory:tw,deps:[[pr,new p.FiY,new p.tp0]]},{provide:Yh,useValue:r||{}},r?.useHash?{provide:ge,useClass:it}:{provide:ge,useClass:Ye},{provide:Kc,useFactory:()=>{const n=(0,p.f3M)(pr),e=(0,p.f3M)(au),t=(0,p.f3M)(Yh);return t.scrollOffset&&e.setOffset(t.scrollOffset),new K0(n,e,t)}},r?.preloadingStrategy?oC(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:X0},r?.initialNavigation?nw(r):[],[{provide:By,useFactory:rC},{provide:p.tb,multi:!0,useExisting:By}]]}}static forChild(t){return{ngModule:n,providers:[ef(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(J0,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[h]}),n})();function tw(n){return"guarded"}function nw(n){return["disabled"===n.initialNavigation?Yc(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(pr);return()=>{e.setUpLocationChangeListener()}}},{provide:Uy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Yc(2,[{provide:Uy,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(pr),m=e.get(Vy);(function o(u){e.get(pr).events.pipe(D(m=>m instanceof Oa||m instanceof nd||m instanceof rg),(0,at.U)(m=>m instanceof Oa||m instanceof nd&&(0===m.code||1===m.code)&&null),D(m=>null!==m),yn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?ot(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const By=new p.OlP("");let iw=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),qu=(()=>{class n extends iw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const jo=new p.OlP("NgValueAccessor"),sw={provide:jo,useExisting:(0,p.Gpc)(()=>tf),multi:!0},Qc=new p.OlP("CompositionEventMode");let tf=(()=>{class n extends iw{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ow(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Qc,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([sw]),p.qOj]}),n})();const Ei=new p.OlP("NgValidators"),Jc=new p.OlP("NgAsyncValidators");function uw(n){return function $o(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function rf(n){return null}function dw(n){return null!=n}function hw(n){return(0,p.QGY)(n)?(0,cn.D)(n):n}function fw(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function pw(n,e){return e.map(t=>t(n))}function Gy(n){return n.map(e=>function gC(n){return!n.validate}(e)?e:t=>e.validate(t))}function Tg(n){return null!=n?function gw(n){if(!n)return null;const e=n.filter(dw);return 0==e.length?null:function(t){return fw(pw(t,e))}}(Gy(n)):null}function sf(n){return null!=n?function zy(n){if(!n)return null;const e=n.filter(dw);return 0==e.length?null:function(t){return function rw(...n){const e=(0,yi.jO)(n),{args:t,keys:r}=Da(n),o=new Nr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let A=0;A<d;A++){let N=!1;(0,Ts.Xf)(t[A]).subscribe((0,Yn.x)(u,$=>{N||(N=!0,C--),m[A]=$},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?xo(r,m):m),u.complete())}))}});return e?o.pipe(ba(e)):o}(pw(t,e).map(hw)).pipe((0,at.U)(fw))}}(Gy(n)):null}function mC(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Sg(n){return n._rawValidators}function mw(n){return n._rawAsyncValidators}function yw(n){return n?Array.isArray(n)?n:[n]:[]}function Ua(n,e){return Array.isArray(n)?n.includes(e):n===e}function qy(n,e){const t=yw(e);return yw(n).forEach(o=>{Ua(t,o)||t.push(o)}),t}function Wy(n,e){return yw(e).filter(t=>!Ua(n,t))}class af{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Tg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class xn extends af{get formDirective(){return null}get path(){return null}}class Ba extends af{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let uf=(()=>{class n extends vw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ba,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[p.qOj]}),n})(),Ag=(()=>{class n extends vw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xn,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[p.qOj]}),n})();const _d="VALID",lf="INVALID",wd="PENDING",el="DISABLED";function Aw(n){return(Yy(n)?n.validators:n)||null}function _C(n){return Array.isArray(n)?Tg(n):n||null}function xw(n,e){return(Yy(e)?e.asyncValidators:n)||null}function wC(n){return Array.isArray(n)?sf(n):n||null}function Yy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function IC(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")}function EC(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new p.vHH(1002,"")})}class Qy{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_C(this._rawValidators),this._composedAsyncValidatorFn=wC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_d}get invalid(){return this.status===lf}get pending(){return this.status==wd}get disabled(){return this.status===el}get enabled(){return this.status!==el}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_C(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=wC(e)}addValidators(e){this.setValidators(qy(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qy(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wy(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wy(e,this._rawAsyncValidators))}hasValidator(e){return Ua(this._rawValidators,e)}hasAsyncValidator(e){return Ua(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=el,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_d,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_d||this.status===wd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?el:_d}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wd,this._hasOwnPendingAsyncValidator=!0;const t=hw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?el:this.errors?lf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wd)?wd:this._anyControlsHaveStatus(lf)?lf:_d}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Mg extends Qy{constructor(e,t,r){super(Aw(t),xw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){EC(this,0,e),Object.keys(e).forEach(r=>{IC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Rg extends Mg{}function nl(n,e){Ho(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function CC(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Jy(n,e)})}(n,e),function TC(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function bC(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Jy(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function DC(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hf(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ff(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Id(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ho(n,e){const t=Sg(n);null!==e.validator?n.setValidators(mC(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=mw(n);null!==e.asyncValidator?n.setAsyncValidators(mC(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Id(e._rawValidators,o),Id(e._rawAsyncValidators,o)}function ff(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Sg(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=mw(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Id(e._rawValidators,r),Id(e._rawAsyncValidators,r),t}function Jy(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Pw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function rv(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const yf=class extends Qy{constructor(e=null,t,r){super(Aw(t),xw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=rv(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){rv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let iv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Bw={provide:jo,useExisting:(0,p.Gpc)(()=>Pg),multi:!0};let Pg=(()=>{class n extends qu{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[p._Bn([Bw]),p.qOj]}),n})(),$w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const vf=new p.OlP("NgModelWithFormControlWarning"),_A={provide:xn,useExisting:(0,p.Gpc)(()=>Dd)};let Dd=(()=>{class n extends xn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ff(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return nl(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){hf(t.control||null,t,!1),function tv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function ev(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(hf(r||null,t),(n=>n instanceof yf)(o)&&(nl(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Mw(n,e){Ho(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Ng(n,e){return ff(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ho(this.form,this),this._oldForm&&ff(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ei,10),p.Y36(Jc,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([_A]),p.qOj,p.TTD]}),n})();const kC={provide:Ba,useExisting:(0,p.Gpc)(()=>il)};let il=(()=>{class n extends Ba{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function gf(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===tf?t=u:function Nw(n){return Object.getPrototypeOf(n.constructor)===qu}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Ed(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function df(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(xn,13),p.Y36(Ei,10),p.Y36(Jc,10),p.Y36(jo,10),p.Y36(vf,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([kC]),p.qOj,p.TTD]}),n})();const av={provide:jo,useExisting:(0,p.Gpc)(()=>sl),multi:!0};function wf(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let sl=(()=>{class n extends qu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=wf(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function wA(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([av]),p.qOj]}),n})(),qw=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(wf(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(sl,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Ww={provide:jo,useExisting:(0,p.Gpc)(()=>If),multi:!0};function uv(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let If=(()=>{class n extends qu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(o.indexOf(d.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let m=0;m<d.length;m++){const C=this._getOptionValue(d[m].value);o.push(C)}}else{const d=r.options;for(let m=0;m<d.length;m++){const w=d[m];if(w.selected){const C=this._getOptionValue(w.value);o.push(C)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Zw(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Ww]),p.qOj]}),n})(),ao=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(uv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(uv(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(If,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),uo=(()=>{class n{constructor(){this._validator=rf}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const VC={provide:Ei,useExisting:(0,p.Gpc)(()=>bf),multi:!0};let bf=(()=>{class n extends uo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=t=>uw}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([VC]),p.qOj]}),n})(),eI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[$w]}),n})(),GC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[eI]}),n})(),tI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[eI]}),n})();class nI extends Qy{constructor(e,t,r){super(Aw(t),xw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){EC(this,0,e),e.forEach((r,o)=>{IC(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function zC(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let bd=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let u={};return zC(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Mg(o,u)}record(t,r=null){const o=this._reduceControls(t);return new Rg(o,r)}control(t,r,o){let u={};return this.useNonNullable?(zC(r)?u=r:(u.validators=r,u.asyncValidators=o),new yf(t,{...u,nonNullable:!0})):new yf(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new nI(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof yf||t instanceof Qy?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:tI}),n})();var qC=k(4986),Cn=k(5813);function ol(){return(0,vr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Yn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function al(n,e){return n===e}var nt,Fi=k(2011),hv=(k(1277),k(3942)),me=k(5861),Os=k(9681),ja=k(4859),es=k(1877),Wt=k(2090),Td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Li={},Zu=Zu||{},At=Td||self;function Tf(){}function Sf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Sd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fg="closure_uid_"+(1e9*Math.random()>>>0),sI=0;function oI(n,e,t){return n.call.apply(n.bind,arguments)}function aI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function oi(n,e,t){return(oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oI:aI).apply(null,arguments)}function Lg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function kr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Ku(){this.s=this.s,this.o=this.o}Ku.prototype.s=!1,Ku.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function iI(n){Object.prototype.hasOwnProperty.call(n,Fg)&&n[Fg]||(n[Fg]=++sI)}(this)},Ku.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Af(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Sf(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function wr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}wr.prototype.h=function(){this.defaultPrevented=!0};var Ug=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",Tf,e),At.removeEventListener("test",Tf,e)}catch{}return n}();function Ad(n){return/^[\s\xa0]*$/.test(n)}var cI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xf(n,e){return n<e?-1:n>e?1:0}function xd(){var n=At.navigator;return n&&(n=n.userAgent)?n:""}function lo(n){return-1!=xd().indexOf(n)}function Bg(n){return Bg[" "](n),n}Bg[" "]=Tf;var Mf,n,lI=lo("Opera"),ul=lo("Trident")||lo("MSIE"),jg=lo("Edge"),$g=jg||ul,dI=lo("Gecko")&&!(-1!=xd().toLowerCase().indexOf("webkit")&&!lo("Edge"))&&!(lo("Trident")||lo("MSIE"))&&!lo("Edge"),hI=-1!=xd().toLowerCase().indexOf("webkit")&&!lo("Edge");function pv(){var n=At.document;return n?n.documentMode:void 0}e:{var Hg="",gv=(n=xd(),dI?/rv:([^\);]+)(\)|;)/.exec(n):jg?/Edge\/([\d\.]+)/.exec(n):ul?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):hI?/WebKit\/(\S+)/.exec(n):lI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(gv&&(Hg=gv?gv[1]:""),ul){var mv=pv();if(null!=mv&&mv>parseFloat(Hg)){Mf=String(mv);break e}}Mf=Hg}var ZC={};var pI=At.document&&ul&&(pv()||parseInt(Mf,10))||void 0;function Rd(n,e){if(wr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(dI){e:{try{Bg(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Rd.X.h.call(this)}}kr(Rd,wr);var gI={2:"touch",3:"pen",4:"mouse"};Rd.prototype.h=function(){Rd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Nd="closure_listenable_"+(1e6*Math.random()|0),mI=0;function yI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++mI,this.ba=this.ea=!1}function Rf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function vI(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function _I(n){const e={};for(const t in n)e[t]=n[t];return e}const wI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vv(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<wI.length;u++)t=wI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gg(n){this.src=n,this.g={},this.h=0}function ar(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Vg(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Rf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zg(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Gg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=zg(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new yI(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var _v="closure_lm_"+(1e6*Math.random()|0),wv={};function Iv(n,e,t,r,o){if(r&&r.once)return Ev(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Iv(n,e[u],t,r,o);return null}return t=bI(t),n&&n[Nd]?n.N(e,t,Sd(r)?!!r.capture:!!r,o):II(n,e,t,!1,r,o)}function II(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Sd(o)?!!o.capture:!!o,m=Cv(n);if(m||(n[_v]=m=new Gg(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function EI(){const e=CI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ug||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(DI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ev(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ev(n,e[u],t,r,o);return null}return t=bI(t),n&&n[Nd]?n.O(e,t,Sd(r)?!!r.capture:!!r,o):II(n,e,t,!0,r,o)}function cl(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)cl(n,e[u],t,r,o);else r=Sd(r)?!!r.capture:!!r,t=bI(t),n&&n[Nd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zg(u=n.g[e],t,r,o))&&(Rf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Cv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zg(e,t,r,o)),(t=-1<n?e[n]:null)&&Dv(t))}function Dv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Nd])ar(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(DI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Cv(e))?(ar(t,n),0==t.h&&(t.src=null,e[_v]=null)):Rf(n)}}}function DI(n){return n in wv?wv[n]:wv[n]="on"+n}function CI(n,e){if(n.ba)n=!0;else{e=new Rd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Dv(n),n=t.call(r,e)}return n}function Cv(n){return(n=n[_v])instanceof Gg?n:null}var qg="__closure_events_fn_"+(1e9*Math.random()>>>0);function bI(n){return"function"==typeof n?n:(n[qg]||(n[qg]=function(e){return n.handleEvent(e)}),n[qg])}function Ir(){Ku.call(this),this.i=new Gg(this),this.P=this,this.I=null}function Er(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wr(e,n);else if(e instanceof wr)e.target=e.target||n;else{var o=e;vv(e=new wr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=ts(d,r,!0,e)&&o}if(o=ts(d=e.g=n,r,!0,e)&&o,o=ts(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=ts(d=e.g=t[u],r,!1,e)&&o}function ts(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&ar(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}kr(Ir,Ku),Ir.prototype[Nd]=!0,Ir.prototype.removeEventListener=function(n,e,t,r){cl(this,n,e,t,r)},Ir.prototype.M=function(){if(Ir.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Rf(t[r]);delete n.g[e],n.h--}}this.I=null},Ir.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ir.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var bv=At.JSON.stringify;function KC(){var n=SI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Sv,Ps=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ho,n=>n.reset());class ho{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function TI(n){At.setTimeout(()=>{throw n},0)}function Tv(n,e){Sv||function YC(){var n=At.Promise.resolve(void 0);Sv=function(){n.then(xv)}}(),Av||(Sv(),Av=!0),SI.add(n,e)}var Av=!1,SI=new class Go{constructor(){this.h=this.g=null}add(e,t){const r=Ps.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function xv(){for(var n;n=KC();){try{n.h.call(n.g)}catch(t){TI(t)}var e=Ps;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Av=!1}function Yu(n,e){Ir.call(this),this.h=n||1,this.g=e||At,this.j=oi(this.lb,this),this.l=Date.now()}function Mv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Wg(n,e,t){if("function"==typeof n)t&&(n=oi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=oi(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function AI(n){n.g=Wg(()=>{n.g=null,n.i&&(n.i=!1,AI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}kr(Yu,Ir),(nt=Yu.prototype).ca=!1,nt.R=null,nt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Er(this,"tick"),this.ca&&(Mv(this),this.start()))}},nt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){Yu.X.M.call(this),Mv(this),delete this.g};class xI extends Ku{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AI(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Od(n){Ku.call(this),this.h=n,this.g={}}kr(Od,Ku);var Nf=[];function MI(n,e,t,r){Array.isArray(t)||(t&&(Nf[0]=t.toString()),t=Nf);for(var o=0;o<t.length;o++){var u=Iv(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Rv(n){vI(n.g,function(e,t){this.g.hasOwnProperty(t)&&Dv(e)},n),n.g={}}function Of(){this.g=!0}function ll(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function NI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return bv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Od.prototype.M=function(){Od.X.M.call(this),Rv(this)},Od.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Of.prototype.Aa=function(){this.g=!1},Of.prototype.info=function(){};var Qu={},Pv=null;function Pf(){return Pv=Pv||new Ir}function kv(n){wr.call(this,Qu.Pa,n)}function Pd(n){const e=Pf();Er(e,new kv(e))}function OI(n,e){wr.call(this,Qu.STAT_EVENT,n),this.stat=e}function Di(n){const e=Pf();Er(e,new OI(e,n))}function PI(n,e){wr.call(this,Qu.Qa,n),this.size=e}function kf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Qu.Pa="serverreachability",kr(kv,wr),Qu.STAT_EVENT="statevent",kr(OI,wr),Qu.Qa="timingevent",kr(PI,wr);var Zg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},kI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Fv(){}function LI(){}Fv.prototype.h=null;var Uv,Ff={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Lv(){wr.call(this,"d")}function Vv(){wr.call(this,"c")}function Kg(){}function Lf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Od(this),this.O=QC,this.T=new Yu(n=$g?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new VI}function VI(){this.i=null,this.g="",this.h=!1}kr(Lv,wr),kr(Vv,wr),kr(Kg,Fv),Kg.prototype.g=function(){return new XMLHttpRequest},Kg.prototype.i=function(){return{}},Uv=new Kg;var QC=45e3,Bv={},Vf={};function Yg(n,e,t){n.K=1,n.v=Qg(zo(e)),n.s=t,n.P=!0,jv(n,null)}function jv(n,e){n.F=Date.now(),kd(n),n.A=zo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Kv(t.i,"t",r),n.C=0,t=n.l.H,n.h=new VI,n.g=nE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new xI(oi(n.La,n,n.g),n.N)),MI(n.S,n.g,"readystatechange",n.ib),e=n.H?_I(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Pd(),function Nv(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var N=A.split("_");d=2<=N.length&&"type"==N[1]?d+(A+"=")+C+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function $v(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Hv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=UI(n,t),o==Vf){4==e&&(n.o=4,Di(14),r=!1),ll(n.j,n.m,null,"[Incomplete Response]");break}if(o==Bv){n.o=4,Di(15),ll(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ll(n.j,n.m,o,null),$a(n,o)}$v(n)&&o!=Vf&&o!=Bv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),sm(e),e.K=!0,Di(11))):(ll(n.j,n.m,t,"[Invalid Chunked Response]"),Ju(n),Fd(n))}function UI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Vf:(t=Number(e.substring(t,r)),isNaN(t)?Bv:(r+=1)+t>e.length?Vf:(e=e.substr(r,t),n.C=r+t,e))}function kd(n){n.V=Date.now()+n.O,Gv(n,n.O)}function Gv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kf(oi(n.gb,n),e)}function Uf(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function Fd(n){0==n.l.G||n.I||XI(n.l,n)}function Ju(n){Uf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Mv(n.T),Rv(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function $a(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Yv(t.h,n)))if(!n.J&&Yv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Hd(t),Yf(t)}i_(t),Di(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=kf(oi(t.cb,t),6e3));if(1>=HI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ec(t,11)}else if((n.J||t.g==n)&&Hd(t),!Ad(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=C[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const oe=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.h;u.g||-1==oe.indexOf("spdy")&&-1==oe.indexOf("quic")&&-1==oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Ud(u,u.h),u.h=null))}if(r.D){const Oe=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.za=Oe,Pn(r.F,r.D,Oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=tE(r,r.H?r.ka:null,r.V),d.J){Qv(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(Uf(m),kd(m)),r.g=d}else r_(r);0<t.i.length&&im(t)}else"stop"!=C[0]&&"close"!=C[0]||ec(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ec(t,7):n_(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}Pd()}catch{}}function dl(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Sf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function XC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Sf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function JC(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Sf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(nt=Lf.prototype).setTimeout=function(n){this.O=n},nt.ib=function(n){n=n.target;const e=this.L;e&&3==Wo(n)?e.l():this.La(n)},nt.La=function(n){try{if(n==this.g)e:{const A=Wo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||$g||this.g&&(this.h.h||this.g.fa()||jd(this.g)))){this.I||4!=A||7==e||Pd(),Uf(this);var t=this.g.aa();this.Y=t;t:if($v(this)){var r=jd(this.g);n="";var o=r.length,u=4==Wo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ju(this),Fd(this);var d="";break t}this.h.i=new At.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function Ov(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ad(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Di(12),Ju(this),Fd(this);break e}ll(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$a(this,t)}this.P?(Hv(this,A,d),$g&&this.i&&3==A&&(MI(this.S,this.T,"tick",this.hb),this.T.start())):(ll(this.j,this.m,d,null),$a(this,d)),4==A&&Ju(this),this.i&&!this.I&&(4==A?XI(this.l,this):(this.i=!1,kd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Di(12)):(this.o=0,Di(13)),Ju(this),Fd(this)}}}catch{}},nt.hb=function(){if(this.g){var n=Wo(this.g),e=this.g.fa();this.C<e.length&&(Uf(this),Hv(this,n,e),this.i&&4!=n&&kd(this))}},nt.cancel=function(){this.I=!0,Ju(this)},nt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function RI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Pd(),Di(17)),Ju(this),this.o=2,Fd(this)):Gv(this,this.V-n)};var eb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ld(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ld){this.h=void 0!==e?e:n.h,Bf(this,n.j),this.s=n.s,this.g=n.g,qv(this,n.m),this.l=n.l,e=n.i;var t=new Vd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),vt(this,t),this.o=n.o}else n&&(t=String(n).match(eb))?(this.h=!!e,Bf(this,t[1]||"",!0),this.s=jf(t[2]||""),this.g=jf(t[3]||"",!0),qv(this,t[4]),this.l=jf(t[5]||"",!0),vt(this,t[6]||"",!0),this.o=jf(t[7]||"")):(this.h=!!e,this.i=new Vd(null,this.h))}function zo(n){return new Ld(n)}function Bf(n,e,t){n.j=t?jf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function qv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function vt(n,e,t){e instanceof Vd?(n.i=e,function nb(n,e){e&&!n.j&&(Xu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Wv(this,r),Kv(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=qo(e,bA)),n.i=new Vd(e,n.h))}function Pn(n,e,t){n.i.set(e,t)}function Qg(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qo(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ld.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qo(e,$f,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qo(e,$f,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(qo(t,"/"==t.charAt(0)?Jn:Jg,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qo(t,BI)),n.join("")};var $f=/[#\/\?@]/g,Jg=/[#\?:]/g,Jn=/[#\?]/g,bA=/[#\?@]/g,BI=/#/g;function Vd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xu(n){n.g||(n.g=new Map,n.h=0,n.i&&function zv(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Wv(n,e){Xu(n),e=hl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Zv(n,e){return Xu(n),e=hl(n,e),n.g.has(e)}function Kv(n,e,t){Wv(n,e),0<t.length&&(n.i=null,n.g.set(hl(n,e),Af(t)),n.h+=t.length)}function hl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function jI(n){this.l=n||Hf,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ga&&At.g.Ga()&&At.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Vd.prototype).add=function(n,e){Xu(this),this.i=null,n=hl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){Xu(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},nt.oa=function(){Xu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},nt.W=function(n){Xu(this);let e=[];if("string"==typeof n)Zv(this,n)&&(e=e.concat(this.g.get(hl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return Xu(this),this.i=null,Zv(this,n=hl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var Hf=10;function $I(n){return!!n.h||!!n.g&&n.g.size>=n.j}function HI(n){return n.h?1:n.g?n.g.size:0}function Yv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ud(n,e){n.g?n.g.add(e):n.h=e}function Qv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Jv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Af(n.i)}function Xg(){}function ib(){this.g=new Xg}function Gf(n,e,t){const r=t||"";try{dl(n,function(o,u){let d=o;Sd(o)&&(d=bv(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function em(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function qf(n){this.l=n.ac||null,this.j=n.jb||!1}function tm(n,e){Ir.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jI.prototype.cancel=function(){if(this.i=Jv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Xg.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},Xg.prototype.parse=function(n){return At.JSON.parse(n,void 0)},kr(qf,Fv),qf.prototype.g=function(){return new tm(this.l,this.j)},qf.prototype.i=function(n){return function(){return n}}({}),kr(tm,Ir);var nm=0;function Xv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Bd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Wf(n)}function Wf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=tm.prototype).open=function(n,e){if(this.readyState!=nm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Wf(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bd(this)),this.readyState=nm},nt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Wf(this)),this.g&&(this.readyState=3,Wf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof At.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},nt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bd(this):Wf(this),3==this.readyState&&Xv(this)}},nt.Va=function(n){this.g&&(this.response=this.responseText=n,Bd(this))},nt.Ua=function(n){this.g&&(this.response=n,Bd(this))},nt.ga=function(){this.g&&Bd(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(tm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GI=At.JSON.parse;function Xn(n){Ir.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zI,this.K=this.L=!1}kr(Xn,Ir);var zI="",TA=/^https?$/i,SA=["POST","PUT"];function sb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,e_(n),rm(n)}function e_(n){n.D||(n.D=!0,Er(n,"complete"),Er(n,"error"))}function Zf(n){if(n.h&&typeof Zu<"u"&&(!n.C[1]||4!=Wo(n)||2!=n.aa()))if(n.v&&4==Wo(n))Wg(n.Ha,0,n);else if(Er(n,"readystatechange"),4==Wo(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(eb)[1]||null;if(!o&&At.self&&At.self.location){var u=At.self.location.protocol;o=u.substr(0,u.length-1)}r=!TA.test(o?o.toLowerCase():"")}t=r}if(t)Er(n,"complete"),Er(n,"success");else{n.m=6;try{var d=2<Wo(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",e_(n)}}finally{rm(n)}}}function rm(n,e){if(n.g){qI(n);const t=n.g,r=n.C[0]?Tf:null;n.g=null,n.C=null,e||Er(n,"ready");try{t.onreadystatechange=r}catch{}}}function qI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function Wo(n){return n.g?n.g.readyState:0}function jd(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function WI(n){let e="";return vI(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function t_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=WI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function Kf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ZI(n){this.Ca=0,this.i=[],this.j=new Of,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Kf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Kf("baseRetryDelayMs",5e3,n),this.bb=Kf("retryDelaySeedMs",1e4,n),this.$a=Kf("forwardChannelMaxRetries",2,n),this.ta=Kf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new jI(n&&n.concurrentRequestLimit),this.Fa=new ib,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function n_(n){if(KI(n),3==n.G){var e=n.U++,t=zo(n.F);Pn(t,"SID",n.I),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),$d(n,t),(e=new Lf(n,n.j,e,void 0)).K=2,e.v=Qg(zo(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=nE(e.l,null),e.g.da(e.v)),e.F=Date.now(),kd(e)}eE(n)}function Yf(n){n.g&&(sm(n),n.g.cancel(),n.g=null)}function KI(n){Yf(n),n.u&&(At.clearTimeout(n.u),n.u=null),Hd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function im(n){$I(n.h)||n.m||(n.m=!0,Tv(n.Ja,n),n.C=0)}function YI(n,e){var t;t=e?e.m:n.U++;const r=zo(n.F);Pn(r,"SID",n.I),Pn(r,"RID",t),Pn(r,"AID",n.T),$d(n,r),n.o&&n.s&&t_(r,n.o,n.s),t=new Lf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=QI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ud(n.h,t),Yg(t,r,e)}function $d(n,e){n.ia&&vI(n.ia,function(t,r){Pn(e,r,t)}),n.l&&dl({},function(t,r){Pn(e,r,t)})}function QI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?oi(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const A=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{Gf(A,d,"req"+C+"_")}catch{r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function r_(n){n.g||n.u||(n.Z=1,Tv(n.Ia,n),n.A=0)}function i_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=kf(oi(n.Ia,n),s_(n,n.A)),n.A++,0))}function sm(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function JI(n){n.g=new Lf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=zo(n.sa);Pn(e,"RID","rpc"),Pn(e,"SID",n.I),Pn(e,"CI",n.L?"0":"1"),Pn(e,"AID",n.T),Pn(e,"TYPE","xmlhttp"),$d(n,e),n.o&&n.s&&t_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Qg(zo(e)),t.s=null,t.P=!0,jv(t,n)}function Hd(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function XI(n,e){var t=null;if(n.g==e){Hd(n),sm(n),n.g=null;var r=2}else{if(!Yv(n.h,e))return;t=e.D,Qv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Er(r=Pf(),new PI(r,t)),im(n)}else r_(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function Qf(n,e){return!(HI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=kf(oi(n.Ja,n,e),s_(n,n.C)),n.C++,0)))}(n,e)||2==r&&i_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:ec(n,5);break;case 4:ec(n,10);break;case 3:ec(n,6);break;default:ec(n,2)}}function s_(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ec(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=oi(n.kb,n);t||(t=new Ld("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||Bf(t,"https"),Qg(t)),function zf(n,e){const t=new Of;if(At.Image){const r=new Image;r.onload=Lg(em,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Lg(em,t,r,"TestLoadImage: error",!1,e),r.onabort=Lg(em,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lg(em,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Di(2);n.G=0,n.l&&n.l.va(e),eE(n),KI(n)}function eE(n){if(n.G=0,n.la=[],n.l){const e=Jv(n.h);(0!=e.length||0!=n.i.length)&&(uI(n.la,e),uI(n.la,n.i),n.h.i.length=0,Af(n.i),n.i.length=0),n.l.ua()}}function tE(n,e,t){var r=t instanceof Ld?zo(t):new Ld(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),qv(r,r.m);else{var o=At.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Ld(null,void 0);r&&Bf(u,r),e&&(u.g=e),o&&qv(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Pn(r,t,e),Pn(r,"VER",n.ma),$d(n,r),r}function nE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(t&&n.Da&&!n.ra?new qf({jb:!0}):n.ra)).Ka(n.H),e}function om(){}function am(){if(ul&&!(10<=Number(pI)))throw Error("Environmental error: no available transport.")}function Vi(n,e){Ir.call(this),this.g=new ZI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Ad(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ad(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gd(this)}function rE(n){Lv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function iE(){Vv.call(this),this.status=1}function Gd(n){this.g=n}(nt=Xn.prototype).Ka=function(n){this.L=n},nt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uv.g(),this.C=function FI(n){return n.h||(n.h=n.i())}(this.u?this.u:Uv),this.g.onreadystatechange=oi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void sb(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=At.FormData&&n instanceof At.FormData,!(0<=Vg(SA,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qI(this),0<this.B&&((this.K=function AA(n){return ul&&function fI(){return function fv(n){var e=ZC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=cI(String(Mf)).split("."),t=cI("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=xf(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||xf(0==o[2].length,0==u[2].length)||xf(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oi(this.qa,this)):this.A=Wg(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){sb(this,u)}},nt.qa=function(){typeof Zu<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Er(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Er(this,"complete"),Er(this,"abort"),rm(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rm(this,!0)),Xn.X.M.call(this)},nt.Ha=function(){this.s||(this.F||this.v||this.l?Zf(this):this.fb())},nt.fb=function(){Zf(this)},nt.aa=function(){try{return 2<Wo(this)?this.g.status:-1}catch{return-1}},nt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),GI(e)}},nt.Ea=function(){return this.m},nt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=ZI.prototype).ma=8,nt.G=1,nt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Lf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=_I(u),vv(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=QI(this,o,e),Pn(t=zo(this.F),"RID",n),Pn(t,"CVER",22),this.D&&Pn(t,"X-HTTP-Session-Id",this.D),$d(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(WI(u)))+"&"+e:this.o&&t_(t,this.o,u)),Ud(this.h,o),this.Ya&&Pn(t,"TYPE","init"),this.O?(Pn(t,"$req",e),Pn(t,"SID","null"),o.Z=!0,Yg(o,t,null)):Yg(o,t,e),this.G=2}}else 3==this.G&&(n?YI(this,n):0==this.i.length||$I(this.h)||YI(this))},nt.Ia=function(){if(this.u=null,JI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=kf(oi(this.eb,this),n)}},nt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Di(10),Yf(this),JI(this))},nt.cb=function(){null!=this.v&&(this.v=null,Yf(this),i_(this),Di(19))},nt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Di(2)):(this.j.info("Failed to ping google.com"),Di(1))},(nt=om.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Ra=function(){},am.prototype.g=function(n,e){return new Vi(n,e)},kr(Vi,Ir),Vi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Di(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=tE(n,null,n.V),im(n)},Vi.prototype.close=function(){n_(this.g)},Vi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=bv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&im(e)},Vi.prototype.M=function(){this.g.l=null,delete this.j,n_(this.g),delete this.g,Vi.X.M.call(this)},kr(rE,Lv),kr(iE,Vv),kr(Gd,om),Gd.prototype.xa=function(){Er(this.g,"a")},Gd.prototype.wa=function(n){Er(this.g,new rE(n))},Gd.prototype.va=function(n){Er(this.g,new iE)},Gd.prototype.ua=function(){Er(this.g,"b")},am.prototype.createWebChannel=am.prototype.g,Vi.prototype.send=Vi.prototype.u,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,Zg.NO_ERROR=0,Zg.TIMEOUT=8,Zg.HTTP_ERROR=6,kI.COMPLETE="complete",LI.EventType=Ff,Ff.OPEN="a",Ff.CLOSE="b",Ff.ERROR="c",Ff.MESSAGE="d",Ir.prototype.listen=Ir.prototype.N,Xn.prototype.listenOnce=Xn.prototype.O,Xn.prototype.getLastError=Xn.prototype.Oa,Xn.prototype.getLastErrorCode=Xn.prototype.Ea,Xn.prototype.getStatus=Xn.prototype.aa,Xn.prototype.getResponseJson=Xn.prototype.Sa,Xn.prototype.getResponseText=Xn.prototype.fa,Xn.prototype.send=Xn.prototype.da,Xn.prototype.setWithCredentials=Xn.prototype.Ka;var ob=Li.createWebChannelTransport=function(){return new am},ab=Li.getStatEventTarget=function(){return Pf()},o_=Li.ErrorCode=Zg,ub=Li.EventType=kI,cb=Li.Event=Qu,a_=Li.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},sE=Li.FetchXmlHttpFactory=qf,um=Li.WebChannel=LI,lb=Li.XhrIo=Xn;const u_="@firebase/firestore";class Fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let zd="9.13.0";const tc=new es.Yd("@firebase/firestore");function Jf(){return tc.logLevel}function Re(n,...e){if(tc.logLevel<=es.in.DEBUG){const t=e.map(l_);tc.debug(`Firestore (${zd}): ${n}`,...t)}}function jn(n,...e){if(tc.logLevel<=es.in.ERROR){const t=e.map(l_);tc.error(`Firestore (${zd}): ${n}`,...t)}}function fl(n,...e){if(tc.logLevel<=es.in.WARN){const t=e.map(l_);tc.warn(`Firestore (${zd}): ${n}`,...t)}}function l_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${zd}) INTERNAL ASSERTION FAILED: `+n;throw jn(e),new Error(e)}function Dt(n,e){n||et()}function Ge(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Wt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class d_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fr.UNAUTHENTICATED))}shutdown(){}}class db{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class f_{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new d_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Fr(e)}}class hb{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class aE{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new hb(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uE{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.A=t.token,new cm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class p_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=cE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function qd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function lE(n){return n+"\0"}class kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new kn(0,0))}static max(){return new wt(new kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lm{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===lm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends lm{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const pb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends lm{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return pb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Jt.fromString(e))}static fromName(e){return new qe(Jt.fromString(e).popFirst(5))}static empty(){return new qe(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Jt(e.slice()))}}class g_{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function m_(n){return n.fields.find(e=>2===e.kind)}function pl(n){return n.fields.filter(e=>2!==e.kind)}g_.UNKNOWN_ID=-1;class dm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xf(0,ns.min())}}function dE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=wt.fromTimestamp(1e9===r?new kn(t+1,0):new kn(t,r));return new ns(o,qe.empty(),e)}function hE(n){return new ns(n.readTime,n.key,-1)}class ns{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ns(wt.min(),qe.empty(),-1)}static max(){return new ns(wt.max(),qe.empty(),-1)}}function y_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const fE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ks(n){return hm.apply(this,arguments)}function hm(){return hm=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==fE)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),hm.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(o=>o?ie.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{d[C]=A,++m,m===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new ie((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class ep{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Lr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new tp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=v_(r.target.error);this.P.reject(new tp(e,o))}}static open(e,t,r,o){try{return new ep(t,e.transaction(o,r))}catch(u){throw new tp(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xA(t)}}class Fs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Fs.D((0,Wt.z$)())&&jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),gl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Wt.hl)())return!1;if(Fs.N())return!0;const e=(0,Wt.z$)(),t=Fs.D(e),r=0<t&&t<10,o=Fs.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new tp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new tp(e,m))},u.onupgradeneeded=d=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=ep.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),ie.reject(A))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gE{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return gl(this.U.delete())}}class tp extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nc(n){return"IndexedDbTransactionError"===n.name}class xA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gl(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),gl(this.store.add(e))}get(e){return gl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),gl(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),gl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ie((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new ie((r,o)=>{t.onerror=u=>{const d=v_(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new ie((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new gE(m),C=t(m.primaryKey,m.value,w);if(C instanceof ie){const A=C.catch(N=>(w.done(),ie.reject(N)));r.push(A)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gl(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=v_(r.target.error);t(o)}})}let mE=!1;function v_(n){const e=Fs.D((0,Wt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mE||(mE=!0,setTimeout(()=>{throw r},0)),r}}return n}class yb{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){nc(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ks(r)}yield t.nt(6e4)}))}}class vb{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return ie.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Re("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Re("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=hE(u);y_(d,r)>0&&(r=d)}),new ns(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function yE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ha(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fo(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Vr.at=-1;class tr{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ur.RED,this.left=o??ur.EMPTY,this.right=u??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ur(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ur.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1,ur.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ur(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vE(this.data.getIterator())}getIteratorFrom(e){return new vE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class vE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zd(n){return n.hasNext()?n.getNext():void 0}class ai{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new ai([])}unionWith(e){let t=new vn(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ai(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Dr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const _b=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ga(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=_b.exec(n);if(Dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$n(n.seconds),nanos:$n(n.nanos)}}function $n(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function za(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function pm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _E(n){const e=n.mapValue.fields.__previous_value__;return pm(e)?_E(e):e}function np(n){const e=Ga(n.mapValue.fields.__local_write_time__.timestampValue);return new kn(e.seconds,e.nanos)}class MA{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Zo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}function ml(n){return null==n}function Kd(n){return 0===n&&1/n==-1/0}function gm(n){return"number"==typeof n&&Number.isInteger(n)&&!Kd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mm={nullValue:"NULL_VALUE"};function yl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pm(n)?4:wE(n)?9007199254740991:10:et()}function Yo(n,e){if(n===e)return!0;const t=yl(n);if(t!==yl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return np(n).isEqual(np(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ga(r.timestampValue),d=Ga(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,za(n.bytesValue).isEqual(za(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return $n(r.geoPointValue.latitude)===$n(o.geoPointValue.latitude)&&$n(r.geoPointValue.longitude)===$n(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return $n(r.integerValue)===$n(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=$n(r.doubleValue),d=$n(o.doubleValue);return u===d?Kd(u)===Kd(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return qd(n.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(yE(u)!==yE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Yo(u[m],d[m])))return!1;return!0}(n,e);default:return et()}var o}function rp(n,e){return void 0!==(n.values||[]).find(t=>Yo(t,e))}function qa(n,e){if(n===e)return 0;const t=yl(n),r=yl(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=$n(o.integerValue||o.doubleValue),m=$n(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return ym(n.timestampValue,e.timestampValue);case 4:return ym(np(n),np(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=za(o),m=za(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=Mt(d[w],m[w]);if(0!==C)return C}return Mt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Mt($n(o.latitude),$n(u.latitude));return 0!==d?d:Mt($n(o.longitude),$n(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=qa(d[w],m[w]);if(C)return C}return Mt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Ko.mapValue&&u===Ko.mapValue)return 0;if(o===Ko.mapValue)return 1;if(u===Ko.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const N=Mt(m[A],C[A]);if(0!==N)return N;const $=qa(d[m[A]],w[C[A]]);if(0!==$)return $}return Mt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw et()}}function ym(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Ga(n),r=Ga(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function vl(n){return __(n)}function __(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ga(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?za(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=__(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${__(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function rc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vm(n){return!!n&&"integerValue"in n}function ip(n){return!!n&&"arrayValue"in n}function w_(n){return!!n&&"nullValue"in n}function I_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _m(n){return!!n&&"mapValue"in n}function Yd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ha(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ci(n){return"nullValue"in n?mm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rc(Zo.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function Qd(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rc(Zo.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ko:et()}function IE(n,e){const t=qa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function EE(n,e){const t=qa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_m(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yd(t)}setAll(e){let t=er.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Yd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());_m(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];_m(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ha(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ui(Yd(this.value))}}function wb(n){const e=[];return Ha(n.fields,(t,r)=>{const o=new er([t]);if(_m(r)){const u=wb(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new ai(e)}class En{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new En(e,0,wt.min(),wt.min(),ui.empty(),0)}static newFoundDocument(e,t,r){return new En(e,1,t,wt.min(),r,0)}static newNoDocument(e,t){return new En(e,2,t,wt.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,wt.min(),ui.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class DE{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function Jd(n,e=null,t=[],r=[],o=null,u=null,d=null){return new DE(n,e,t,r,o,u,d)}function _l(n){const e=Ge(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+vl(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ml(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vl(r)).join(",")),e.ht=t}return e.ht}function sp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!ME(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Yo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Eb(n.startAt,e.startAt)&&Eb(n.endAt,e.endAt)}function op(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wm(n,e){return n.filters.filter(t=>t instanceof Cr&&t.field.isEqual(e))}function CE(n,e,t){let r=mm,o=!0;for(const u of wm(n,e)){let d=mm,m=!0;switch(u.op){case"<":case"<=":d=Ci(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=mm}IE({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];IE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function bE(n,e,t){let r=Ko,o=!0;for(const u of wm(n,e)){let d=Ko,m=!0;switch(u.op){case">=":case">":d=Qd(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Ko}EE({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];EE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Cr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new TE(e,t,r):"array-contains"===t?new RA(e,r):"in"===t?new AE(e,r):"not-in"===t?new Ib(e,r):"array-contains-any"===t?new xE(e,r):new Cr(e,t,r)}static lt(e,t,r){return"in"===t?new SE(e,r):new Im(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(qa(t,this.value)):null!==t&&yl(this.value)===yl(t)&&this.ft(qa(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class TE extends Cr{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.ft(t)}}class SE extends Cr{constructor(e,t){super(e,"in",t),this.keys=Em(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Im extends Cr{constructor(e,t){super(e,"not-in",t),this.keys=Em(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Em(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class RA extends Cr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ip(t)&&rp(t.arrayValue,this.value)}}class AE extends Cr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rp(this.value.arrayValue,t)}}class Ib extends Cr{constructor(e,t){super(e,"not-in",t)}matches(e){if(rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rp(this.value.arrayValue,t)}}class xE extends Cr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rp(this.value.arrayValue,r))}}class rs{constructor(e,t){this.position=e,this.inclusive=t}}class Xd{constructor(e,t="asc"){this.field=e,this.dir=t}}function ME(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Dm(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(d.referenceValue),t.key):qa(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Eb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yo(n.position[t],e.position[t]))return!1;return!0}class Wa{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function Db(n,e,t,r,o,u,d,m){return new Wa(n,e,t,r,o,u,d,m)}function eh(n){return new Wa(n)}function RE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function D_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Cm(n){for(const e of n.filters)if(e.dt())return e.field;return null}function bm(n){return null!==n.collectionGroup}function th(n){const e=Ge(n);if(null===e._t){e._t=[];const t=Cm(e),r=D_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Xd(t)),e._t.push(new Xd(er.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Xd(er.keyField(),u))}}}return e._t}function ci(n){const e=Ge(n);if(!e.wt)if("F"===e.limitType)e.wt=Jd(e.path,e.collectionGroup,th(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of th(e))t.push(new Xd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new rs(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new rs(e.startAt.position,e.startAt.inclusive):null;e.wt=Jd(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function ap(n,e,t){return new Wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function up(n,e){return sp(ci(n),ci(e))&&n.limitType===e.limitType}function NE(n){return`${_l(ci(n))}|lt:${n.limitType}`}function Tm(n){return`Query(target=${function E_(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${vl(r.value)}`;var r}).join(", ")}]`),ml(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>vl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>vl(t)).join(",")),`Target(${e})`}(ci(n))}; limitType=${n.limitType})`}function C_(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Dm(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,th(t),r)||t.endAt&&!function(o,u,d){const m=Dm(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,th(t),r)));var t,r}function b_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function T_(n){return(e,t)=>{let r=!1;for(const o of th(n)){const u=OE(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function OE(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?qa(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function S_(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(e)?"-0":e}}function PE(n){return{integerValue:""+n}}function kE(n,e){return gm(e)?PE(e):S_(n,e)}class A_{constructor(){this._=void 0}}function FE(n,e,t){return n instanceof cp?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof nh?bb(n,e):n instanceof rh?Tb(n,e):function(r,o){const u=Cb(r,o),d=dp(u)+dp(r.yt);return vm(u)&&vm(r.yt)?PE(d):S_(r.It,d)}(n,e)}function NA(n,e,t){return n instanceof nh?bb(n,e):n instanceof rh?Tb(n,e):t}function Cb(n,e){return n instanceof lp?vm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class cp extends A_{}class nh extends A_{constructor(e){super(),this.elements=e}}function bb(n,e){const t=Sb(e);for(const r of n.elements)t.some(o=>Yo(o,r))||t.push(r);return{arrayValue:{values:t}}}class rh extends A_{constructor(e){super(),this.elements=e}}function Tb(n,e){let t=Sb(e);for(const r of n.elements)t=t.filter(o=>!Yo(o,r));return{arrayValue:{values:t}}}class lp extends A_{constructor(e,t){super(),this.It=e,this.yt=t}}function dp(n){return $n(n.integerValue||n.doubleValue)}function Sb(n){return ip(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ih{constructor(e,t){this.field=e,this.transform=t}}class LE{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function x_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class sh{}function M_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new fp(n.key,Mn.none()):new ah(n.key,n.data,Mn.none());{const t=n.data,r=ui.empty();let o=new vn(er.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Za(n.key,r,new ai(o.toArray()),Mn.none())}}function Ab(n,e,t){n instanceof ah?function(r,o,u){const d=r.value.clone(),m=VE(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Za?function(r,o,u){if(!x_(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=VE(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(hp(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function oh(n,e,t,r){return n instanceof ah?function(o,u,d,m){if(!x_(o.precondition,u))return d;const w=o.value.clone(),C=Mb(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Za?function(o,u,d,m){if(!x_(o.precondition,u))return d;const w=Mb(o.fieldTransforms,m,u),C=u.data;return C.setAll(hp(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,x_(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function OA(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Cb(r.transform,o||null);null!=u&&(null===t&&(t=ui.empty()),t.set(r.field,u))}return t||null}function xb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&qd(t,r,(o,u)=>function Sm(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof nh&&r instanceof nh||t instanceof rh&&r instanceof rh?qd(t.elements,r.elements,Yo):t instanceof lp&&r instanceof lp?Yo(t.yt,r.yt):t instanceof cp&&r instanceof cp);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ah extends sh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Za extends sh{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function hp(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function VE(n,e,t){const r=new Map;Dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,NA(d,m,t[o]))}return r}function Mb(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,FE(u,d,e))}return r}class fp extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UE extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rb{constructor(e){this.count=e}}var gr,tn;function Nb(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function BE(n){if(void 0===n)return jn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case gr.OK:return ce.OK;case gr.CANCELLED:return ce.CANCELLED;case gr.UNKNOWN:return ce.UNKNOWN;case gr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case gr.INTERNAL:return ce.INTERNAL;case gr.UNAVAILABLE:return ce.UNAVAILABLE;case gr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case gr.NOT_FOUND:return ce.NOT_FOUND;case gr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case gr.ABORTED:return ce.ABORTED;case gr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case gr.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(tn=gr||(gr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class Ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ha(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return fo(this.inner)}size(){return this.innerSize}}const jE=new tr(qe.comparator);function is(){return jE}const Ls=new tr(qe.comparator);function pp(...n){let e=Ls;for(const t of n)e=e.insert(t.key,t);return e}function Am(n){let e=Ls;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qo(){return gp()}function ss(){return gp()}function gp(){return new Ka(n=>n.toString(),(n,e)=>n.isEqual(e))}const R_=new tr(qe.comparator),Ob=new vn(qe.comparator);function Bt(...n){let e=Ob;for(const t of n)e=e.add(t);return e}const N_=new vn(Mt);function mp(){return N_}class uh{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,yp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new uh(wt.min(),o,mp(),is(),Bt())}}class yp{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new yp(r,t,Bt(),Bt(),Bt())}}class vp{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class O_{constructor(e,t){this.targetId=e,this.At=t}}class $E{constructor(e,t,r=Dr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class P_{constructor(){this.Rt=0,this.bt=Ya(),this.Pt=Dr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Bt(),t=Bt(),r=Bt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new yp(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Ya()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Pb{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=is(),this.qt=xm(),this.Kt=new vn(Mt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(op(u))if(0===r){const d=new qe(u.path);this.jt(t,d,En.newNoDocument(d,wt.min()))}else Dt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&op(m.target)){const w=new qe(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,En.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Bt();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.Xt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new uh(e,t,this.Kt,this.Ut,r);return this.Ut=is(),this.qt=xm(),this.Kt=new vn(Mt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new P_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new vn(Mt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new P_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function xm(){return new tr(qe.comparator)}function Ya(){return new tr(qe.comparator)}const HE={asc:"ASCENDING",desc:"DESCENDING"},k_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Qa{constructor(e,t){this.databaseId=e,this.gt=t}}function _p(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kb(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Fb(n,e){return _p(n,e.toTimestamp())}function Ur(n){return Dt(!!n),wt.fromTimestamp(function(e){const t=Ga(e);return new kn(t.seconds,t.nanos)}(n))}function F_(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function GE(n){const e=Jt.fromString(n);return Dt(QE(e)),e}function ch(n,e){return F_(n.databaseId,e.path)}function Ja(n,e){const t=GE(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(Lb(t))}function Mm(n,e){return F_(n.databaseId,e)}function zE(n){const e=GE(n);return 4===e.length?Jt.emptyPath():Lb(e)}function lh(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Lb(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Rm(n,e,t){return{name:ch(n,e),fields:t.value.mapValue.fields}}function L_(n,e,t){const r=Ja(n,e.name),o=Ur(e.updateTime),u=new ui({mapValue:{fields:e.fields}}),d=En.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function dh(n,e){let t;if(e instanceof ah)t={update:Rm(n,e.key,e.value)};else if(e instanceof fp)t={delete:ch(n,e.key)};else if(e instanceof Za)t={update:Rm(n,e.key,e.data),updateMask:jb(e.fieldMask)};else{if(!(e instanceof UE))return et();t={verify:ch(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof cp)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof nh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof rh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof lp)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Fb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function Nm(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Mn.updateTime(Ur(o.updateTime)):void 0!==o.exists?Mn.exists(o.exists):Mn.none():Mn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(Dt("REQUEST_TIME"===d.setToServerValue),m=new cp):"appendMissingElements"in d?m=new nh(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new rh(d.removeAllFromArray.values||[]):"increment"in d?m=new lp(u,d.increment):et();const w=er.fromServerFormat(d.fieldPath);return new ih(w,m)}(n,o)):[];var o;if(e.update){const o=Ja(n,e.update.name),u=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new ai((e.updateMask.fieldPaths||[]).map(C=>er.fromServerFormat(C)));return new Za(o,u,d,t,r)}return new ah(o,u,t,r)}if(e.delete){const o=Ja(n,e.delete);return new fp(o,t)}if(e.verify){const o=Ja(n,e.verify);return new UE(o,t)}return et()}function wp(n,e){return{documents:[Mm(n,e.path)]}}function Pm(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Mm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Mm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(A=>function(N){if("=="===N.op){if(I_(N.value))return{unaryFilter:{field:Ip(N.field),op:"IS_NAN"}};if(w_(N.value))return{unaryFilter:{field:Ip(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(I_(N.value))return{unaryFilter:{field:Ip(N.field),op:"IS_NOT_NAN"}};if(w_(N.value))return{unaryFilter:{field:Ip(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ip(N.field),op:Ub(N.op),value:N.value}}}(A));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Ip((A=C).field),direction:Vb(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.gt||ml(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function ZE(n){let e=zE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Dt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=V_(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Xd(Ep((N=A).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,ml(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new rs((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new rs(A.values||[],!A.before)}(t.endAt)),Db(e,o,d,u,m,"F",w,C)}function V_(n){return n?void 0!==n.unaryFilter?[Bb(n)]:void 0!==n.fieldFilter?[YE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>V_(e)).reduce((e,t)=>e.concat(t)):et():[]}function Vb(n){return HE[n]}function Ub(n){return k_[n]}function Ip(n){return{fieldPath:n.canonicalString()}}function Ep(n){return er.fromServerFormat(n.fieldPath)}function YE(n){return Cr.create(Ep(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function Bb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ep(n.unaryFilter.field);return Cr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ep(n.unaryFilter.field);return Cr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ep(n.unaryFilter.field);return Cr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ep(n.unaryFilter.field);return Cr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function jb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ui(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$b(e)),e=PA(n.get(t),e);return $b(e)}function PA(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function $b(n){return n+"\x01\x01"}function Xa(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&et(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:et()}u=d+2}return new Jt(r)}const Hb=["userId","batchId"];function km(n,e){return[n,Ui(e)]}function Dp(n,e,t){return[n,Ui(e),t]}const Gb={},zb=["prefixPath","collectionGroup","readTime","documentId"],JE=["prefixPath","collectionGroup","documentId"],wl=["collectionGroup","readTime","prefixPath","documentId"],XE=["canonicalId","targetId"],U_=["targetId","path"],B_=["path","targetId"],qb=["collectionId","parent"],j_=["indexId","uid"],$_=["uid","sequenceNumber"],Fm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kA=["indexId","uid","orderedDocumentKey"],FA=["userId","collectionPath","documentId"],LA=["userId","collectionPath","largestBatchId"],VA=["userId","collectionGroup","largestBatchId"],H_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wb=[...H_,"documentOverlays"],eD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tD=eD,Zb=[...tD,"indexConfiguration","indexState","indexEntries"];class Lm extends pE{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function br(n,e){const t=Ge(n);return Fs.M(t.ie,e)}class Vm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Ab(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=oh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=oh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ss();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=M_(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&qd(this.mutations,e.mutations,(t,r)=>xb(t,r))&&qd(this.baseMutations,e.baseMutations,(t,r)=>xb(t,r))}}class G_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Dt(e.mutations.length===r.length);let o=R_;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new G_(e,t,r,o)}}class z_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eu{constructor(e,t,r,o,u=wt.min(),d=wt.min(),m=Dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new eu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new eu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Um{constructor(e){this.re=e}}function q_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ch(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:_p(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Il(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Il(e.version)}}var o,u;return r}function hh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Il(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function El(n){const e=new kn(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function fh(n,e){const t=(e.baseMutations||[]).map(u=>Nm(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Nm(n.re,u)),o=kn.fromMillis(e.localWriteTimeMs);return new Vm(e.batchId,o,t,r)}function Bm(n){const e=El(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?El(n.lastLimboFreeSnapshotVersion):wt.min();let r;var o;return void 0!==n.query.documents?(Dt(1===(o=n.query).documents.length),r=ci(eh(zE(o.documents[0])))):r=ci(ZE(n.query)),new eu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Dr.fromBase64String(n.resumeToken))}function nD(n,e){const t=Il(e.snapshotVersion),r=Il(e.lastLimboFreeSnapshotVersion);let o;o=op(e.target)?wp(n.re,e.target):Pm(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_l(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function W_(n){const e=ZE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ap(e,e.limit,"L"):e}function Z_(n,e){return new z_(e.largestBatchId,Nm(n.re,e.overlayMutation))}function Kb(n,e){const t=e.path.lastSegment();return[n,Ui(e.path.popLast()),t]}function Yb(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Il(r.readTime),documentKey:Ui(r.documentKey.path),largestBatchId:r.largestBatchId}}class BA{getBundleMetadata(e,t){return Qb(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:El(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Qb(e).put({bundleId:(r=t).id,createTime:Il(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Jb(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:W_(o.bundledQuery),readTime:El(o.readTime)};var o})}saveNamedQuery(e,t){return Jb(e).put({name:(r=t).name,readTime:Il(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Qb(n){return br(n,"bundles")}function Jb(n){return br(n,"namedQueries")}class jm{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new jm(e,t.uid||"")}getOverlay(e,t){return $m(e).get(Kb(this.userId,t)).next(r=>r?Z_(this.It,r):null)}getOverlays(e,t){const r=Qo();return ie.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new z_(t,d);o.push(this.ue(e,m))}),ie.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ui(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push($m(e).Y("collectionPathOverlayIndex",m))}),ie.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Qo(),u=Ui(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return $m(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=Z_(this.It,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Qo();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $m(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const N=Z_(this.It,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return $m(e).put(function(r,o,u){const[d,m,w]=Kb(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:dh(r.re,u.mutation)}}(this.It,this.userId,t))}}function $m(n){return br(n,"documentOverlays")}class ph{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe($n(e.integerValue));else if("doubleValue"in e){const r=$n(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Kd(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(za(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?wE(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):et()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function jA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Xb(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=jA(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ph.Te=new ph;class $A{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=Xb(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=Xb(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class HA{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class i{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class s{constructor(){this.Be=new $A,this.Le=new HA(this.Be),this.Ue=new i(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class a{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new a(this.indexId,this.documentKey,this.arrayValue,r)}}function c(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=l(n.arrayValue,e.arrayValue),0!==t?t:(t=l(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function l(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class f{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=m_(e);if(void 0!==t&&!this.ze(t))return!1;const r=pl(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class v{constructor(){this.Ye=new I}addToCollectionParentIndex(e,t){return this.Ye.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ns.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class I{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new vn(Jt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new vn(Jt.comparator)).toArray()}}const E=new Uint8Array(0);class T{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new I,this.Ze=new Ka(r=>_l(r),(r,o)=>sp(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ui(o)};return M(e).put(u)}return ie.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[lE(t),""],!1,!0);return M(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Xa(d.parent))}return r})}addFieldIndex(e,t){const r=H(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=J(e);return u.next(m=>{d.put(Yb(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=H(e),o=J(e),u=P(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=P(e);let o=!0;const u=new Map;return ie.forEach(this.tn(t),d=>this.en(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Bt();const m=[];return ie.forEach(u,(w,C)=>{var A;Re("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${_l(t)}`);const N=function(Lt,Vt){const kt=m_(Vt);if(void 0===kt)return null;for(const Gt of wm(Lt,kt.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(C,w),$=function(Lt,Vt){const kt=new Map;for(const Gt of pl(Vt))for(const Wr of wm(Lt,Gt.fieldPath))switch(Wr.op){case"==":case"in":kt.set(Gt.fieldPath.canonicalString(),Wr.value);break;case"not-in":case"!=":return kt.set(Gt.fieldPath.canonicalString(),Wr.value),Array.from(kt.values())}return null}(C,w),Y=function(Lt,Vt){const kt=[];let Gt=!0;for(const Wr of pl(Vt)){const m0=0===Wr.kind?CE(Lt,Wr.fieldPath,Lt.startAt):bE(Lt,Wr.fieldPath,Lt.startAt);kt.push(m0.value),Gt&&(Gt=m0.inclusive)}return new rs(kt,Gt)}(C,w),oe=function(Lt,Vt){const kt=[];let Gt=!0;for(const Wr of pl(Vt)){const m0=0===Wr.kind?bE(Lt,Wr.fieldPath,Lt.endAt):CE(Lt,Wr.fieldPath,Lt.endAt);kt.push(m0.value),Gt&&(Gt=m0.inclusive)}return new rs(kt,Gt)}(C,w),Oe=this.nn(w,C,Y),Pe=this.nn(w,C,oe),St=this.sn(w,C,$),Pt=this.rn(w.indexId,N,Oe,Y.inclusive,Pe,oe.inclusive,St);return ie.forEach(Pt,Lt=>r.J(Lt,t.limit).next(Vt=>{Vt.forEach(kt=>{const Gt=qe.fromSegments(kt.documentKey);d.has(Gt)||(d=d.add(Gt),m.push(Gt))})}))}).next(()=>m)}return ie.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const $=t?this.on(t[N/C]):E,Y=this.un(e,$,r[N%C],o),oe=this.cn(e,$,u[N%C],d),Oe=m.map(Pe=>this.un(e,$,Pe,!0));A.push(...this.createRange(Y,oe,Oe))}return A}un(e,t,r,o){const u=new a(e,qe.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new a(e,qe.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new f(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return ie.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new vn(er.comparator),w=!1;for(const C of d.filters){const A=C;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:m=m.add(A.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new s;for(const o of pl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);ph.Te.ce(u,d)}return r.$e()}on(e){const t=new s;return ph.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new s;return ph.Te.ce(rc(this.databaseId,t),r.qe(function(o){const u=pl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new s);let u=0;for(const d of pl(e)){const m=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&ip(m))o=this.fn(o,d,m);else{const C=w.qe(d.kind);ph.Te.ce(m,C)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new s;w.seed(m.$e()),ph.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Cr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=H(e),o=J(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return ie.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,A){const N=A?new Xf(A.sequenceNumber,new ns(El(A.readTime),new qe(Xa(A.documentKey)),A.largestBatchId)):Xf.empty(),$=C.fields.map(([Y,oe])=>new dm(er.fromServerFormat(Y),oe));return new g_(C.indexId,C.collectionGroup,$,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=H(e),u=J(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ie.forEach(m,w=>u.put(Yb(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?ie.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ie.forEach(m,w=>this.wn(e,o,w).next(C=>{const A=this.mn(u,w);return C.isEqual(A)?ie.resolve():this.gn(e,u,w,C,A)}))))})}yn(e,t,r,o){return P(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return P(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=P(e);let u=new vn(c);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new a(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new vn(c);const o=this.an(t,e);if(null==o)return r;const u=m_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(ip(d))for(const m of d.arrayValue.values||[])r=r.add(new a(t.indexId,e.key,this.on(m),o))}else r=r.add(new a(t.indexId,e.key,E,o));return r}gn(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,A,N){const $=m.getIterator(),Y=w.getIterator();let oe=Zd($),Oe=Zd(Y);for(;oe||Oe;){let Pe=!1,St=!1;if(oe&&Oe){const Pt=C(oe,Oe);Pt<0?St=!0:Pt>0&&(Pe=!0)}else null!=oe?St=!0:Pe=!0;Pe?(A(Oe),Oe=Zd(Y)):St?(N(oe),oe=Zd($)):(oe=Zd($),Oe=Zd(Y))}}(o,u,c,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),ie.waitFor(d)}_n(e){let t=1;return J(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>c(d,m)).filter((d,m,w)=>!m||0!==c(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=c(d,e),w=c(d,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,E,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,E,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ye)}getMinOffset(e,t){return ie.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||et())).next(ye)}}function M(n){return br(n,"collectionParents")}function P(n){return br(n,"indexEntries")}function H(n){return br(n,"indexConfiguration")}function J(n){return br(n,"indexState")}function ye(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;y_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ns(e.readTime,e.documentKey,t)}const Fe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Le{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Le(e,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rt(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(A,N,$)=>(m++,$.delete()));u.push(w.next(()=>{Dt(1===m)}));const C=[];for(const A of t.mutations){const N=Dp(e,A.key.path,t.batchId);u.push(o.delete(N)),C.push(A.key)}return ie.waitFor(u).next(()=>C)}function pt(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Le.DEFAULT_COLLECTION_PERCENTILE=10,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Le.DEFAULT=new Le(41943040,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Le.DISABLED=new Le(-1,0,0);class be{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new be(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ht(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=fn(e),d=Ht(e);return d.add({}).next(m=>{Dt("number"==typeof m);const w=new Vm(m,t,r,o),C=function($,Y,oe){const Oe=oe.baseMutations.map(St=>dh($.re,St)),Pe=oe.mutations.map(St=>dh($.re,St));return{userId:Y,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Oe,mutations:Pe}}(this.It,this.userId,w),A=[];let N=new vn(($,Y)=>Mt($.canonicalString(),Y.canonicalString()));for(const $ of o){const Y=Dp(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),A.push(d.put(C)),A.push(u.put(Y,Gb))}return N.forEach($=>{A.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),ie.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Ht(e).get(t).next(r=>r?(Dt(r.userId===this.userId),fh(this.It,r)):null)}Tn(e,t){return this.In[t]?ie.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ht(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(Dt(m.batchId>=r),u=fh(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ht(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ht(e).W("userMutationsIndex",t).next(r=>r.map(o=>fh(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=km(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return fn(e).Z({range:o},(d,m,w)=>{const[C,A,N]=d,$=Xa(A);if(C===this.userId&&t.path.isEqual($))return Ht(e).get(N).next(Y=>{if(!Y)throw et();Dt(Y.userId===this.userId),u.push(fh(this.It,Y))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Mt);const o=[];return t.forEach(u=>{const d=km(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=fn(e).Z({range:m},(C,A,N)=>{const[$,Y,oe]=C,Oe=Xa(Y);$===this.userId&&u.path.isEqual(Oe)?r=r.add(oe):N.done()});o.push(w)}),ie.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=km(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new vn(Mt);return fn(e).Z({range:d},(w,C,A)=>{const[N,$,Y]=w,oe=Xa($);N===this.userId&&r.isPrefixOf(oe)?oe.length===o&&(m=m.add(Y)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ht(e).get(u).next(d=>{if(null===d)throw et();Dt(d.userId===this.userId),r.push(fh(this.It,d))}))}),ie.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return rt(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ie.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return fn(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Xa(u[1]);o.push(w)}else m.done()}).next(()=>{Dt(0===o.length)})})}containsKey(e,t){return It(e,this.userId,t)}Rn(e){return ic(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function It(n,e,t){const r=km(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return fn(n).Z({range:u,X:!0},(m,w,C)=>{const[A,N,$]=m;A===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Ht(n){return br(n,"mutations")}function fn(n){return br(n,"documentMutations")}function ic(n){return br(n,"mutationQueues")}class tu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new tu(0)}static vn(){return new tu(-1)}}class K_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new tu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>wt.fromTimestamp(new kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>sc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return sc(e).Z((d,m)=>{const w=Bm(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>ie.waitFor(u)).next(()=>o)}forEachTarget(e,t){return sc(e).Z((r,o)=>{const u=Bm(o);t(u)})}Vn(e){return Hm(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Sn(e,t){return Hm(e).put("targetGlobalKey",t)}Dn(e,t){return sc(e).put(nD(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_l(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return sc(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Bm(m);sp(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Jo(e);return t.forEach(d=>{const m=Ui(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),ie.waitFor(o)}removeMatchingKeys(e,t,r){const o=Jo(e);return ie.forEach(t,u=>{const d=Ui(u.path);return ie.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Jo(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Jo(e);let u=Bt();return o.Z({range:r,X:!0},(d,m,w)=>{const C=Xa(d[1]),A=new qe(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Ui(t.path),o=IDBKeyRange.bound([r],[lE(r)],!1,!0);let u=0;return Jo(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}se(e,t){return sc(e).get(t).next(r=>r?Bm(r):null)}}function sc(n){return br(n,"targets")}function Hm(n){return br(n,"targetGlobal")}function Jo(n){return br(n,"targetDocuments")}function Gm([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class Y_{constructor(e){this.xn=e,this.buffer=new vn(Gm),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Gm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Q_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){nc(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ks(r)}yield t.Fn(3e5)}))}}class J_{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(Vr.at);const r=new Y_(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Fe)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fe):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),Jf()<=es.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class mR{constructor(e,t){this.db=e,this.garbageCollector=new J_(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return rD(e,r)}removeReference(e,t,r){return rD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return rD(e,t)}Gn(e,t){return function(r,o){let u=!1;return ic(r).tt(d=>It(r,d,o).next(m=>(m&&(u=!0),ie.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,wt.min()),Jo(e).delete([0,Ui(d.path)])))});o.push(w)}}).next(()=>ie.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return rD(e,t)}Kn(e,t){const r=Jo(e);let o,u=Vr.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==Vr.at&&t(new qe(Xa(o)),u),u=C,o=w):u=Vr.at}).next(()=>{u!==Vr.at&&t(new qe(Xa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rD(n,e){return Jo(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ui(e.path),sequenceNumber:r}));var r}class GA{constructor(){this.changes=new Ka(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yR{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Cp(e).put(r)}removeEntry(e,t,r){return Cp(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],hh(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=En.newInvalidDocument(t);return Cp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(X_(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:En.newInvalidDocument(t)};return Cp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(X_(t))},(o,u)=>{r={document:this.jn(t,u),size:pt(u)}}).next(()=>r)}getEntries(e,t){let r=is();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=is(),o=new tr(qe.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,pt(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return ie.resolve();let o=new vn(ZA);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(X_(o.first()),X_(o.last())),d=o.getIterator();let m=d.getNext();return Cp(e).Z({index:"documentKeyIndex",range:u},(w,C,A)=>{const N=qe.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&ZA(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?A.j(X_(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),hh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cp(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=is();for(const w of d){const C=this.jn(qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=is();const d=WA(t,r),m=WA(t,ns.max());return Cp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,A)=>{const N=this.jn(qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new vR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qA(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Qn(e,t){return qA(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function UA(n,e){let t;if(e.document)t=L_(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),o=El(e.noDocument.readTime);t=En.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=qe.fromSegments(e.unknownDocument.path),o=El(e.unknownDocument.version);t=En.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new kn(r[0],r[1]);return wt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return En.newInvalidDocument(e)}}function zA(n){return new yR(n)}class vR extends GA{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ka(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new vn((u,d)=>Mt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=q_(this.Yn.It,d);o=o.add(u.path.popLast()),r+=pt(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=q_(this.Yn.It,d.convertToNoDocument(wt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function qA(n){return br(n,"remoteDocumentGlobal")}function Cp(n){return br(n,"remoteDocumentsV14")}function X_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WA(n,e){const t=e.documentKey.path.toArray();return[n,hh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ZA(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class _R{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class KA{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&oh(r.mutation,o,ai.empty(),kn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const o=Qo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=pp();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Qo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=is();const d=gp(),m=gp();return t.forEach((w,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof Za)?u=u.insert(C.key,C):void 0!==A&&(d.set(C.key,A.mutation.getFieldMask()),oh(A.mutation,C,A.mutation.getFieldMask(),kn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>d.set(C,A)),t.forEach((C,A)=>{var N;return m.set(C,new _R(A,null!==(N=d.get(C))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=gp();let o=new tr((d,m)=>d-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||ai.empty();A=m.applyToLocalView(C,A),r.set(w,A);const N=(o.get(m.batchId)||Bt()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,N=ss();A.forEach($=>{if(!u.has($)){const Y=M_(t.get($),r.get($));null!==Y&&N.set($,Y),u=u.add($)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,N))}return ie.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):bm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ie.resolve(Qo());let m=-1,w=u;return d.next(C=>ie.forEach(C,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?ie.resolve():this.getBaseDocument(e,A,N).next($=>{w=w.insert(A,$)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Bt())).next(A=>({batchId:m,changes:Am(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let o=pp();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=pp();return this.indexManager.getCollectionParents(e,o).next(d=>ie.forEach(d,m=>{const w=(C=t,A=m.child(o),new Wa(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===o.get(C)&&(o=o.insert(C,En.newInvalidDocument(C)))});let d=pp();return o.forEach((m,w)=>{const C=u.get(m);void 0!==C&&oh(C.mutation,w,ai.empty(),kn.now()),C_(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ie.resolve(En.newInvalidDocument(t))}}class wR{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ie.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:W_(r.bundledQuery),readTime:Ur(r.readTime)}),ie.resolve();var r}}class IR{constructor(){this.overlays=new tr(qe.comparator),this.es=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qo();return ie.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const o=Qo(),u=t.length+1,d=new qe(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new tr((C,A)=>C-A);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=Qo(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=Qo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=o)););return ie.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new z_(t,r));let u=this.es.get(t);void 0===u&&(u=Bt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class eT{constructor(){this.ns=new vn(li.ss),this.rs=new vn(li.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new li(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new li(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new Jt([])),r=new li(t,e),o=new li(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new Jt([])),r=new li(t,e),o=new li(t,e+1);let u=Bt();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new li(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class li{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||Mt(e._s,t._s)}static os(e,t){return Mt(e._s,t._s)||qe.comparator(e.key,t.key)}}class ER{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new vn(li.ss)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new Vm(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new li(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(d)}lookupMutationBatch(e,t){return ie.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new li(t,0),o=new li(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Mt);return t.forEach(o=>{const u=new li(o,0),d=new li(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),ie.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const d=new li(new qe(u),0);let m=new vn(Mt);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w._s)),!0)},d),ie.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Dt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ie.forEach(t.mutations,o=>{const u=new li(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new li(t,0),o=this.gs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ie.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class DR{constructor(e){this.Es=e,this.docs=new tr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=is();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():En.newInvalidDocument(o))}),ie.resolve(r)}getAllFromCollection(e,t,r){let o=is();const u=new qe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||y_(hE(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}As(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CR(this)}getSize(e){return ie.resolve(this.size)}}class CR extends GA{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class bR{constructor(e){this.persistence=e,this.Rs=new Ka(t=>_l(t),sp),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new eT,this.targetCount=0,this.vs=tu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ie.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new tu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Dn(t),ie.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ie.waitFor(u).next(()=>o)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Ps.containsKey(t))}}class YA{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Vr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new bR(this),this.indexManager=new v,this.remoteDocumentCache=new DR(r=>this.referenceDelegate.xs(r)),this.It=new Um(t),this.Ns=new wR(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new ER(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new TR(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return ie.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class TR extends pE{constructor(e){super(),this.currentSequenceNumber=e}}class iD{constructor(e){this.persistence=e,this.Fs=new eT,this.$s=null}static Bs(e){return new iD(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ls,r=>{const o=qe.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,wt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ie.or([()=>ie.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class SR{constructor(e){this.It=e}$(e,t,r,o){const u=new ep("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hb,{unique:!0}),m.createObjectStore("documentMutations"),QA(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=ie.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),QA(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hb,{unique:!0});const A=w.store("mutations"),N=C.map($=>A.put($));return ie.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:FA});w.createIndex("collectionPathOverlayIndex",LA,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",VA,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:zb});w.createIndex("documentKeyIndex",JE),w.createIndex("collectionGroupIndex",wl)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:j_}).createIndex("sequenceNumberIndex",$_,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Fm}).createIndex("documentKeyIndex",kA,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=pt(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>ie.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>ie.forEach(m,w=>{Dt(w.userId===u.userId);const C=fh(this.It,w);return rt(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new Jt(d),C=[0,Ui(w)];u.push(t.get(C).next(A=>A?ie.resolve():t.put({targetId:0,path:Ui(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ie.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:qb});const r=t.store("collectionParents"),o=new I,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Ui(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new Jt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],C)=>{const A=Xa(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Bm(o),d=nD(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new qe(Jt.fromString(C.document.name).popFirst(5)):C.noDocument?qe.fromSegments(C.noDocument.path):C.unknownDocument?qe.fromSegments(C.unknownDocument.path):et()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(A))}).next(()=>ie.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=zA(this.It),u=new YA(iD.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:Bt();fh(this.It,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),ie.forEach(m,(w,C)=>{const A=new Fr(C),N=jm.oe(this.It,A),$=u.getIndexManager(A),Y=be.oe(A,this.It,$,u.referenceDelegate);return new KA(o,Y,N,$).recalculateAndSaveOverlaysForDocumentKeys(new Lm(t,Vr.at),w).next()})})}}function QA(n){n.createObjectStore("targetDocuments",{keyPath:U_}).createIndex("documentTargetsIndex",B_,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",XE,{unique:!0}),n.createObjectStore("targetGlobal")}const tT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nT{constructor(e,t,r,o,u,d,m,w,C,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=C,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!nT.C())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mR(this,o),this.ii=t+"main",this.It=new Um(w),this.ri=new Fs(this.ii,this.Xs,new SR(this.It)),this.Cs=new K_(this.referenceDelegate,this.It),this.remoteDocumentCache=zA(this.It),this.Ns=new BA,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,tT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Vr(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(nc(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return e0(e).get("owner").next(t=>ie.resolve(this.mi(t)))}gi(e){return sD(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=br(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return ie.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ie.resolve(!0):e0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,tT);return!1}}return!(!this.networkEnabled||!this.inForeground)||sD(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lm(t,Vr.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>sD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return be.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new T(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return jm.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?Zb:14===d?tD:13===d?eD:12===d?Wb:11===d?H_:void et();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new Lm(w,this.Ss?this.Ss.next():Vr.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(ce.FAILED_PRECONDITION,fE);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return e0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,tT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return e0(e).put("owner",t)}static C(){return Fs.C()}_i(e){const t=e0(e);return t.get("owner").next(r=>this.mi(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(jn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Wt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){jn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function e0(n){return br(n,"owner")}function sD(n){return br(n,"clientMetadata")}function rT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class iT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Bt(),o=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new iT(e,t.fromCache,r,o)}}class JA{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(RE(t))return ie.resolve(null);let r=ci(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=ap(t,null,"F"),r=ci(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Bt(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,d,w.readTime)?this.ki(e,ap(t,null,"F")):this.Bi(e,C,t,w)}))})))}Oi(e,t,r,o){return RE(t)||o.isEqual(wt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(Jf()<=es.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Tm(t)),this.Bi(e,d,t,dE(o,-1)))})}Fi(e,t){let r=new vn(T_(e));return t.forEach((o,u)=>{C_(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Jf()<=es.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Tm(t)),this.Ni.getDocumentsMatchingQuery(e,t,ns.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class AR{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new tr(Mt),this.qi=new Ka(u=>_l(u),sp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KA(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function XA(n,e,t,r){return new AR(n,e,t,r)}function ex(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,me.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Bt();for(const C of o){d.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:m}))})})}),sT.apply(this,arguments)}function xR(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const A=w.batch,N=A.keys();let $=ie.resolve();return N.forEach(Y=>{$=$.next(()=>C.getEntry(m,Y)).next(oe=>{const Oe=w.docVersions.get(Y);Dt(null!==Oe),oe.version.compareTo(Oe)<0&&(A.applyToRemoteDocument(oe,w),oe.isValidDocument()&&(oe.setReadTime(w.commitVersion),C.addEntry(oe)))})}),$.next(()=>d.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Bt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function tx(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function MR(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((A,N)=>{const $=o.get(N);if(!$)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let Y=$.withSequenceNumber(u.currentSequenceNumber);var oe,Oe,Pe;e.targetMismatches.has(N)?Y=Y.withResumeToken(Dr.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):A.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(A.resumeToken,r)),o=o.insert(N,Y),Oe=Y,Pe=A,(0===(oe=$).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,Y))});let w=is(),C=Bt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(nx(u,d,e.documentUpdates).next(A=>{w=A.Wi,C=A.zi})),!r.isEqual(wt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return ie.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ui=o,u))}function nx(n,e,t){let r=Bt(),o=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=is();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(wt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Re("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function RR(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zm(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,ie.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new eu(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function qm(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!nc(d))throw d;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),oT.apply(this,arguments)}function oD(n,e,t){const r=Ge(n);let o=wt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const A=Ge(m),N=A.qi.get(C);return void 0!==N?ie.resolve(A.Ui.get(N)):A.Cs.getTargetData(w,C)}(r,d,ci(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:wt.min(),t?u:Bt())).next(m=>(sx(r,b_(e),m),{documents:m,Hi:u})))}function rx(n,e){const t=Ge(n),r=Ge(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function ix(n,e){const t=Ge(n),r=t.Ki.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,dE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(sx(t,e,o),o))}function sx(n,e,t){let r=n.Ki.get(e)||wt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function aT(){return aT=(0,me.Z)(function*(n,e,t,r){const o=Ge(n);let u=Bt(),d=is();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const N=e.Yi(C);N.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(A,N)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield zm(o,(C=r,ci(eh(Jt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>nx(C,m,d).next(A=>(m.apply(C),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),aT.apply(this,arguments)}function OR(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,me.Z)(function*(n,e,t=Bt()){const r=yield zm(n,ci(W_(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Ur(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Dr.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),uT.apply(this,arguments)}function ox(n,e){return`firestore_clients_${n}_${e}`}function ax(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function cT(n,e){return`firestore_targets_${n}_${e}`}class aD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new aD(e,t,o.state,u):(jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class t0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new t0(e,r.state,o):(jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=mp();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=gm(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new uD(e,u):(jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lT(t.clientId,t.onlineState):(jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class dT{constructor(){this.activeTargetIds=mp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hT{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new tr(Mt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=ox(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new dT),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(ox(e.persistenceKey,o));if(u){const d=uD.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(cT(this.persistenceKey,e));if(r){const o=t0.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=Vr.at;if(null!=u)try{const m=JSON.parse(u);Dt("number"==typeof m),d=m}catch(m){jn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Vr.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new aD(this.currentUser,e,t,r),u=ax(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=ax(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=cT(this.persistenceKey,e),u=new t0(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return uD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return aD.Zi(new Fr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return t0.Zi(o,t)}yr(e){return lT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=mp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class ux{constructor(){this.Lr=new dT,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new dT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PR{qr(e){}shutdown(){}}class cx{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FR{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class LR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);Re("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Re("RestConnection","Received: ",w),w),w=>{throw fl("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+zd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${kR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new lb;m.setWithCredentials(!0),m.listenOnce(ub.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case o_.NO_ERROR:const C=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(C)),u(C);break;case o_.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),d(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case o_.HTTP_ERROR:const A=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const $=function(Y){const oe=Y.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(oe)>=0?oe:ce.UNKNOWN}(N.status);d(new xe($,N.message))}else d(new xe(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ob(),d=ab(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new sE({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Re("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let A=!1,N=!1;const $=new FR({Hr:oe=>{N?Re("Connection","Not sending because WebChannel is closed:",oe):(A||(Re("Connection","Opening WebChannel transport."),C.open(),A=!0),Re("Connection","WebChannel sending:",oe),C.send(oe))},Jr:()=>C.close()}),Y=(oe,Oe,Pe)=>{oe.listen(Oe,St=>{try{Pe(St)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return Y(C,um.EventType.OPEN,()=>{N||Re("Connection","WebChannel transport opened.")}),Y(C,um.EventType.CLOSE,()=>{N||(N=!0,Re("Connection","WebChannel transport closed"),$.io())}),Y(C,um.EventType.ERROR,oe=>{N||(N=!0,fl("Connection","WebChannel transport errored:",oe),$.io(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),Y(C,um.EventType.MESSAGE,oe=>{var Oe;if(!N){const Pe=oe.data[0];Dt(!!Pe);const St=Pe,Pt=St.error||(null===(Oe=St[0])||void 0===Oe?void 0:Oe.error);if(Pt){Re("Connection","WebChannel received error:",Pt);const Lt=Pt.status;let Vt=function(Gt){const Wr=gr[Gt];if(void 0!==Wr)return BE(Wr)}(Lt),kt=Pt.message;void 0===Vt&&(Vt=ce.INTERNAL,kt="Unknown error status: "+Lt+" with message "+Pt.message),N=!0,$.io(new xe(Vt,kt)),C.close()}else Re("Connection","WebChannel received:",Pe),$.ro(Pe)}}),Y(d,cb.STAT_EVENT,oe=>{oe.stat===a_.PROXY?Re("Connection","Detected buffering proxy"):oe.stat===a_.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function lx(){return typeof window<"u"?window:null}function cD(){return typeof document<"u"?document:null}function n0(n){return new Qa(n,!0)}class fT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class dx{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new fT(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(jn(t.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VR extends dx{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function WE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),o=e.targetChange.targetIds||[],u=function(w,C){return w.gt?(Dt(void 0===C||"string"==typeof C),Dr.fromBase64String(C||"")):(Dt(void 0===C||C instanceof Uint8Array),Dr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ce.UNKNOWN:BE(w.code);return new xe(C,w.message||"")}(d);t=new $E(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ja(n,r.document.name),u=Ur(r.document.updateTime),d=new ui({mapValue:{fields:r.document.fields}}),m=En.newFoundDocument(o,u,d);t=new vp(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ja(n,r.document),u=r.readTime?Ur(r.readTime):wt.min(),d=En.newNoDocument(o,u);t=new vp([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Ja(n,r.document);t=new vp([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new Rb(r.count||0);t=new O_(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return wt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?Ur(u.readTime):wt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=lh(this.It),t.addTarget=function(o,u){let d;const m=u.target;return d=op(m)?{documents:wp(o,m)}:{query:Pm(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=kb(o,u.resumeToken):u.snapshotVersion.compareTo(wt.min())>0&&(d.readTime=_p(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function KE(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=lh(this.It),t.removeTarget=e,this.Bo(t)}}class UR extends dx{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Om(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,o){let u=Ur(r.updateTime?r.updateTime:o);return u.isEqual(wt.min())&&(u=Ur(o)),new LE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Zo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=lh(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dh(this.It,r))};this.Bo(t)}}class BR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ce.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class $R{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(jn(t),this.ou=!1):Re("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class HR{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;Dl(d)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(C){const A=Ge(C);A._u.add(4),yield Wm(A),A.gu.set("Unknown"),A._u.delete(4),yield r0(A)}),function(C){return w.apply(this,arguments)})(d))}))}),this.gu=new $R(r,o)}}function r0(n){return gT.apply(this,arguments)}function gT(){return gT=(0,me.Z)(function*(n){if(Dl(n))for(const e of n.wu)yield e(!0)}),gT.apply(this,arguments)}function Wm(n){return mT.apply(this,arguments)}function mT(){return mT=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),mT.apply(this,arguments)}function lD(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),_T(t)?vT(t):Km(t).ko()&&yT(t,e))}function s0(n,e){const t=Ge(n),r=Km(t);t.du.delete(e),r.ko()&&hx(t,e),0===t.du.size&&(r.ko()?r.Fo():Dl(t)&&t.gu.set("Unknown"))}function yT(n,e){n.yu.Mt(e.targetId),Km(n).zo(e)}function hx(n,e){n.yu.Mt(e),Km(n).Ho(e)}function vT(n){n.yu=new Pb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Km(n).start(),n.gu.uu()}function _T(n){return Dl(n)&&!Km(n).No()&&n.du.size>0}function Dl(n){return 0===Ge(n)._u.size}function fx(n){n.yu=void 0}function GR(n){return wT.apply(this,arguments)}function wT(){return wT=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{yT(n,e)})}),wT.apply(this,arguments)}function zR(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,me.Z)(function*(n,e){fx(n),_T(n)?(n.gu.hu(e),vT(n)):n.gu.set("Unknown")}),IT.apply(this,arguments)}function qR(n,e,t){return ET.apply(this,arguments)}function ET(){return ET=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof $E&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dD(n,r)}else if(e instanceof vp?n.yu.Gt(e):e instanceof O_?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(wt.min()))try{const r=yield tx(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.du.get(w);C&&o.du.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(Dr.EMPTY_BYTE_STRING,w.snapshotVersion)),hx(o,m);const C=new eu(w.target,m,1,w.sequenceNumber);yT(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield dD(n,r)}var r}),ET.apply(this,arguments)}function dD(n,e,t){return DT.apply(this,arguments)}function DT(){return DT=(0,me.Z)(function*(n,e,t){if(!nc(e))throw e;n._u.add(1),yield Wm(n),n.gu.set("Offline"),t||(t=()=>tx(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield r0(n)}))}),DT.apply(this,arguments)}function px(n,e){return e().catch(t=>dD(n,t,e))}function Zm(n){return CT.apply(this,arguments)}function CT(){return CT=(0,me.Z)(function*(n){const e=Ge(n),t=gh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;WR(e);)try{const o=yield RR(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,ZR(e,o)}catch(o){yield dD(e,o)}gx(e)&&mx(e)}),CT.apply(this,arguments)}function WR(n){return Dl(n)&&n.fu.length<10}function ZR(n,e){n.fu.push(e);const t=gh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function gx(n){return Dl(n)&&!gh(n).No()&&n.fu.length>0}function mx(n){gh(n).start()}function KR(n){return bT.apply(this,arguments)}function bT(){return bT=(0,me.Z)(function*(n){gh(n).eu()}),bT.apply(this,arguments)}function YR(n){return TT.apply(this,arguments)}function TT(){return TT=(0,me.Z)(function*(n){const e=gh(n);for(const t of n.fu)e.Xo(t.mutations)}),TT.apply(this,arguments)}function QR(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),o=G_.from(r,e,t);yield px(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Zm(n)}),ST.apply(this,arguments)}function JR(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,me.Z)(function*(n,e){var t;e&&gh(n).Yo&&(yield(t=(0,me.Z)(function*(r,o){if(Nb(u=o.code)&&u!==ce.ABORTED){const d=r.fu.shift();gh(r).Mo(),yield px(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Zm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),gx(n)&&mx(n)}),AT.apply(this,arguments)}function yx(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,me.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=Dl(t);t._u.add(3),yield Wm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield r0(t)}),xT.apply(this,arguments)}function MT(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,me.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield r0(t)):e||(t._u.add(2),yield Wm(t),t.gu.set("Unknown"))}),RT.apply(this,arguments)}function Km(n){return n.pu||(n.pu=function(e,t,r){const o=Ge(e);return o.su(),new VR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:GR.bind(null,n),Zr:zR.bind(null,n),Wo:qR.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Mo(),_T(n)?vT(n):n.gu.set("Unknown")):(yield n.pu.stop(),fx(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function gh(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ge(e);return o.su(),new UR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:KR.bind(null,n),Zr:JR.bind(null,n),tu:YR.bind(null,n),Zo:QR.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Mo(),yield Zm(n)):(yield n.Iu.stop(),n.fu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class NT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new NT(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ym(n,e){if(jn("AsyncQueue",`${e}: ${n}`),nc(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Qm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=pp(),this.sortedSet=new tr(this.comparator)}static emptySet(e){return new Qm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class vx{constructor(){this.Tu=new tr(qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):et():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jm{constructor(e,t,r,o,u,d,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Jm(e,t,Qm.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class XR{constructor(){this.Au=void 0,this.listeners=[]}}class eN{constructor(){this.queries=new Ka(e=>NE(e),up),this.onlineState="Unknown",this.Ru=new Set}}function OT(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new XR),o)try{u.Au=yield t.onListen(r)}catch(d){const m=Ym(d,`Initialization of query '${Tm(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&LT(t)}),PT.apply(this,arguments)}function kT(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),FT.apply(this,arguments)}function tN(n,e){const t=Ge(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Pu(o)&&(r=!0);d.Au=o}}r&&LT(t)}function nN(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function LT(n){n.Ru.forEach(e=>{e.next()})}class VT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Jm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Jm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class rN{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class _x{constructor(e){this.It=e}Ji(e){return Ja(this.It,e)}Yi(e){return e.metadata.exists?L_(this.It,e.document,!1):En.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ur(e)}}class iN{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Jt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new _x(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Bt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function NR(n,e,t,r){return aT.apply(this,arguments)}(e.localStore,new _x(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield OR(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function wx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ix{constructor(e){this.key=e}}class Ex{constructor(e){this.key=e}}class Dx{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Bt(),this.mutatedKeys=Bt(),this.Gu=T_(e),this.Qu=new Qm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new vx,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const $=o.get(A),Y=C_(this.query,N)?N:null,oe=!!$&&this.mutatedKeys.has($.key),Oe=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Pe=!1;$&&Y?$.data.isEqual(Y.data)?oe!==Oe&&(r.track({type:3,doc:Y}),Pe=!0):this.Hu($,Y)||(r.track({type:2,doc:Y}),Pe=!0,(w&&this.Gu(Y,w)>0||C&&this.Gu(Y,C)<0)&&(m=!0)):!$&&Y?(r.track({type:0,doc:Y}),Pe=!0):$&&!Y&&(r.track({type:1,doc:$}),Pe=!0,(w||C)&&(m=!0)),Pe&&(Y?(d=d.add(Y),u=Oe?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((C,A)=>function(N,$){const Y=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return Y(N)-Y($)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new Jm(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new vx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Bt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Ex(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Ix(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Bt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Jm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class sN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oN{constructor(e){this.key=e,this.nc=!1}}class aN{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new Ka(m=>NE(m),up),this.rc=new Map,this.oc=new Set,this.uc=new tr(qe.comparator),this.cc=new Map,this.ac=new eT,this.hc={},this.lc=new Map,this.fc=tu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function uN(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,me.Z)(function*(n,e){const t=uS(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield zm(t.localStore,ci(e));t.isPrimaryClient&&lD(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield BT(t,e,r,"current"===m,d.resumeToken)}return o}),UT.apply(this,arguments)}function BT(n,e,t,r,o){return jT.apply(this,arguments)}function jT(){return jT=(0,me.Z)(function*(n,e,t,r,o){n._c=(N,$,Y)=>{return(oe=(0,me.Z)(function*(Oe,Pe,St,Pt){let Lt=Pe.view.Wu(St);Lt.$i&&(Lt=yield oD(Oe.localStore,Pe.query,!1).then(({documents:Gt})=>Pe.view.Wu(Gt,Lt)));const Vt=Pt&&Pt.targetChanges.get(Pe.targetId),kt=Pe.view.applyChanges(Lt,Oe.isPrimaryClient,Vt);return QT(Oe,Pe.targetId,kt.Xu),kt.snapshot}),function(Oe,Pe,St,Pt){return oe.apply(this,arguments)})(n,N,$,Y);var oe};const u=yield oD(n.localStore,e,!0),d=new Dx(e,u.Hi),m=d.Wu(u.documents),w=yp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=d.applyChanges(m,n.isPrimaryClient,w);QT(n,t,C.Xu);const A=new sN(e,t,d);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),jT.apply(this,arguments)}function cN(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,me.Z)(function*(n,e){const t=Ge(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!up(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),s0(t.remoteStore,r.targetId),Xm(t,r.targetId)}).catch(ks))):(Xm(t,r.targetId),yield qm(t.localStore,r.targetId,!0))}),$T.apply(this,arguments)}function HT(){return HT=(0,me.Z)(function*(n,e,t){const r=cS(n);try{const o=yield function(u,d){const m=Ge(u),w=kn.now(),C=d.reduce(($,Y)=>$.add(Y.key),Bt());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Y=is(),oe=Bt();return m.Gi.getEntries($,C).next(Oe=>{Y=Oe,Y.forEach((Pe,St)=>{St.isValidDocument()||(oe=oe.add(Pe))})}).next(()=>m.localDocuments.getOverlayedDocuments($,Y)).next(Oe=>{A=Oe;const Pe=[];for(const St of d){const Pt=OA(St,A.get(St.key).overlayedDocument);null!=Pt&&Pe.push(new Za(St.key,Pt,wb(Pt.value.mapValue),Mn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,Pe,d)}).next(Oe=>{N=Oe;const Pe=Oe.applyToLocalDocumentSet(A,oe);return m.documentOverlayCache.saveOverlays($,Oe.batchId,Pe)})}).then(()=>({batchId:N.batchId,changes:Am(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.hc[u.currentUser.toKey()];w||(w=new tr(Mt)),w=w.insert(d,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Cl(r,o.changes),yield Zm(r.remoteStore)}catch(o){const u=Ym(o,"Failed to persist write");t.reject(u)}}),HT.apply(this,arguments)}function Cx(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,me.Z)(function*(n,e){const t=Ge(n);try{const r=yield MR(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?Dt(d.nc):o.removedDocuments.size>0&&(Dt(d.nc),d.nc=!1))}),yield Cl(t,r,e)}catch(r){yield ks(r)}}),GT.apply(this,arguments)}function bx(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=Ge(u);m.onlineState=d;let w=!1;m.queries.forEach((C,A)=>{for(const N of A.listeners)N.bu(d)&&(w=!0)}),w&&LT(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dN(n,e,t){return zT.apply(this,arguments)}function zT(){return zT=(0,me.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new tr(qe.comparator);d=d.insert(u,En.newNoDocument(u,wt.min()));const m=Bt().add(u),w=new uh(wt.min(),new Map,new vn(Mt),d,m);yield Cx(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),JT(r)}else yield qm(r.localStore,e,!1).then(()=>Xm(r,e,t)).catch(ks)}),zT.apply(this,arguments)}function hN(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield xR(t.localStore,e);YT(t,r,null),KT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Cl(t,o)}catch(o){yield ks(o)}}),qT.apply(this,arguments)}function fN(n,e,t){return WT.apply(this,arguments)}function WT(){return WT=(0,me.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,d){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,d).next(A=>(Dt(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);YT(r,e,t),KT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Cl(r,o)}catch(o){yield ks(o)}}),WT.apply(this,arguments)}function ZT(){return ZT=(0,me.Z)(function*(n,e){const t=Ge(n);Dl(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ge(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Ym(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),ZT.apply(this,arguments)}function KT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function YT(n,e,t){const r=Ge(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Xm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Tx(n,r)})}function Tx(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(s0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),JT(n))}function QT(n,e,t){for(const r of t)r instanceof Ix?(n.ac.addReference(r.key,e),gN(n,r)):r instanceof Ex?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Tx(n,r.key)):et()}function gN(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.oc.add(r),JT(n))}function JT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(Jt.fromString(e)),r=n.fc.next();n.cc.set(r,new oN(t)),n.uc=n.uc.insert(t,r),lD(n.remoteStore,new eu(ci(eh(t.path)),r,2,Vr.at))}}function Cl(n,e,t){return XT.apply(this,arguments)}function XT(){return XT=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],d=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{d.push(r._c(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const A=iT.Ci(w.targetId,C);u.push(A)}}))}),yield Promise.all(d),r.sc.Wo(o),yield(m=(0,me.Z)(function*(w,C){const A=Ge(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ie.forEach(C,$=>ie.forEach($.Si,Y=>A.persistence.referenceDelegate.addReference(N,$.targetId,Y)).next(()=>ie.forEach($.Di,Y=>A.persistence.referenceDelegate.removeReference(N,$.targetId,Y)))))}catch(N){if(!nc(N))throw N;Re("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const $=N.targetId;if(!N.fromCache){const Y=A.Ui.get($),Oe=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);A.Ui=A.Ui.insert($,Oe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),XT.apply(this,arguments)}function mN(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,me.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield ex(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(m=>{m.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Cl(t,r.ji)}var o}),eS.apply(this,arguments)}function yN(n,e){const t=Ge(n),r=t.cc.get(e);if(r&&r.nc)return Bt().add(r.key);{let o=Bt();const u=t.rc.get(e);if(!u)return o;for(const d of u){const m=t.ic.get(d);o=o.unionWith(m.view.ju)}return o}}function vN(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,me.Z)(function*(n,e){const t=Ge(n),r=yield oD(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&QT(t,e.targetId,o.Xu),o}),tS.apply(this,arguments)}function _N(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,me.Z)(function*(n,e){const t=Ge(n);return ix(t.localStore,e).then(r=>Cl(t,r))}),nS.apply(this,arguments)}function wN(n,e,t,r){return rS.apply(this,arguments)}function rS(){return rS=(0,me.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(d,m){const w=Ge(d),C=Ge(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):ie.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Zm(o.remoteStore):"acknowledged"===t||"rejected"===t?(YT(o,e,r||null),KT(o,e),m=e,Ge(Ge(o.localStore).mutationQueue).An(m)):et(),yield Cl(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),rS.apply(this,arguments)}function iS(){return iS=(0,me.Z)(function*(n,e){const t=Ge(n);if(uS(t),cS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Sx(t,r.toArray());t.dc=!0,yield MT(t.remoteStore,!0);for(const u of o)lD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Xm(t,d),qm(t.localStore,d,!0))),s0(t.remoteStore,d)}),yield o,yield Sx(t,r),function(u){const d=Ge(u);d.cc.forEach((m,w)=>{s0(d.remoteStore,w)}),d.ac.fs(),d.cc=new Map,d.uc=new tr(qe.comparator)}(t),t.dc=!1,yield MT(t.remoteStore,!1)}}),iS.apply(this,arguments)}function Sx(n,e,t){return sS.apply(this,arguments)}function sS(){return sS=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const d of e){let m;const w=r.rc.get(d);if(w&&0!==w.length){m=yield zm(r.localStore,ci(w[0]));for(const C of w){const A=r.ic.get(C),N=yield vN(r,A);N.snapshot&&u.push(N.snapshot)}}else{const C=yield rx(r.localStore,d);m=yield zm(r.localStore,C),yield BT(r,Ax(C),d,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),sS.apply(this,arguments)}function Ax(n){return Db(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function EN(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function DN(n,e,t,r){return oS.apply(this,arguments)}function oS(){return oS=(0,me.Z)(function*(n,e,t,r){const o=Ge(n);if(o.dc)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield ix(o.localStore,b_(u[0])),m=uh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Dr.EMPTY_BYTE_STRING);yield Cl(o,d,m);break}case"rejected":yield qm(o.localStore,e,!0),Xm(o,e,r);break;default:et()}}),oS.apply(this,arguments)}function CN(n,e,t){return aS.apply(this,arguments)}function aS(){return aS=(0,me.Z)(function*(n,e,t){const r=uS(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield rx(r.localStore,o),d=yield zm(r.localStore,u);yield BT(r,Ax(u),d.targetId,!1,d.resumeToken),lD(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield qm(r.localStore,o,!1).then(()=>{s0(r.remoteStore,o),Xm(r,o)}).catch(ks))}}),aS.apply(this,arguments)}function uS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dN.bind(null,e),e.sc.Wo=tN.bind(null,e.eventManager),e.sc.wc=nN.bind(null,e.eventManager),e}function cS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fN.bind(null,e),e}class xx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=n0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return XA(this.persistence,new JA,e.initialUser,this.It)}yc(e){return new YA(iD.Bs,this.It)}gc(e){return new ux}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Mx extends xx{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield cS(r.Ac.syncEngine),yield Zm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return XA(this.persistence,new JA,e.initialUser,this.It)}Tc(e,t){return new Q_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new vb(t,this.persistence);return new yb(e.asyncQueue,r)}yc(e){const t=rT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Le.withCacheSize(this.cacheSizeBytes):Le.DEFAULT;return new nT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lx(),cD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new ux}}class TN extends Mx{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof hT&&(r.sharedClientState.syncEngine={Fr:wN.bind(null,o),$r:DN.bind(null,o),Br:CN.bind(null,o),vi:EN.bind(null,o),Mr:_N.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(d){yield function IN(n,e){return iS.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=lx();if(!hT.C(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class lS{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>bx(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=mN.bind(null,r.syncEngine),yield MT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eN}createDatastore(e){const t=n0(e.databaseInfo.databaseId),r=new LR(e.databaseInfo);return new BR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>bx(this.syncEngine,m,0),d=cx.C()?new cx:new PR,new HR(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const A=new aN(r,o,u,d,m,w);return C&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ge(t);Re("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Wm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function dS(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Rx(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Nx(n){if(!qe.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ox(n){if(qe.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hD(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Px(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const kx=new Map;class Fx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Rx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class o0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new h_;switch(t.type){case"gapi":return new aE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kx.get(e);t&&(Re("ComponentProvider","Removing Datastore"),kx.delete(e),t.terminate())}(this),Promise.resolve()}}class Hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class oc extends Bi{constructor(e,t,r){super(e,t,eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new qe(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function Vx(n,e,...t){if(n=(0,Wt.m9)(n),dS("collection","path",e),n instanceof o0){const r=Jt.fromString(e,...t);return Ox(r),new oc(n,null,r)}{if(!(n instanceof Hn||n instanceof oc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Ox(r),new oc(n.firestore,null,r)}}function fD(n,e,...t){if(n=(0,Wt.m9)(n),1===arguments.length&&(e=p_.R()),dS("doc","path",e),n instanceof o0){const r=Jt.fromString(e,...t);return Nx(r),new Hn(n,null,new qe(r))}{if(!(n instanceof Hn||n instanceof oc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Nx(r),new Hn(n.firestore,n instanceof oc?n.converter:null,new qe(r))}}function Ux(n,e){return n=(0,Wt.m9)(n),e=(0,Wt.m9)(e),(n instanceof Hn||n instanceof oc)&&(e instanceof Hn||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hS(n,e){return n=(0,Wt.m9)(n),e=(0,Wt.m9)(e),n instanceof Bi&&e instanceof Bi&&n.firestore===e.firestore&&up(n._query,e._query)&&n.converter===e.converter}function Bx(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class pD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class AN{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new rN(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class RN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,d){const m=Ge(u),w=lh(m.It)+"/documents",C={documents:d.map(Y=>ch(m.It,Y))},A=yield m._o("BatchGetDocuments",w,C,d.length),N=new Map;A.forEach(Y=>{const oe=function qE(n,e){return"found"in e?function(t,r){Dt(!!r.found);const o=Ja(t,r.found.name),u=Ur(r.found.updateTime),d=new ui({mapValue:{fields:r.found.fields}});return En.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const o=Ja(t,r.missing),u=Ur(r.readTime);return En.newNoDocument(o,u)}(n,e):et()}(m.It,Y);N.set(oe.key.toString(),oe)});const $=[];return d.forEach(Y=>{const oe=N.get(Y.toString());Dt(!!oe),$.push(oe)}),$}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new fp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=qe.fromPath(o);e.mutations.push(new UE(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const d=Ge(o),m=lh(d.It)+"/documents",w={writes:u.map(C=>dh(d.It,C))};yield d.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wt.min())?Mn.exists(!1):Mn.updateTime(t):Mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mn.updateTime(t)}return Mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class NN{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new fT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new RN(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!ml(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Nb(t)}return!1}}class ON{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Fr.UNAUTHENTICATED,this.clientId=p_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Re("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Ym(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function jx(n,e){return fS.apply(this,arguments)}function fS(){return fS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield ex(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),fS.apply(this,arguments)}function $x(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield gS(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>yx(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>yx(e.remoteStore,u)),n.onlineComponents=e}),pS.apply(this,arguments)}function gS(n){return mS.apply(this,arguments)}function mS(){return mS=(0,me.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield jx(n,new xx)),n.offlineComponents}),mS.apply(this,arguments)}function gD(n){return yS.apply(this,arguments)}function yS(){return yS=(0,me.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield $x(n,new lS)),n.onlineComponents}),yS.apply(this,arguments)}function Hx(n){return gS(n).then(e=>e.persistence)}function mD(n){return gS(n).then(e=>e.localStore)}function vS(n){return gD(n).then(e=>e.remoteStore)}function _S(n){return gD(n).then(e=>e.syncEngine)}function ey(n){return wS.apply(this,arguments)}function wS(){return wS=(0,me.Z)(function*(n){const e=yield gD(n),t=e.eventManager;return t.onListen=uN.bind(null,e.syncEngine),t.onUnlisten=cN.bind(null,e.syncEngine),t}),wS.apply(this,arguments)}function zx(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new pD({next:N=>{u.enqueueAndForget(()=>kT(o,A));const $=N.docs.has(d);!$&&N.fromCache?w.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new VT(eh(d.path),C,{includeMetadataChanges:!0,Nu:!0});return OT(o,A)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}function qx(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new pD({next:N=>{u.enqueueAndForget(()=>kT(o,A)),N.fromCache&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new VT(d,C,{includeMetadataChanges:!0,Nu:!0});return OT(o,A)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}class jN{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new fT(this,"async_queue_retry"),this.Wc=()=>{const t=cD();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=cD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=cD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Lr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!nc(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,jn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=NT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&et()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function IS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class $N{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends o0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new jN,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Wx(this),this._firestoreClient.terminate()}}function Tr(n){return n._firestoreClient||Wx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Wx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new MA(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new ON(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Zx(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield jx(n,t),yield $x(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;fl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function Kx(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(Dr.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bp{constructor(e){this._methodName=e}}class yD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const JN=/^__.*__$/;class XN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Za(e,this.data,this.fieldMask,t,this.fieldTransforms):new ah(e,this.data,t,this.fieldTransforms)}}class Yx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class vD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new vD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return ID(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Qx(this.sa)&&JN.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class eO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||n0(e)}da(e,t,r,o=!1){return new vD({sa:e,methodName:t,fa:r,path:er.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Tp(n){const e=n._freezeSettings(),t=n0(n._databaseId);return new eO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _D(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);bS("Data must be an object, but it was:",d,r);const m=eM(r,d);let w,C;if(u.merge)w=new ai(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const $=TS(e,N,t);if(!d.contains($))throw new xe(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);nM(A,$)||A.push($)}w=new ai(A),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new XN(new ui(m),w,C)}class a0 extends bp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof a0}}function Jx(n,e,t){return new vD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ES extends bp{_toFieldTransform(e){return new ih(e.path,new cp)}isEqual(e){return e instanceof ES}}class tO extends bp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Jx(this,e,!0),r=this._a.map(u=>Sp(u,t)),o=new nh(r);return new ih(e.path,o)}isEqual(e){return this===e}}class nO extends bp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Jx(this,e,!0),r=this._a.map(u=>Sp(u,t)),o=new rh(r);return new ih(e.path,o)}isEqual(e){return this===e}}class rO extends bp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new lp(e.It,kE(e.It,this.wa));return new ih(e.path,t)}isEqual(e){return this===e}}function DS(n,e,t,r){const o=n.da(1,e,t);bS("Data must be an object, but it was:",o,r);const u=[],d=ui.empty();Ha(r,(w,C)=>{const A=wD(e,w,t);C=(0,Wt.m9)(C);const N=o.ca(A);if(C instanceof a0)u.push(A);else{const $=Sp(C,N);null!=$&&(u.push(A),d.set(A,$))}});const m=new ai(u);return new Yx(d,m,o.fieldTransforms)}function CS(n,e,t,r,o,u){const d=n.da(1,e,t),m=[TS(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(TS(e,u[$])),w.push(u[$+1]);const C=[],A=ui.empty();for(let $=m.length-1;$>=0;--$)if(!nM(C,m[$])){const Y=m[$];let oe=w[$];oe=(0,Wt.m9)(oe);const Oe=d.ca(Y);if(oe instanceof a0)C.push(Y);else{const Pe=Sp(oe,Oe);null!=Pe&&(C.push(Y),A.set(Y,Pe))}}const N=new ai(C);return new Yx(A,N,d.fieldTransforms)}function Xx(n,e,t,r=!1){return Sp(t,n.da(r?4:3,e))}function Sp(n,e){if(tM(n=(0,Wt.m9)(n)))return bS("Unsupported field value:",e,n),eM(n,e);if(n instanceof bp)return function(t,r){if(!Qx(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Sp(d,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Wt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kE(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=kn.fromDate(t);return{timestampValue:_p(r.It,o)}}if(t instanceof kn){const o=new kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_p(r.It,o)}}if(t instanceof yD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:kb(r.It,t._byteString)};if(t instanceof Hn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:F_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${hD(t)}`)}(n,e)}function eM(n,e){const t={};return fo(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ha(n,(r,o)=>{const u=Sp(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function tM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof kn||n instanceof yD||n instanceof ac||n instanceof Hn||n instanceof bp)}function bS(n,e,t){if(!tM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=hD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function TS(n,e,t){if((e=(0,Wt.m9)(e))instanceof bl)return e._internalPath;if("string"==typeof e)return wD(n,e);throw ID("Field path arguments must be of type string or ",n,!1,void 0,t)}const iO=new RegExp("[~\\*/\\[\\]]");function wD(n,e,t){if(e.search(iO)>=0)throw ID(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bl(...e.split("."))._internalPath}catch{throw ID(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ID(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(ce.INVALID_ARGUMENT,m+n+w)}function nM(n,e){return n.some(t=>t.isEqual(e))}class u0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ED("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sO extends u0{data(){return super.data()}}function ED(n,e){return"string"==typeof e?wD(n,e):e instanceof bl?e._internalPath:e._delegate._internalPath}function rM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c0{}function mh(n,...e){for(const t of e)n=t._apply(n);return n}class oO extends c0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Tp(e.firestore),r=function(o,u,d,m,w,C,A){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){cM(A,C);const Y=[];for(const oe of A)Y.push(uM(m,o,oe));N={arrayValue:{values:Y}}}else N=uM(m,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||cM(A,C),N=Xx(d,"where",A,"in"===C||"not-in"===C);const $=Cr.create(w,C,N);return function(Y,oe){if(oe.dt()){const Pe=Cm(Y);if(null!==Pe&&!Pe.isEqual(oe.field))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${oe.field.toString()}'`);const St=D_(Y);null!==St&&lM(0,oe.field,St)}const Oe=function(Pe,St){for(const Pt of Pe.filters)if(St.indexOf(Pt.op)>=0)return Pt.op;return null}(Y,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(oe.op));if(null!==Oe)throw new xe(ce.INVALID_ARGUMENT,Oe===oe.op?`Invalid query. You cannot use more than one '${oe.op.toString()}' filter.`:`Invalid query. You cannot use '${oe.op.toString()}' filters with '${Oe.toString()}' filters.`)}(o,$),$}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Bi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Wa(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class uO extends c0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Xd(o,u);return function(m,w){if(null===D_(m)){const C=Cm(m);null!==C&&lM(0,C,w.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Bi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Wa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class iM extends c0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Bi(e.firestore,e.converter,ap(e._query,this.Ia,this.Ta))}}class sM extends c0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=aM(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(o=t,new Wa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class oM extends c0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=aM(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(o=t,new Wa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function aM(n,e,t,r){if(t[0]=(0,Wt.m9)(t[0]),t[0]instanceof u0)return function(o,u,d,m,w){if(!m)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const A of th(o))if(A.field.isKeyField())C.push(rc(u,m.key));else{const N=m.data.field(A.field);if(pm(N))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=A.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}C.push(N)}return new rs(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Tp(n.firestore);return function(u,d,m,w,C,A){const N=u.explicitOrderBy;if(C.length>N.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Y=0;Y<C.length;Y++){const oe=C[Y];if(N[Y].field.isKeyField()){if("string"!=typeof oe)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof oe}`);if(!bm(u)&&-1!==oe.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${oe}' contains a slash.`);const Oe=u.path.child(Jt.fromString(oe));if(!qe.isDocumentKey(Oe))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Pe=new qe(Oe);$.push(rc(d,Pe))}else{const Oe=Xx(m,w,oe);$.push(Oe)}}return new rs($,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function uM(n,e,t){if("string"==typeof(t=(0,Wt.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bm(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!qe.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rc(n,new qe(r))}if(t instanceof Hn)return rc(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hD(t)}.`)}function cM(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function lM(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class SS{convertValue(e,t="none"){switch(yl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return Ha(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new yD($n(e.latitude),$n(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_E(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(np(e));default:return null}}convertTimestamp(e){const t=Ga(e);return new kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);Dt(QE(r));const o=new Zo(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||jn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function DD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class mO extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}class Ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tl extends u0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new l0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ED("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class l0 extends Tl{data(e={}){return super.data(e)}}class yh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ap(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new l0(this._firestore,this._userDataWriter,r.key,r,new Ap(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new l0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ap(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new l0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ap(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:yO(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function dM(n,e){return n instanceof Tl&&e instanceof Tl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof yh&&e instanceof yh&&n._firestore===e._firestore&&hS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class vh extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function hM(n,e,t){n=nn(n,Hn);const r=nn(n.firestore,Gn),o=DD(n.converter,e,t);return ty(r,[_D(Tp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Mn.none())])}function fM(n,e,t,...r){n=nn(n,Hn);const o=nn(n.firestore,Gn),u=Tp(o);let d;return d="string"==typeof(e=(0,Wt.m9)(e))||e instanceof bl?CS(u,"updateDoc",n._key,e,t,r):DS(u,"updateDoc",n._key,e),ty(o,[d.toMutation(n._key,Mn.exists(!0))])}function pM(n,...e){var t,r,o;n=(0,Wt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||IS(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(IS(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,A;if(n instanceof Hn)C=nn(n.firestore,Gn),A=eh(n._key.path),w={next:N=>{e[d]&&e[d](AS(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=nn(n,Bi);C=nn(N.firestore,Gn),A=N._query;const $=new vh(C);w={next:Y=>{e[d]&&e[d](new yh(C,$,N,Y))},error:e[d+1],complete:e[d+2]},rM(n._query)}return function(N,$,Y,oe){const Oe=new pD(oe),Pe=new VT($,Oe,Y);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return OT(yield ey(N),Pe)})),()=>{Oe.bc(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return kT(yield ey(N),Pe)}))}}(Tr(C),A,m,w)}function ty(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function lN(n,e,t){return HT.apply(this,arguments)}(yield _S(t),r,o)})),o.promise}(Tr(n),e)}function AS(n,e,t){const r=t.docs.get(e._key),o=new vh(n);return new Tl(n,o,e._key,r,new Ap(t.hasPendingWrites,t.fromCache),e.converter)}const SO={maxAttempts:5};class gM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tp(e)}set(e,t,r){this._verifyNotCommitted();const o=_h(e,this._firestore),u=DD(o.converter,t,r),d=_D(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Mn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=_h(e,this._firestore);let d;return d="string"==typeof(t=(0,Wt.m9)(t))||t instanceof bl?CS(this._dataReader,"WriteBatch.update",u._key,t,r,o):DS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_h(e,this._firestore);return this._mutations=this._mutations.concat(new fp(t._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _h(n,e){if((n=(0,Wt.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class AO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tp(e)}get(e){const t=_h(e,this._firestore),r=new mO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new u0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new u0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=_h(e,this._firestore),u=DD(o.converter,t,r),d=_D(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=_h(e,this._firestore);let d;return d="string"==typeof(t=(0,Wt.m9)(t))||t instanceof bl?CS(this._dataReader,"Transaction.update",u._key,t,r,o):DS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=_h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_h(e,this._firestore),r=new vh(this._firestore);return super.get(e).then(o=>new Tl(this._firestore,r,t._key,o._document,new Ap(!1,!1),t.converter))}}function xS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yM(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function vM(){if(!function fm(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){zd=Os.SDK_VERSION,(0,Os._registerComponent)(new ja.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Gn(new f_(t.getProvider("auth-internal")),new uE(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Os.registerVersion)(u_,"3.7.2",n),(0,Os.registerVersion)(u_,"3.7.2","esm2017")}();class d0{constructor(e){this._delegate=e}static fromBase64String(e){return vM(),new d0(ac.fromBase64String(e))}static fromUint8Array(e){return yM(),new d0(ac.fromUint8Array(e))}toBase64(){return vM(),this._delegate.toBase64()}toUint8Array(){return yM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function MS(n){return function LO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class VO{enableIndexedDbPersistence(e,t){return function GN(n,e){Kx(n=nn(n,Gn));const t=Tr(n),r=n._freezeSettings(),o=new lS;return Zx(t,o,new Mx(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function zN(n){Kx(n=nn(n,Gn));const e=Tr(n),t=n._freezeSettings(),r=new lS;return Zx(e,r,new TN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qN(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Fs.C())return Promise.resolve();const o=r+"main";yield Fs.delete(o)}),function(r){return t.apply(this,arguments)})(rT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _M{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Lx(n,e,t,r={}){var o;const u=(n=nn(n,o0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&fl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Fr.MOCK_USER;else{d=(0,Wt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Fr(w)}n._authCredentials=new db(new d_(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function ZN(n){return function PN(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Hx(n),t=yield vS(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o._u.delete(0),r0(o)}(t)}))}(Tr(n=nn(n,Gn)))}(this._delegate)}disableNetwork(){return function KN(n){return function kN(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Hx(n),t=yield vS(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=Ge(o);u._u.add(0),yield Wm(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Tr(n=nn(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Rx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function WN(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function pN(n,e){return ZT.apply(this,arguments)}(yield _S(e),t)})),t.promise}(Tr(n=nn(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function TO(n,e){return function VN(n,e){const t=new pD(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield ey(n),o=t,Ge(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield ey(n),o=t,void Ge(r).Ru.delete(o);var r,o}))}}(Tr(n=nn(n,Gn)),IS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ny(this,Vx(this._delegate,e))}catch(t){throw os(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xo(this,fD(this._delegate,e))}catch(t){throw os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,function SN(n,e){if(n=nn(n,o0),dS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,(t=e,new Wa(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function xO(n,e,t){n=nn(n,Gn);const r=Object.assign(Object.assign({},SO),t);return function(o){if(o.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const m=new Lr;return o.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const w=yield function Gx(n){return gD(n).then(e=>e.datastore)}(o);new NN(o.asyncQueue,w,d,u,m).run()})),m.promise}(Tr(n),o=>e(new AO(n,o)),r)}(this._delegate,t=>e(new wM(this,t)))}batch(){return Tr(this._delegate),new IM(new gM(this._delegate,e=>ty(this._delegate,e)))}loadBundle(e){return function YN(n,e){const t=Tr(n=nn(n,Gn)),r=new $N;return function UN(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return Bx(w,C);if(w instanceof ArrayBuffer)return Bx(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new AN(w,d);var w}(t,n0(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function bN(n,e,t){const r=Ge(n);var o;(o=(0,me.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function($,Y){const oe=Ge($),Oe=Ur(Y.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Pe=>oe.Ns.getBundleMetadata(Pe,Y.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(Oe)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(wx(w));const C=new iN(w,u.localStore,d.It);let A=yield d.mc();for(;A;){const $=yield C.Fu(A);$&&m._updateProgress($),A=yield d.mc()}const N=yield C.complete();return yield Cl(u,N.Lu,void 0),yield function($,Y){const oe=Ge($);return oe.persistence.runTransaction("Save bundle","readwrite",Oe=>oe.Ns.saveBundleMetadata(Oe,Y))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return fl("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield _S(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function QN(n,e){return function BN(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield mD(n),e)}))}(Tr(n=nn(n,Gn)),e).then(t=>t?new Bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new as(this,t):null)}}class CD extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new d0(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xo.forKey(t,this.firestore,null)}}class wM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}get(e){const t=Mp(e);return this._delegate.get(t).then(r=>new h0(this._firestore,new Tl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Mp(e);return r?(xS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Mp(e);return this._delegate.delete(t),this}}class IM{constructor(e){this._delegate=e}set(e,t,r){const o=Mp(e);return r?(xS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Mp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new l0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new f0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new xp(e,new CD(e),t),o.set(t,u)),u}}xp.INSTANCES=new WeakMap;class Xo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xo(t,new Hn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Xo(t,new Hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ny(this.firestore,Vx(this._delegate,e))}catch(t){throw os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Wt.m9)(e))instanceof Hn&&Ux(this._delegate,e)}set(e,t){t=xS("DocumentReference.set",t);try{return t?hM(this._delegate,e,t):hM(this._delegate,e)}catch(r){throw os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?fM(this._delegate,e):fM(this._delegate,e,t,...r)}catch(o){throw os(o,"updateDoc()","DocumentReference.update()")}}delete(){return function CO(n){return ty(nn(n.firestore,Gn),[new fp(n._key,Mn.none())])}(this._delegate)}onSnapshot(...e){const t=EM(e),r=DM(e,o=>new h0(this.firestore,new Tl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return pM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function _O(n){n=nn(n,Hn);const e=nn(n.firestore,Gn),t=Tr(e),r=new vh(e);return function FN(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield function(w,C){const A=Ge(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Ym(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield mD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Tl(e,r,n._key,o,new Ap(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function wO(n){n=nn(n,Hn);const e=nn(n.firestore,Gn);return zx(Tr(e),n._key,{source:"server"}).then(t=>AS(e,n,t))}(this._delegate):function vO(n){n=nn(n,Hn);const e=nn(n.firestore,Gn);return zx(Tr(e),n._key).then(t=>AS(e,n,t))}(this._delegate),t.then(r=>new h0(this.firestore,new Tl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Xo(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}function os(n,e,t){return n.message=n.message.replace(e,t),n}function EM(n){for(const e of n)if("object"==typeof e&&!MS(e))return e;return{}}function DM(n,e){var t,r;let o;return o=MS(n[0])?n[0]:MS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class h0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dM(this._delegate,e._delegate)}}class f0 extends h0{data(e){const t=this._delegate.data(e);return function oE(n,e){n||et()}(void 0!==t),t}}class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}where(e,t,r){try{return new as(this.firestore,mh(this._delegate,function aO(n,e,t){const r=e,o=ED("where",n);return new oO(o,r,t)}(e,t,r)))}catch(o){throw os(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new as(this.firestore,mh(this._delegate,function cO(n,e="asc"){const t=e,r=ED("orderBy",n);return new uO(r,t)}(e,t)))}catch(r){throw os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new as(this.firestore,mh(this._delegate,function lO(n){return Px("limit",n),new iM("limit",n,"F")}(e)))}catch(t){throw os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new as(this.firestore,mh(this._delegate,function dO(n){return Px("limitToLast",n),new iM("limitToLast",n,"L")}(e)))}catch(t){throw os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new as(this.firestore,mh(this._delegate,function hO(...n){return new sM("startAt",n,!0)}(...e)))}catch(t){throw os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new as(this.firestore,mh(this._delegate,function fO(...n){return new sM("startAfter",n,!1)}(...e)))}catch(t){throw os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new as(this.firestore,mh(this._delegate,function pO(...n){return new oM("endBefore",n,!1)}(...e)))}catch(t){throw os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new as(this.firestore,mh(this._delegate,function gO(...n){return new oM("endAt",n,!0)}(...e)))}catch(t){throw os(t,"endAt()","Query.endAt()")}}isEqual(e){return hS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function EO(n){n=nn(n,Bi);const e=nn(n.firestore,Gn),t=Tr(e),r=new vh(e);return function LN(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield oD(o,u,!0),w=new Dx(u,m.Hi),C=w.Wu(m.documents),A=w.applyChanges(C,!1);d.resolve(A.snapshot)}catch(m){const w=Ym(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield mD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new yh(e,r,n,o))}(this._delegate):"server"===e?.source?function DO(n){n=nn(n,Bi);const e=nn(n.firestore,Gn),t=Tr(e),r=new vh(e);return qx(t,n._query,{source:"server"}).then(o=>new yh(e,r,n,o))}(this._delegate):function IO(n){n=nn(n,Bi);const e=nn(n.firestore,Gn),t=Tr(e),r=new vh(e);return rM(n._query),qx(t,n._query).then(o=>new yh(e,r,n,o))}(this._delegate),t.then(r=>new RS(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=EM(e),r=DM(e,o=>new RS(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return pM(this._delegate,t,r)}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}class BO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new f0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class RS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new f0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new BO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new f0(this._firestore,r))})}isEqual(e){return dM(this._delegate,e._delegate)}}class ny extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xo(this.firestore,e):null}doc(e){try{return new Xo(this.firestore,void 0===e?fD(this._delegate):fD(this._delegate,e))}catch(t){throw os(t,"doc()","CollectionReference.doc()")}}add(e){return function bO(n,e){const t=nn(n.firestore,Gn),r=fD(n),o=DD(n.converter,e);return ty(t,[_D(Tp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Xo(this.firestore,t))}isEqual(e){return Ux(this._delegate,e._delegate)}withConverter(e){return new ny(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}function Mp(n){return nn(n,Hn)}class NS{constructor(...e){this._delegate=new bl(...e)}static documentId(){return new NS(er.keyField().canonicalString())}isEqual(e){return(e=(0,Wt.m9)(e))instanceof bl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function RO(){return new ES("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rp(e)}static delete(){const e=function MO(){return new a0("deleteField")}();return e._methodName="FieldValue.delete",new Rp(e)}static arrayUnion(...e){const t=function NO(...n){return new tO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rp(t)}static arrayRemove(...e){const t=function OO(...n){return new nO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rp(t)}static increment(e){const t=function PO(n){return new rO("increment",n)}(e);return t._methodName="FieldValue.increment",new Rp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const jO={Firestore:_M,GeoPoint:yD,Timestamp:kn,Blob:d0,Transaction:wM,WriteBatch:IM,DocumentReference:Xo,DocumentSnapshot:h0,Query:as,QueryDocumentSnapshot:f0,QuerySnapshot:RS,CollectionReference:ny,FieldPath:NS,FieldValue:Rp,setLogLevel:function UO(n){!function c_(n){tc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function HO(n){(function $O(n,e){n.INTERNAL.registerComponent(new ja.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},jO)))})(n,(e,t)=>new _M(e,t,new VO)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(hv.Z);var GO=k(6451),bD=k(5363),zO=k(6063);class qO extends ei.x{constructor(e=1/0,t=1/0,r=zO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var WO=k(3099);function CM(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,WO.B)({connector:()=>new qO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function bM(n,e){return(0,Ro.m)(e)?Bn(()=>n,e):Bn(()=>n)}var OS=k(9468);k(5867);const SM=new Map,JO={activated:!1,tokenObservers:[]},XO={initialized:!1,enabled:!1};function di(n){return SM.get(n)||JO}function ea(n,e){SM.set(n,e)}function SD(){return XO}class iP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Wt.BH,yield function sP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Wt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const us=new Wt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xM(n){if(!di(n).activated)throw us.create("use-before-activation",{appName:n.name})}function LS(n,e){return VS.apply(this,arguments)}function VS(){return VS=(0,me.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Y=yield d.getHeartbeatsHeader();Y&&(u["X-Firebase-Client"]=Y)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,C;try{w=yield fetch(n,m)}catch(Y){throw us.create("fetch-network-error",{originalErrorMessage:null===(r=Y)||void 0===r?void 0:r.message})}if(200!==w.status)throw us.create("fetch-status-error",{httpStatus:w.status});try{C=yield w.json()}catch(Y){throw us.create("fetch-parse-error",{originalErrorMessage:null===(o=Y)||void 0===o?void 0:o.message})}const A=C.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const N=1e3*Number(A[1]),$=Date.now();return{token:C.token,expireTimeMillis:$+N,issuedAtTimeMillis:$}}),VS.apply(this,arguments)}function cP(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const p0="firebase-app-check-store";let MD=null;function RM(){return MD||(MD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(us.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(p0,{keyPath:"compositeKey"})}}catch(r){e(us.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),MD)}function US(){return US=(0,me.Z)(function*(n,e){const r=(yield RM()).transaction(p0,"readwrite"),u=r.objectStore(p0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(us.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),US.apply(this,arguments)}const g0=new es.Yd("@firebase/app-check");function $S(n,e){return(0,Wt.hl)()?function fP(n,e){return function NM(n,e){return US.apply(this,arguments)}(function PM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{g0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kM(){return SD().enabled}function FM(){return GS.apply(this,arguments)}function GS(){return GS=(0,me.Z)(function*(){const n=SD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),GS.apply(this,arguments)}const _P={error:"UNKNOWN_ERROR"};function wP(n){return Wt.US.encodeString(JSON.stringify(n),!1)}function RD(n){return zS.apply(this,arguments)}function zS(){return zS=(0,me.Z)(function*(n,e=!1){const t=n.app;xM(t);const r=di(t);let u,o=r.token;if(o&&!ry(o)&&(ea(t,Object.assign(Object.assign({},r),{token:void 0})),o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(ry(w)?o=w:yield $S(t,void 0))}if(!e&&o&&ry(o))return{token:o.token};let m,d=!1;if(kM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=LS(cP(t,yield FM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield $S(t,w),ea(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?g0.warn(w.message):g0.error(w),u=w}return o?u?m=ry(o)?{token:o.token,internalError:u}:UM(u):(m={token:o.token},ea(t,Object.assign(Object.assign({},r),{token:o})),yield $S(t,o)):m=UM(u),d&&VM(t,m),m}),zS.apply(this,arguments)}function WS(n,e){const t=di(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ea(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function LM(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function IP(n){const{app:e}=n;return new iP((0,me.Z)(function*(){let r;if(r=di(e).token?yield RD(n,!0):yield RD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ea(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function VM(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ry(n){return n.expireTimeMillis-Date.now()>0}function UM(n){return{token:wP(_P),error:n}}class EP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)WS(this.app,t.next);return Promise.resolve()}}const WM="app-check-internal";!function FP(){(0,Os._registerComponent)(new ja.wA("app-check",n=>function DP(n,e){return new EP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(WM).initialize()})),(0,Os._registerComponent)(new ja.wA(WM,n=>function CP(n){return{getToken:e=>RD(n,e),addTokenListener:e=>function qS(n,e,t,r){const{app:o}=n,u=di(o),d={next:t,error:r,type:e};if(ea(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&ry(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),LM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>LM(n))}(n,"INTERNAL",e),removeTokenListener:e=>WS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Os.registerVersion)("@firebase/app-check","0.5.16")}();class QS{constructor(){return(0,Cn.vb)("app-check")}}typeof window<"u"&&window;var jP=k(127);const KM=new p.OlP("angularfire2.auth.use-emulator"),YM=new p.OlP("angularfire2.auth.settings"),QM=new p.OlP("angularfire2.auth.tenant-id"),JM=new p.OlP("angularfire2.auth.langugage-code"),XM=new p.OlP("angularfire2.auth.use-device-language"),eR=new p.OlP("angularfire.auth.persistence"),tR=(n,e,t,r,o,u,d,m)=>(0,Fi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,A]of Object.entries(d))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let nR=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,N,$,Y){const oe=new ei.x,Oe=ot(void 0).pipe((0,bD.Q)(d.outsideAngular),Bn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,1277)))),(0,at.U)(()=>(0,Fi.on)(t,u,r)),(0,at.U)(Pe=>tR(Pe,u,m,C,A,N,w,$)),CM({bufferSize:1,refCount:!1}));if(hr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ot(null);else{Oe.pipe(ee()).subscribe();const St=Oe.pipe(Bn(Vt=>Vt.getRedirectResult().then(kt=>kt,()=>null)),Cn.iC,CM({bufferSize:1,refCount:!1})),Pt=Oe.pipe(Bn(Vt=>new Nr.y(kt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onAuthStateChanged(Gt=>kt.next(Gt),Gt=>kt.error(Gt),()=>kt.complete()))})))),Lt=Oe.pipe(Bn(Vt=>new Nr.y(kt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onIdTokenChanged(Gt=>kt.next(Gt),Gt=>kt.error(Gt),()=>kt.complete()))}))));this.authState=St.pipe(bM(Pt),(0,OS.R)(d.outsideAngular),(0,bD.Q)(d.insideAngular)),this.user=St.pipe(bM(Lt),(0,OS.R)(d.outsideAngular),(0,bD.Q)(d.insideAngular)),this.idToken=this.user.pipe(Bn(Vt=>Vt?(0,cn.D)(Vt.getIdToken()):ot(null))),this.idTokenResult=this.user.pipe(Bn(Vt=>Vt?(0,cn.D)(Vt.getIdTokenResult()):ot(null))),this.credential=(0,GO.T)(St,oe,this.authState.pipe(D(Vt=>!Vt))).pipe((0,at.U)(Vt=>Vt?.user?Vt:null),(0,OS.R)(d.outsideAngular),(0,bD.Q)(d.insideAngular))}return(0,Fi.pX)(this,Oe,u,{spy:{apply:(Pe,St,Pt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&Pt.then(Lt=>oe.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Fi.Dh),p.LFG(Fi.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Cn.HU),p.LFG(KM,8),p.LFG(YM,8),p.LFG(QM,8),p.LFG(JM,8),p.LFG(XM,8),p.LFG(eR,8),p.LFG(QS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function rR(n,e){return function HP(n,e=qC.z){return new Nr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function XS(n,e){return rR(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function OD(n,e){return XS(n,e).pipe(Lu(void 0),ol(),(0,at.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(A=>A.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function iR(n,e,t){return OD(n,t).pipe(bt((r,o)=>function zP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function qP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return eA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return eA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function si(n,e=Ds.y){return n=n??al,(0,vr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Yn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,at.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function eA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function sR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class oR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=OD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Lu(void 0),ol(),D(([r,o])=>o.length>0||!r),(0,at.U)(([r,o])=>o),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sR(e);return iR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return XS(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new aR(this.ref.doc(e),this.afs)}}class aR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=lR(r,t);return new oR(o,u,this.afs)}snapshotChanges(){return function GP(n,e){return rR(n,e).pipe(Lu(void 0),ol(),(0,at.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,cn.D)(this.ref.get(e)).pipe(Cn.iC)}}class WP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?OD(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),D(t=>t.length>0),Cn.iC):OD(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sR(e);return iR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return XS(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Cn.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(Cn.iC)}}const uR=new p.OlP("angularfire2.enableFirestorePersistence"),cR=new p.OlP("angularfire2.firestore.persistenceSettings"),ZP=new p.OlP("angularfire2.firestore.settings"),KP=new p.OlP("angularfire2.firestore.use-emulator");function lR(n,e=(t=>t)){return{query:e(n),ref:n}}let dR=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,N,$,Y,oe,Oe,Pe,St,Pt){this.schedulers=w;const Lt=(0,Fi.on)(t,m,r),Vt=A;N&&tR(Lt,m,$,oe,Oe,Pe,Y,St),[this.firestore,this.persistenceEnabled$]=(0,Fi.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const kt=m.runOutsideAngular(()=>Lt.firestore());if(u&&kt.settings(u),Vt&&kt.useEmulator(...Vt),o&&!hr(d)){const Gt=()=>{try{return(0,cn.D)(kt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Wr){return typeof console<"u"&&console.warn(Wr),ot(!1)}};return[kt,m.runOutsideAngular(Gt)]}return[kt,ot(!1)]},[u,Vt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=lR(o,r),m=this.schedulers.ngZone.run(()=>u);return new oR(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new WP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new aR(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Fi.Dh),p.LFG(Fi.xv,8),p.LFG(uR,8),p.LFG(ZP,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Cn.HU),p.LFG(cR,8),p.LFG(KP,8),p.LFG(nR,8),p.LFG(KM,8),p.LFG(YM,8),p.LFG(QM,8),p.LFG(JM,8),p.LFG(XM,8),p.LFG(eR,8),p.LFG(QS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YP=(()=>{class n{constructor(){jP.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:uR,useValue:!0},{provide:cR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[dR]}),n})(),tA=(()=>{class n{constructor(t){this.angularFirestore=t}getStudentDoc(t){return this.angularFirestore.collection("student-collection").doc(t).valueChanges()}getStudentList(){return this.angularFirestore.collection("student-collection").snapshotChanges()}createStudent(t){return new Promise((r,o)=>{this.angularFirestore.collection("student-collection").add(t).then(u=>{console.log(u)},u=>o(u))})}deleteStudent(t){return this.angularFirestore.collection("student-collection").doc(t.id).delete()}updateStudent(t,r){return this.angularFirestore.collection("student-collection").doc(r).update({name:t.name,email:t.email,student_course:t.student_course,fees:t.fees})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(dR))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QP=(()=>{class n{constructor(t,r,o){this.formBuilder=t,this.studentService=r,this.router=o,this.studentForm=this.formBuilder.group({name:[""],email:[""],student_course:[""],fees:[""]})}ngOnInit(){}onSubmit(){this.studentService.createStudent(this.studentForm.value),this.router.navigate(["list-student"])}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(bd),p.Y36(tA),p.Y36(pr))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-create-student"]],decls:31,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["for",""],["type","text","placeholder","full name","required","","formControlName","name",1,"form-control"],["type","email","placeholder","Email","required","","formControlName","email",1,"form-control"],["name","","id","","formControlName","student_course","required","",1,"form-control","form-select","form-select-lg","mb-3"],["value","B-Tech","selected",""],["value","BCA"],["value","HCA"],["value","M-Tech"],["type","number","placeholder","fees","required","","formControlName","fees",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","reset",1,"btn","btn-danger"]],template:function(t,r){1&t&&(p.TgZ(0,"form",0),p.NdJ("ngSubmit",function(){return r.onSubmit()}),p.TgZ(1,"div",1)(2,"label",2),p._uU(3,"Name"),p.qZA(),p._UZ(4,"input",3),p.qZA(),p.TgZ(5,"div",1)(6,"label",2),p._uU(7,"Email"),p.qZA(),p._UZ(8,"input",4),p.qZA(),p.TgZ(9,"div",1)(10,"label",2),p._uU(11,"Student Course"),p.qZA(),p.TgZ(12,"select",5)(13,"option",6),p._uU(14,"B-Tech"),p.qZA(),p.TgZ(15,"option",7),p._uU(16,"BCA"),p.qZA(),p.TgZ(17,"option",8),p._uU(18,"HCA"),p.qZA(),p.TgZ(19,"option",9),p._uU(20,"M-Tech"),p.qZA()()(),p.TgZ(21,"div",1)(22,"label",2),p._uU(23,"Fees"),p.qZA(),p._UZ(24,"input",10),p.qZA(),p.TgZ(25,"div",1)(26,"button",11),p._uU(27,"create"),p.qZA(),p._uU(28," \xa0\xa0\xa0\xa0 "),p.TgZ(29,"button",12),p._uU(30,"reset"),p.qZA()()()),2&t&&(p.Q6J("formGroup",r.studentForm),p.xp6(26),p.Q6J("disabled",!r.studentForm.valid))},dependencies:[iv,qw,ao,tf,Pg,sl,uf,Ag,bf,Dd,il]}),n})(),JP=(()=>{class n{constructor(t,r,o,u){this.studentServise=t,this.formBuilder=r,this.act=o,this.router=u,this.editForm=this.formBuilder.group({name:[""],email:[""],student_course:[""],fees:[""]})}ngOnInit(){const t=this.act.snapshot.paramMap.get("id");this.studentServise.getStudentDoc(t).subscribe(r=>{this.studentRef=r,this.editForm=this.formBuilder.group({name:[this.studentRef.name],email:[this.studentRef.email],student_course:[this.studentRef.student_course],fees:[this.studentRef.fees]})})}onSubmit(){const t=this.act.snapshot.paramMap.get("id");this.studentServise.updateStudent(this.editForm.value,t),this.router.navigate(["list-student"])}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(tA),p.Y36(bd),p.Y36(Fo),p.Y36(pr))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-edit-student"]],decls:31,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["for",""],["type","text","placeholder","full name","required","","formControlName","name",1,"form-control"],["type","email","placeholder","Email","required","","formControlName","email",1,"form-control"],["name","","id","","formControlName","student_course","required","",1,"form-control","form-select","form-select-lg","mb-3"],["value","B-Tech","selected",""],["value","BCA"],["value","HCA"],["value","M-Tech"],["type","number","placeholder","fees","required","","formControlName","fees",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","reset",1,"btn","btn-danger"]],template:function(t,r){1&t&&(p.TgZ(0,"form",0),p.NdJ("ngSubmit",function(){return r.onSubmit()}),p.TgZ(1,"div",1)(2,"label",2),p._uU(3,"Name"),p.qZA(),p._UZ(4,"input",3),p.qZA(),p.TgZ(5,"div",1)(6,"label",2),p._uU(7,"Email"),p.qZA(),p._UZ(8,"input",4),p.qZA(),p.TgZ(9,"div",1)(10,"label",2),p._uU(11,"Student Course"),p.qZA(),p.TgZ(12,"select",5)(13,"option",6),p._uU(14,"B-Tech"),p.qZA(),p.TgZ(15,"option",7),p._uU(16,"BCA"),p.qZA(),p.TgZ(17,"option",8),p._uU(18,"HCA"),p.qZA(),p.TgZ(19,"option",9),p._uU(20,"M-Tech"),p.qZA()()(),p.TgZ(21,"div",1)(22,"label",2),p._uU(23,"Fees"),p.qZA(),p._UZ(24,"input",10),p.qZA(),p.TgZ(25,"div",1)(26,"button",11),p._uU(27,"update"),p.qZA(),p._uU(28," \xa0\xa0\xa0\xa0 "),p.TgZ(29,"button",12),p._uU(30,"reset"),p.qZA()()()),2&t&&(p.Q6J("formGroup",r.editForm),p.xp6(26),p.Q6J("disabled",!r.editForm.valid))},dependencies:[iv,qw,ao,tf,Pg,sl,uf,Ag,bf,Dd,il]}),n})();function XP(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"tr")(1,"th",3),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td")(12,"span",4),p.NdJ("click",function(){const u=p.CHM(t).$implicit,d=p.oxw();return p.KtG(d.removeStudent(u))}),p._uU(13,"Delete"),p.qZA(),p._uU(14," \xa0 "),p.TgZ(15,"span",5),p._uU(16,"Edit"),p.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;p.xp6(2),p.Oqu(r+1),p.xp6(2),p.Oqu(t.name),p.xp6(2),p.Oqu(t.email),p.xp6(2),p.Oqu(t.student_course),p.xp6(2),p.Oqu(t.fees),p.xp6(5),p.MGl("routerLink","/update-student/",t.id,"")}}const ek=[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:QP},{path:"list-student",component:(()=>{class n{constructor(t){this.studentService=t}ngOnInit(){this.studentService.getStudentList().subscribe(t=>{this.Student=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}removeStudent(t){confirm("Are you sure to delete"+t.name)&&this.studentService.deleteStudent(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(tA))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-list-stusdent"]],decls:17,vars:1,consts:[[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,r){1&t&&(p.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),p._uU(4,"#"),p.qZA(),p.TgZ(5,"th",1),p._uU(6,"Name"),p.qZA(),p.TgZ(7,"th",1),p._uU(8,"Email"),p.qZA(),p.TgZ(9,"th",1),p._uU(10,"Student Course"),p.qZA(),p.TgZ(11,"th",1),p._uU(12,"Fees"),p.qZA(),p.TgZ(13,"th",1),p._uU(14,"Action"),p.qZA()()(),p.TgZ(15,"tbody"),p.YNc(16,XP,17,6,"tr",2),p.qZA()()),2&t&&(p.xp6(16),p.Q6J("ngForOf",r.Student))},dependencies:[$s,vd]}),n})()},{path:"update-student/:id",component:JP}];let tk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[ew.forRoot(ek),ew]}),n})(),nk=(()=>{class n{constructor(){this.title="studentCrud"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-item"],["routerLink","/create","routerLinkActive","active",1,"nav-link"],["routerLink","/list-student","routerLinkActive","active",1,"nav-link"],[1,"container","mt-5"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),p._uU(3,"Rougecode"),p.qZA(),p.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),p._uU(8,"add Student"),p.qZA()(),p.TgZ(9,"li",5)(10,"a",7),p._uU(11,"view Student"),p.qZA()()()()()(),p.TgZ(12,"div",8),p._UZ(13,"router-outlet"),p.qZA())},dependencies:[ka,Qh,Jh],styles:[".navbar-brand[_ngcontent-%COMP%]{color:#b8860b}"]}),n})();const hR_firebaseConfig={apiKey:"AIzaSyAvZBZNIogNATQvK7zRPqUb-rMNcJzU5AI",authDomain:"studentdata-42559.firebaseapp.com",projectId:"studentdata-42559",storageBucket:"studentdata-42559.appspot.com",messagingSenderId:"557869668304",appId:"1:557869668304:web:7093fbb8736f3cecc10bd5"};let rk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[nk]}),n.\u0275inj=p.cJS({imports:[Mc,tk,Fi.hO.initializeApp(hR_firebaseConfig),YP,GC,tI]}),n})();(0,p.G48)(),Mu().bootstrapModule(rk).catch(n=>console.error(n))},5867:(ut,Te,k)=>{k.d(Te,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=k(9681);(0,p.registerVersion)("firebase","9.13.0","app")},127:(ut,Te,k)=>{k.d(Te,{Z:()=>p.Z});var p=k(3942);p.Z.registerVersion("firebase","9.13.0","app-compat")},1277:(ut,Te,k)=>{k.r(Te);var p=k(5861),X=k(3942),O=k(2090),se=k(9681),re=k(1877),le=k(655),ue=k(4859);const we=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new re.Yd("@firebase/auth");function it(y,...h){Ye.logLevel<=re.in.ERROR&&Ye.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function Se(y,...h){throw $e(y,...h)}function ve(y,...h){return $e(y,...h)}function Ie(y,h,g){const _=Object.assign(Object.assign({},Xe()),{[h]:g});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function je(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Se(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...h){if("string"!=typeof y){const g=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return ge.create(y,...h)}function V(y,h,...g){if(!y)throw $e(h,...g)}function pe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw it(h),new Error(h)}function z(y,h){y||pe(h)}const Q=new Map;function ne(y){z(y instanceof Function,"Expected a class definition");let h=Q.get(y);return h?(z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Q.set(y,h),h)}function Ne(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ct(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(h,g){this.shortDelay=h,this.longDelay=g,z(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pn(y,h){z(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Zt{static initialize(h,g,_){this.fetchImpl=h,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Sr=new sn(3e4,6e4);function xt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function an(y,h,g,_){return ji.apply(this,arguments)}function ji(){return(ji=(0,p.Z)(function*(y,h,g,_,S={}){return hi(y,S,(0,p.Z)(function*(){let R={},G={};_&&("GET"===h?G=_:R={body:JSON.stringify(_)});const ae=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Zt.fetch()(fi(y,y.config.apiHost,g,ae),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function hi(y,h,g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,p.Z)(function*(y,h,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Qt),h);try{const S=new Zr(y),R=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw Kr(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const ae=R.ok?G.errorMessage:G.error.message,[Ue,Ke]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Kr(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ue)throw Kr(y,"email-already-in-use",G);if("USER_DISABLED"===Ue)throw Kr(y,"user-disabled",G);const gt=_[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ie(y,gt,Ke);Se(y,gt)}}catch(S){if(S instanceof O.ZR)throw S;Se(y,"network-request-failed")}})).apply(this,arguments)}function Br(y,h,g,_){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,p.Z)(function*(y,h,g,_,S={}){const R=yield an(y,h,g,_,S);return"mfaPendingCredential"in R&&Se(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function fi(y,h,g,_){const S=`${h}${g}?${_}`;return y.config.emulator?pn(y.config,S):`${y.config.apiScheme}://${S}`}class Zr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Sr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kr(y,h,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const S=ve(y,h,_);return S.customData._tokenResponse=g,S}function Ze(){return(Ze=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function mr(y,h){return cs.apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zn(y,h){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function bi(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function dn(){return(dn=(0,p.Z)(function*(y,h=!1){const g=(0,O.m9)(y),_=yield g.getIdToken(h),S=st(_);V(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,G=R?.sign_in_provider;return{claims:S,token:_,authTime:bi(ft(S.auth_time)),issuedAtTime:bi(ft(S.iat)),expirationTime:bi(ft(S.exp)),signInProvider:G||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function st(y){var h;const[g,_,S]=y.split(".");if(void 0===g||void 0===_||void 0===S)return it("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(_);return R?JSON.parse(R):(it("Failed to decode base64 JWT payload"),null)}catch(R){return it("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function cr(y,h){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,p.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&jr(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function jr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ct{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),_)}iteration(){var h=this;return(0,p.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(g=_)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class ls{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=bi(this.lastLoginAt),this.creationTime=bi(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xt(y){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,p.Z)(function*(y){var h;const g=y.auth,_=yield y.getIdToken(),S=yield cr(y,zn(g,{idToken:_}));V(S?.users.length,g,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const G=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?Je(R.providerUserInfo):[],ae=xr(y.providerData,G),gt=!!y.isAnonymous&&!(y.email&&R.passwordHash||ae?.length),ht={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ae,metadata:new ls(R.createdAt,R.lastLoginAt),isAnonymous:gt};Object.assign(y,ht)})).apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(y){const h=(0,O.m9)(y);yield Xt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function xr(y,h){return[...y.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}function Je(y){return y.map(h=>{var{providerId:g}=h,_=(0,le._T)(h,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Qe(){return(Qe=(0,p.Z)(function*(y,h){const g=yield hi(y,{},(0,p.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,G=fi(y,S,"/v1/token",`key=${R}`),ae=yield y._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(G,{method:"POST",headers:ae,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function rn(y){const h=st(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var _=this;return(0,p.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var _=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:G}=yield function De(y,h){return Qe.apply(this,arguments)}(h,g);_.updateTokensAndExpiration(S,R,Number(G))})()}updateTokensAndExpiration(h,g,_){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,g){const{refreshToken:_,accessToken:S,expirationTime:R}=g,G=new _t;return _&&(V("string"==typeof _,"internal-error",{appName:h}),G.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:h}),G.accessToken=S),R&&(V("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return pe("not implemented")}}function mt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Rt{constructor(h){var{uid:g,auth:_,stsTokenManager:S}=h,R=(0,le._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ct(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ls(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,p.Z)(function*(){const _=yield cr(g,g.stsTokenManager.getToken(g.auth,h));return V(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(h){return function Fn(y){return dn.apply(this,arguments)}(this,h)}reload(){return function en(y){return qn.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Rt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var _=this;return(0,p.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield Xt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,p.Z)(function*(){const g=yield h.getIdToken();return yield cr(h,function ta(y,h){return Ze.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var _,S,R,G,ae,Ue,Ke,gt;const ht=null!==(_=g.displayName)&&void 0!==_?_:void 0,on=null!==(S=g.email)&&void 0!==S?S:void 0,ri=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Fa=null!==(G=g.photoURL)&&void 0!==G?G:void 0,_y=null!==(ae=g.tenantId)&&void 0!==ae?ae:void 0,Zc=null!==(Ue=g._redirectEventId)&&void 0!==Ue?Ue:void 0,dg=null!==(Ke=g.createdAt)&&void 0!==Ke?Ke:void 0,fd=null!==(gt=g.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:hg,emailVerified:wy,isAnonymous:Hu,providerData:La,stsTokenManager:zh}=g;V(hg&&zh,h,"internal-error");const qh=_t.fromJSON(this.name,zh);V("string"==typeof hg,h,"internal-error"),mt(ht,h.name),mt(on,h.name),V("boolean"==typeof wy,h,"internal-error"),V("boolean"==typeof Hu,h,"internal-error"),mt(ri,h.name),mt(Fa,h.name),mt(_y,h.name),mt(Zc,h.name),mt(dg,h.name),mt(fd,h.name);const Vo=new Rt({uid:hg,auth:h,email:on,emailVerified:wy,displayName:ht,isAnonymous:Hu,photoURL:Fa,phoneNumber:ri,tenantId:_y,stsTokenManager:qh,createdAt:dg,lastLoginAt:fd});return La&&Array.isArray(La)&&(Vo.providerData=La.map(Gu=>Object.assign({},Gu))),Zc&&(Vo._redirectEventId=Zc),Vo}static _fromIdTokenResponse(h,g,_=!1){return(0,p.Z)(function*(){const S=new _t;S.updateFromServerResponse(g);const R=new Rt({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield Xt(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,_){var S=this;return(0,p.Z)(function*(){S.storage[g]=_})()}_get(g){var _=this;return(0,p.Z)(function*(){const S=_.storage[g];return void 0===S?null:S})()}_remove(g){var _=this;return(0,p.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function q(y,h,g){return`firebase:${y}:${h}:${g}`}class _e{constructor(h,g,_){this.persistence=h,this.auth=g,this.userKey=_;const{config:S,name:R}=this.auth;this.fullUserKey=q(this.userKey,S.apiKey,R),this.fullPersistenceKey=q("persistence",S.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Rt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,p.Z)(function*(){if(g.persistence===h)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,_="authUser"){return(0,p.Z)(function*(){if(!g.length)return new _e(ne(L),h,_);const S=(yield Promise.all(g.map(function(){var Ke=(0,p.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let R=S[0]||ne(L);const G=q(_,h.config.apiKey,h.name);let ae=null;for(const Ke of g)try{const gt=yield Ke._get(G);if(gt){const ht=Rt._fromJSON(h,gt);Ke!==R&&(ae=ht),R=Ke;break}}catch{}const Ue=S.filter(Ke=>Ke._shouldAllowMigration);return R._shouldAllowMigration&&Ue.length?(R=Ue[0],ae&&(yield R._set(G,ae.toJSON())),yield Promise.all(g.map(function(){var Ke=(0,p.Z)(function*(gt){if(gt!==R)try{yield gt._remove(G)}catch{}});return function(gt){return Ke.apply(this,arguments)}}())),new _e(R,h,_)):new _e(R,h,_)})()}}function K(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(ln(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ze(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Be(h))return"Blackberry";if(He(h))return"Webos";if(lt(h))return"Safari";if((h.includes("chrome/")||Kt(h))&&!h.includes("edge/"))return"Chrome";if(zt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ze(y=(0,O.z$)()){return/firefox\//i.test(y)}function lt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Kt(y=(0,O.z$)()){return/crios\//i.test(y)}function ln(y=(0,O.z$)()){return/iemobile/i.test(y)}function zt(y=(0,O.z$)()){return/android/i.test(y)}function Be(y=(0,O.z$)()){return/blackberry/i.test(y)}function He(y=(0,O.z$)()){return/webos/i.test(y)}function Ft(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Us(y=(0,O.z$)()){return Ft(y)||zt(y)||He(y)||Be(y)||/windows phone/i.test(y)||ln(y)}function ds(y,h=[]){let g;switch(y){case"Browser":g=K((0,O.z$)());break;case"Worker":g=`${K((0,O.z$)())}-${y}`;break;default:g=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${_}`}class po{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const _=R=>new Promise((G,ae)=>{try{G(h(R))}catch(Ue){ae(Ue)}});_.onAbort=g,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,p.Z)(function*(){var _;if(g.auth.currentUser===h)return;const S=[];try{for(const R of g.queue)yield R(h),R.onAbort&&S.push(R.onAbort)}catch(R){S.reverse();for(const G of S)try{G()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=R)||void 0===_?void 0:_.message})}})()}}class Nt{constructor(h,g,_){this.app=h,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bs(this),this.idTokenSubscription=new Bs(this),this.beforeStateQueue=new po(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,g){var _=this;return g&&(this._popupRedirectResolver=ne(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var S,R;if(!_._deleted&&(_.persistenceManager=yield _e.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,p.Z)(function*(){var _;const S=yield g.assertedPersistence.getCurrentUser();let R=S,G=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ae=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,Ue=R?._redirectEventId,Ke=yield g.tryRedirectSignIn(h);(!ae||ae===Ue)&&Ke?.user&&(R=Ke.user,G=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(G)try{yield g.beforeStateQueue.runMiddleware(R)}catch(ae){R=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ae))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return V(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var g=this;return(0,p.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,p.Z)(function*(){var _;try{yield Xt(h)}catch(S){if("auth/network-request-failed"!==(null===(_=S)||void 0===_?void 0:_.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,p.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(h,g=!1){var _=this;return(0,p.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,p.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,_){return this.registerStateListener(this.authStateSubscription,h,g,_)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,_){return this.registerStateListener(this.idTokenSubscription,h,g,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var _=this;return(0,p.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const _=h&&ne(h)||g._popupRedirectResolver;V(_,g,"argument-error"),g.redirectPersistenceManager=yield _e.create(g,[ne(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,p.Z)(function*(){var _,S;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,p.Z)(function*(){if(h===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,_,S){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,_,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ds(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var g;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function _n(y){return(0,O.m9)(y)}class Bs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function hs(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class lr{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return pe("not implemented")}_getIdTokenResponse(h){return pe("not implemented")}_linkToIdToken(h,g){return pe("not implemented")}_getReauthenticationResolver(h){return pe("not implemented")}}function Un(y,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:resetPassword",xt(y,h))})).apply(this,arguments)}function un(y,h){return uc.apply(this,arguments)}function uc(){return(uc=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function cc(y,h){return js.apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:update",xt(y,h))})).apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithPassword",xt(y,h))})).apply(this,arguments)}function ps(y,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:sendOobCode",xt(y,h))})).apply(this,arguments)}function dr(y,h){return lc.apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(y,h){return ps(y,h)})).apply(this,arguments)}function rr(y,h){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(y,h){return ps(y,h)})).apply(this,arguments)}function iu(y,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(y,h){return ps(y,h)})).apply(this,arguments)}function dc(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(y,h){return ps(y,h)})).apply(this,arguments)}function Sl(){return(Sl=(0,p.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,h))})).apply(this,arguments)}function hc(){return(hc=(0,p.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,h))})).apply(this,arguments)}class fc extends lr{constructor(h,g,_,S=null){super("password",_),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new fc(h,g,"password")}static _fromEmailAndCode(h,g,_=null){return new fc(h,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,p.Z)(function*(){switch(g.signInMethod){case"password":return function na(y,h){return $s.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function wh(y,h){return Sl.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Se(h,"internal-error")}})()}_linkToIdToken(h,g){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return un(h,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ih(y,h){return hc.apply(this,arguments)}(h,{idToken:g,email:_._email,oobCode:_._password});default:Se(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Zn(y,h){return Al.apply(this,arguments)}function Al(){return(Al=(0,p.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithIdp",xt(y,h))})).apply(this,arguments)}class $i extends lr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new $i(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Se("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=g,R=(0,le._T)(g,["providerId","signInMethod"]);if(!_||!S)return null;const G=new $i(_,S);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return Zn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Zn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Zn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function Op(y,h){return xl.apply(this,arguments)}function xl(){return(xl=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:sendVerificationCode",xt(y,h))})).apply(this,arguments)}function gs(){return(gs=(0,p.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,h))})).apply(this,arguments)}function Ml(){return(Ml=(0,p.Z)(function*(y,h){const g=yield Br(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,h));if(g.temporaryProof)throw Kr(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const kp={USER_NOT_FOUND:"user-not-found"};function Rl(){return(Rl=(0,p.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),kp)})).apply(this,arguments)}class ms extends lr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new ms({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new ms({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function pc(y,h){return gs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Pp(y,h){return Ml.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Fp(y,h){return Rl.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:_,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:R}=h;return _||g||S||R?new ms({verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:R}):null}}class su{constructor(h){var g,_,S,R,G,ae;const Ue=(0,O.zd)((0,O.pd)(h)),Ke=null!==(g=Ue.apiKey)&&void 0!==g?g:null,gt=null!==(_=Ue.oobCode)&&void 0!==_?_:null,ht=function Nl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ue.mode)&&void 0!==S?S:null);V(Ke&&gt&&ht,"argument-error"),this.apiKey=Ke,this.operation=ht,this.code=gt,this.continueUrl=null!==(R=Ue.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Ue.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ae=Ue.tenantId)&&void 0!==ae?ae:null}static parseLink(h){const g=function Ol(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||g||h||y}(h);try{return new su(g)}catch{return null}}}let Ai=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return fc._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const S=su.parseLink(_);return V(S,"argument-error"),fc._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Hi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Gi extends Hi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Hs extends Gi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return V("providerId"in g&&"signInMethod"in g,"argument-error"),$i._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),$i._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Hs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Hs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:R,nonce:G,providerId:ae}=h;if(!_&&!S&&!g&&!R||!ae)return null;try{return new Hs(ae)._credential({idToken:g,accessToken:_,nonce:G,pendingToken:R})}catch{return null}}}let ia=(()=>{class y extends Gi{constructor(){super("facebook.com")}static credential(g){return $i._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ou=(()=>{class y extends Gi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return $i._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:S}=g;if(!_&&!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),gc=(()=>{class y extends Gi{constructor(){super("github.com")}static credential(g){return $i._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class sa extends lr{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Zn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Zn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Zn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:R}=g;return _&&S&&R&&_===S?new sa(_,R):null}static _create(h,g){return new sa(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qr extends Hi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Qr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Qr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=sa.fromJSON(h);return V(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:_}=h;if(!g||!_)return null;try{return sa._create(_,g)}catch{return null}}}let Hr=(()=>{class y extends Gi{constructor(){super("twitter.com")}static credential(g,_){return $i._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=g;if(!_||!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function go(y,h){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,p.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signUp",xt(y,h))})).apply(this,arguments)}class hr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,_,S=!1){return(0,p.Z)(function*(){const R=yield Rt._fromIdTokenResponse(h,_,S),G=Ch(_);return new hr({user:R,providerId:G,_tokenResponse:_,operationType:g})})()}static _forOperation(h,g,_){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=Ch(_);return new hr({user:h,providerId:S,_tokenResponse:_,operationType:g})})()}}function Ch(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function bn(){return(bn=(0,p.Z)(function*(y){var h;const g=_n(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new hr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield go(g,{returnSecureToken:!0}),S=yield hr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class au extends O.ZR{constructor(h,g,_,S){var R;super(g.code,g.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,au.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,g,_,S){return new au(h,g,_,S)}}function Th(y,h,g,_){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?au._fromErrorAndOperation(y,R,h,_):R})}function Jr(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function uu(){return(uu=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y);yield qt(!0,g,h);const{providerUserInfo:_}=yield mr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=Jr(_||[]);return g.providerData=g.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function mo(y,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,p.Z)(function*(y,h,g=!1){const _=yield cr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return hr._forOperation(y,"link",_)})).apply(this,arguments)}function qt(y,h,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,p.Z)(function*(y,h,g){yield Xt(h);const S=!1===y?"provider-already-linked":"no-such-provider";V(Jr(h.providerData).has(g)===y,h.auth,S)})).apply(this,arguments)}function Gs(y,h){return lu.apply(this,arguments)}function lu(){return(lu=(0,p.Z)(function*(y,h,g=!1){var _;const{auth:S}=y,R="reauthenticate";try{const G=yield cr(y,Th(S,R,h,y),g);V(G.idToken,S,"internal-error");const ae=st(G.idToken);V(ae,S,"internal-error");const{sub:Ue}=ae;return V(y.uid===Ue,S,"user-mismatch"),hr._forOperation(y,R,G)}catch(G){throw"auth/user-not-found"===(null===(_=G)||void 0===_?void 0:_.code)&&Se(S,"user-mismatch"),G}})).apply(this,arguments)}function gi(y,h){return du.apply(this,arguments)}function du(){return(du=(0,p.Z)(function*(y,h,g=!1){const _="signIn",S=yield Th(y,_,h),R=yield hr._fromIdTokenResponse(y,_,S);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Dn(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,p.Z)(function*(y,h){return gi(_n(y),h)})).apply(this,arguments)}function hu(y,h){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y);return yield qt(!1,g,h.providerId),mo(g,h)})).apply(this,arguments)}function fu(y,h){return pu.apply(this,arguments)}function pu(){return(pu=(0,p.Z)(function*(y,h){return Gs((0,O.m9)(y),h)})).apply(this,arguments)}function mc(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,p.Z)(function*(y,h){return Br(y,"POST","/v1/accounts:signInWithCustomToken",xt(y,h))})).apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(y,h){const g=_n(y),_=yield mc(g,{token:h,returnSecureToken:!0}),S=yield hr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ce{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?jt._fromServerResponse(h,g):Se(h,"internal-error")}}class jt extends Ce{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new jt(g)}}function gu(y,h,g){var _;V((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(V(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(V(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Tn(){return(Tn=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};g&&gu(_,S,g),yield rr(_,S)})).apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(y,h,g){yield Un((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function aa(){return(aa=(0,p.Z)(function*(y,h){yield cc((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function ua(y,h){return vc.apply(this,arguments)}function vc(){return(vc=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y),_=yield Un(g,{oobCode:h}),S=_.requestType;switch(V(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,g,"internal-error");default:V(_.email,g,"internal-error")}let R=null;return _.mfaInfo&&(R=Ce._fromServerResponse(_n(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function kl(){return(kl=(0,p.Z)(function*(y,h){const{data:g}=yield ua((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(y,h,g){const _=_n(y),S=yield go(_,{returnSecureToken:!0,email:h,password:g}),R=yield hr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(g.handleCodeInApp,_,"argument-error"),g&&gu(_,S,g),yield iu(_,S)})).apply(this,arguments)}function la(){return(la=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),S=Ai.credentialWithLink(h,g||Ne());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Dn(_,S)})).apply(this,arguments)}function Vp(y,h){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:createAuthUri",xt(y,h))})).apply(this,arguments)}function da(){return(da=(0,p.Z)(function*(y,h){const _={identifier:h,continueUri:ct()?Ne():"http://localhost"},{signinMethods:S}=yield Vp((0,O.m9)(y),_);return S||[]})).apply(this,arguments)}function ha(){return(ha=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&gu(g.auth,S,h);const{email:R}=yield dr(g.auth,S);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function _u(){return(_u=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&gu(_.auth,R,g);const{email:G}=yield dc(_.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function wu(y,h){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,p.Z)(function*(y,h){return an(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Tc(){return(Tc=(0,p.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},G=yield cr(_,wu(_.auth,R));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const ae=_.providerData.find(({providerId:Ue})=>"password"===Ue);ae&&(ae.displayName=_.displayName,ae.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function Ws(y,h,g){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,p.Z)(function*(y,h,g){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const G=yield cr(y,un(_,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Gr{constructor(h,g,_={}){this.isNewUser=h,this.providerId=g,this.profile=_}}class mn extends Gr{constructor(h,g,_,S){super(h,g,_),this.username=S}}class Ll extends Gr{constructor(h,g){super(h,"facebook.com",g)}}class Sc extends mn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Ah extends Gr{constructor(h,g){super(h,"google.com",g)}}class Ac extends mn{constructor(h,g,_){super(h,"twitter.com",g,_)}}function Eu(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Kn(y){var h,g;if(!y)return null;const{providerId:_}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const G=null===(g=null===(h=st(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new Gr(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new Ll(R,S);case"github.com":return new Sc(R,S);case"google.com":return new Ah(R,S);case"twitter.com":return new Ac(R,S,y.screenName||null);case"custom":case"anonymous":return new Gr(R,null);default:return new Gr(R,_,S)}}(g)}class Ks{constructor(h,g,_){this.type=h,this.credential=g,this.auth=_}static _fromIdtoken(h,g){return new Ks("enroll",h,g)}static _fromMfaPendingCredential(h){return new Ks("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,_;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ks._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Ks._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Cu{constructor(h,g,_){this.session=h,this.hints=g,this.signInResolver=_}static _fromError(h,g){const _=_n(h),S=g.customData._serverResponse,R=(S.mfaInfo||[]).map(ae=>Ce._fromServerResponse(_,ae));V(S.mfaPendingCredential,_,"internal-error");const G=Ks._fromMfaPendingCredential(S.mfaPendingCredential);return new Cu(G,R,function(){var ae=(0,p.Z)(function*(Ue){const Ke=yield Ue._process(_,G);delete S.mfaInfo,delete S.mfaPendingCredential;const gt=Object.assign(Object.assign({},S),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(g.operationType){case"signIn":const ht=yield hr._fromIdTokenResponse(_,g.operationType,gt);return yield _._updateCurrentUser(ht.user),ht;case"reauthenticate":return V(g.user,_,"internal-error"),hr._forOperation(g.user,g.operationType,gt);default:Se(_,"internal-error")}});return function(Ue){return ae.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,p.Z)(function*(){return g.signInResolver(h)})()}}function bu(y,h){return an(y,"POST","/v2/accounts/mfaEnrollment:start",xt(y,h))}class xh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>Ce._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new xh(h)}getSession(){var h=this;return(0,p.Z)(function*(){return Ks._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var _=this;return(0,p.Z)(function*(){const S=h,R=yield _.getSession(),G=yield cr(_.user,S._process(_.user.auth,R,g));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(h){var g=this;return(0,p.Z)(function*(){var _;const S="string"==typeof h?h:h.uid,R=yield g.user.getIdToken(),G=yield cr(g.user,function jl(y,h){return an(y,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(y,h))}(g.user.auth,{idToken:R,mfaEnrollmentId:S}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ae})=>ae!==S),yield g.user._updateTokensIfNecessary(G);try{yield g.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(_=ae)||void 0===_?void 0:_.code))throw ae}})()}}const wo=new WeakMap,Ys="__sak";class Su{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ys,"1"),this.storage.removeItem(Ys),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const pa=(()=>{class y extends Su{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fa(){const y=(0,O.z$)();return lt(y)||Ft(y)}()&&function gn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Us(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),R=this.localCache[_];S!==R&&g(_,R,S)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((ae,Ue,Ke)=>{this.notifyListeners(ae,Ke)});const S=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(S);if(g.newValue!==ae)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!_)return}const R=()=>{const ae=this.storage.getItem(S);!_&&this.localCache[S]===ae||this.notifyListeners(S,ae)},G=this.storage.getItem(S);!function Wn(){return(0,O.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var S=()=>super._set,R=this;return(0,p.Z)(function*(){yield S().call(R,g,_),R.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,S=this;return(0,p.Z)(function*(){const R=yield _().call(S,g);return S.localCache[g]=JSON.stringify(R),R})()}_remove(g){var _=()=>super._remove,S=this;return(0,p.Z)(function*(){yield _().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),Mi=(()=>{class y extends Su{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let Gl=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(R=>R.isListeningto(g));if(_)return _;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,p.Z)(function*(){const S=g,{eventId:R,eventType:G,data:ae}=S.data,Ue=_.handlersMap[G];if(!Ue?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Ke=Array.from(Ue).map(function(){var ht=(0,p.Z)(function*(on){return on(S.origin,ae)});return function(on){return ht.apply(this,arguments)}}()),gt=yield function ma(y){return Promise.all(y.map(function(){var h=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return h.apply(this,arguments)}}()))}(Ke);S.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:gt})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ya(y="",h=10){let g="";for(let _=0;_<h;_++)g+=Math.floor(10*Math.random());return y+g}class xc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,_=50){var S=this;return(0,p.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,ae;return new Promise((Ue,Ke)=>{const gt=ya("",20);R.port1.start();const ht=setTimeout(()=>{Ke(new Error("unsupported_event"))},_);ae={messageChannel:R,onMessage(on){const ri=on;if(ri.data.eventId===gt)switch(ri.data.status){case"ack":clearTimeout(ht),G=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ue(ri.data.response);break;default:clearTimeout(ht),clearTimeout(G),Ke(new Error("invalid_response"))}}},S.handlers.add(ae),R.port1.addEventListener("message",ae.onMessage),S.target.postMessage({eventType:h,eventId:gt,data:g},[R.port2])}).finally(()=>{ae&&S.removeMessageHandler(ae)})})()}}function Nn(){return window}function Au(){return typeof Nn().WorkerGlobalScope<"u"&&"function"==typeof Nn().importScripts}function va(){return(va=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _s="firebaseLocalStorageDb",ws="firebaseLocalStorage",Mc="fbase_key";class Js{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function _a(y,h){return y.transaction([ws],h?"readwrite":"readonly").objectStore(ws)}function Eo(){const y=indexedDB.open(_s,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(ws,{keyPath:Mc})}catch(S){g(S)}}),y.addEventListener("success",(0,p.Z)(function*(){const _=y.result;_.objectStoreNames.contains(ws)?h(_):(_.close(),yield function ql(){const y=indexedDB.deleteDatabase(_s);return new Js(y).toPromise()}(),h(yield Eo()))}))})}function Ki(y,h,g){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,p.Z)(function*(y,h,g){const _=_a(y,!0).put({[Mc]:h,value:g});return new Js(_).toPromise()})).apply(this,arguments)}function wa(){return(wa=(0,p.Z)(function*(y,h){const g=_a(y,!1).get(h),_=yield new Js(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Xs(y,h){const g=_a(y,!0).delete(h);return new Js(g).toPromise()}const Do=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Eo()),g.db})()}_withRetries(g){var _=this;return(0,p.Z)(function*(){let S=0;for(;;)try{const R=yield _._openDb();return yield g(R)}catch(R){if(S++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return Au()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=Gl._getInstance(function Mu(){return Au()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,p.Z)(function*(S,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(S,R){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,p.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var _,S;if(g.activeServiceWorker=yield function Qs(){return va.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new xc(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,p.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function xu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Eo();return yield Ki(g,Ys,"1"),yield Xs(g,Ys),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,p.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var S=this;return(0,p.Z)(function*(){return S._withPendingWrite((0,p.Z)(function*(){return yield S._withRetries(R=>Ki(R,g,_)),S.localCache[g]=_,S.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,p.Z)(function*(){const S=yield _._withRetries(R=>function Ru(y,h){return wa.apply(this,arguments)}(R,g));return _.localCache[g]=S,S})()}_remove(g){var _=this;return(0,p.Z)(function*(){return _._withPendingWrite((0,p.Z)(function*(){return yield _._withRetries(S=>Xs(S,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const _=yield g._withRetries(G=>{const ae=_a(G,!1).getAll();return new Js(ae).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:G,value:ae}of _)R.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(ae)&&(g.notifyListeners(G,ae),S.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!R.has(G)&&(g.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Co(y,h){return an(y,"POST","/v2/accounts/mfaSignIn:start",xt(y,h))}function Is(){return(Is=(0,p.Z)(function*(y){return(yield an(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function To(y){return new Promise((h,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=S=>{const R=ve("internal-error");R.customData=S,g(R)},_.type="text/javascript",_.charset="UTF-8",function bo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Pu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ia=1e12;class hn{constructor(h){this.auth=h,this.counter=Ia,this._widgets=new Map}render(h,g){const _=this.counter;return this._widgets.set(_,new Up(h,this.auth.name,g||{})),this.counter++,_}reset(h){var g;const _=h||Ia;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ia))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,p.Z)(function*(){var _;return null===(_=g._widgets.get(h||Ia))||void 0===_||_.execute(),""})()}}class Up{constructor(h,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function iy(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bp=Pu("rcb"),sy=new sn(3e4,6e4);class Mh{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Nn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return V(function y0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Nn().grecaptcha):new Promise((_,S)=>{const R=Nn().setTimeout(()=>{S(ve(h,"network-request-failed"))},sy.get());Nn()[Bp]=()=>{Nn().clearTimeout(R),delete Nn()[Bp];const ae=Nn().grecaptcha;if(!ae)return void S(ve(h,"internal-error"));const Ue=ae.render;ae.render=(Ke,gt)=>{const ht=Ue(Ke,gt);return this.counter++,ht},this.hostLanguage=g,_(ae)},To(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Bp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),S(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Nn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Oc{load(h){return(0,p.Z)(function*(){return new hn(h)})()}clearedOneInstance(){}}const ay="recaptcha",uy={theme:"light",type:"image"};class sr{constructor(h,g=Object.assign({},uy),_){this.parameters=g,this.type=ay,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oc:new Mh,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(g)||new Promise(R=>{const G=ae=>{!ae||(h.tokenChangeListeners.delete(G),R(ae))};h.tokenChangeListeners.add(G),h.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof h)h(g);else if("string"==typeof h){const _=Nn()[h];"function"==typeof _&&_(g)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){V(ct()&&!Au(),h.auth,"internal-error"),yield function cn(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function zr(y){return Is.apply(this,arguments)}(h.auth);V(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yi{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=ms._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function ei(){return(ei=(0,p.Z)(function*(y,h,g){const _=_n(y),S=yield Es(_,h,(0,O.m9)(g));return new yi(S,R=>Dn(_,R))})).apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);yield qt(!1,_,"phone");const S=yield Es(_.auth,h,(0,O.m9)(g));return new yi(S,R=>hu(_,R))})).apply(this,arguments)}function Nr(){return(Nr=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),S=yield Es(_.auth,h,(0,O.m9)(g));return new yi(S,R=>fu(_,R))})).apply(this,arguments)}function Es(y,h,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(y,h,g){var _;const S=yield g.verify();try{let R;if(V("string"==typeof S,y,"argument-error"),V(g.type===ay,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return V("enroll"===G.type,y,"internal-error"),(yield bu(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const ae=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(ae,y,"missing-multi-factor-info"),(yield Co(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Op(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return G}}finally{g._reset()}})).apply(this,arguments)}function Pc(){return(Pc=(0,p.Z)(function*(y,h){yield mo((0,O.m9)(y),h)})).apply(this,arguments)}let Da=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=_n(g)}verifyPhoneNumber(g,_){return Es(this.auth,g,(0,O.m9)(_))}static credential(g,_){return ms._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:S}=g;return _&&S?ms._fromTokenResponse(_,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ao(y,h){return h?ne(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ds extends lr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Zn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Zn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Zn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function at(y){return gi(y.auth,new Ds(y),y.bypassAuthState)}function Ca(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Gs(g,new Ds(y),y.bypassAuthState)}function Cs(y){return ba.apply(this,arguments)}function ba(){return(ba=(0,p.Z)(function*(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),mo(g,new Ds(y),y.bypassAuthState)})).apply(this,arguments)}class xo{constructor(h,g,_,S,R=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,p.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,p.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:R,tenantId:G,error:ae,type:Ue}=h;if(ae)return void g.reject(ae);const Ke={auth:g.auth,requestUri:_,sessionId:S,tenantId:G||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ue)(Ke))}catch(gt){g.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return at;case"linkViaPopup":case"linkViaRedirect":return Cs;case"reauthViaPopup":case"reauthViaRedirect":return Ca;default:Se(this.auth,"internal-error")}}resolve(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yn=new sn(2e3,1e4);function Mo(){return(Mo=(0,p.Z)(function*(y,h,g){const _=_n(y);je(y,h,Hi);const S=Ao(_,g);return new bs(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function Fc(){return(Fc=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);je(_.auth,h,Hi);const S=Ao(_.auth,g);return new bs(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function Ta(){return(Ta=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);je(_.auth,h,Hi);const S=Ao(_.auth,g);return new bs(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let bs=(()=>{class y extends xo{constructor(g,_,S,R,G){super(g,_,R,G),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const _=yield g.execute();return V(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,p.Z)(function*(){z(1===g.filter.length,"Popup operations only handle one event");const _=ya();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Yn.get())};g()}}return y.currentPopupAction=null,y})();const _i=new Map;class Lc extends xo{constructor(h,g,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,p.Z)(function*(){let _=_i.get(g.auth._key());if(!_){try{const R=(yield function Ro(y,h){return qr.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;_=()=>Promise.resolve(R)}catch(S){_=()=>Promise.reject(S)}_i.set(g.auth._key(),_)}return g.bypassAuthState||_i.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,_=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,g().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function qr(){return(qr=(0,p.Z)(function*(y,h){const g=Bn(h),_=Ji(y);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(g));return yield _._remove(g),S})).apply(this,arguments)}function Qi(y,h){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(y,h){return Ji(y)._set(Bn(h),"true")})).apply(this,arguments)}function Ss(y,h){_i.set(y._key(),h)}function Ji(y){return ne(y._redirectPersistence)}function Bn(y){return q("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,p.Z)(function*(y,h,g){const _=_n(y);je(y,h,Hi);const S=Ao(_,g);return yield Qi(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);je(_.auth,h,Hi);const S=Ao(_.auth,g);yield Qi(S,_.auth);const R=yield dt(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ee(){return(Ee=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);je(_.auth,h,Hi);const S=Ao(_.auth,g);yield qt(!1,_,h.providerId),yield Qi(S,_.auth);const R=yield dt(_);return S._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function tt(){return(tt=(0,p.Z)(function*(y,h){return yield _n(y)._initializationPromise,yt(y,h,!1)})).apply(this,arguments)}function yt(y,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,p.Z)(function*(y,h,g=!1){const _=_n(y),S=Ao(_,h),G=yield new Lc(_,S,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,h)),G})).apply(this,arguments)}function dt(y){return In.apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(y){const h=ya(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class No{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(g=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ni(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tt(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var _;if(h.error&&!Tt(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const _=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(As(h))}saveEventToCache(h){this.cachedEventUids.add(As(h)),this.lastProcessedEventTime=Date.now()}}function As(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Tt({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function xs(y){return ti.apply(this,arguments)}function ti(){return(ti=(0,p.Z)(function*(y,h={}){return an(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Oo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,to=/^https?/;function Rh(){return(Rh=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield xs(y);for(const g of h)try{if(Hp(g))return}catch{}Se(y,"unauthorized-domain")})).apply(this,arguments)}function Hp(y){const h=Ne(),{protocol:g,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===_}if(!to.test(g))return!1;if(Oo.test(y))return _===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const Gp=new sn(3e4,6e4);function cy(){const y=Nn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Oi=null;function Nh(y){return Oi=Oi||function Qn(y){return new Promise((h,g)=>{var _,S,R;function G(){cy(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{cy(),g(ve(y,"network-request-failed"))},timeout:Gp.get()})}if(null!==(S=null===(_=Nn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Nn().gapi)||void 0===R||!R.load){const ae=Pu("iframefcb");return Nn()[ae]=()=>{gapi.load?G():g(ve(y,"network-request-failed"))},To(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Ue=>g(Ue))}G()}}).catch(h=>{throw Oi=null,h})}(y),Oi}const zp=new sn(5e3,15e3),ly={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ph=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qp(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?pn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},S=Ph.get(y.config.apiHost);S&&(_.eid=S);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${g}?${(0,O.xO)(_).slice(1)}`}function Sa(){return Sa=(0,p.Z)(function*(y){const h=yield Nh(y),g=Nn().gapi;return V(g,y,"internal-error"),h.open({where:document.body,url:qp(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ly,dontclear:!0},_=>new Promise(function(){var S=(0,p.Z)(function*(R,G){yield _.restyle({setHideOnLeave:!1});const ae=ve(y,"network-request-failed"),Ue=Nn().setTimeout(()=>{G(ae)},zp.get());function Ke(){Nn().clearTimeout(Ue),R(_)}_.ping(Ke).then(Ke,()=>{G(ae)})});return function(R,G){return S.apply(this,arguments)}}()))}),Sa.apply(this,arguments)}const Wl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yl(y,h,g,_,S,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:se.SDK_VERSION,eventId:S};if(h instanceof Hi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,Ke]of Object.entries(R||{}))G[Ue]=Ke}if(h instanceof Gi){const Ue=h.getScopes().filter(Ke=>""!==Ke);Ue.length>0&&(G.scopes=Ue.join(","))}y.tenantId&&(G.tid=y.tenantId);const ae=G;for(const Ue of Object.keys(ae))void 0===ae[Ue]&&delete ae[Ue];return`${function Ql({config:y}){return y.emulator?pn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ae).slice(1)}`}const xa="webStorageSupport";class Pi extends class dy{constructor(h){this.factorId=h}_process(h,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,_);case"signin":return this._finalizeSignIn(h,g.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Pi(h)}_finalizeEnroll(h,g,_){return function Tu(y,h){return an(y,"POST","/v2/accounts/mfaEnrollment:finalize",xt(y,h))}(h,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Ou(y,h){return an(y,"POST","/v2/accounts/mfaSignIn:finalize",xt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Po=(()=>{class y{constructor(){}static assertion(g){return Pi._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Fh="@firebase/auth",Yp="0.20.11";class _0{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(_=>{var S;h((null===(S=_)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ma(){return window}function Ra(){return(Ra=(0,p.Z)(function*(y,h,g){var _;const{BuildInfo:S}=Ma();z(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Na(h.sessionId),G={};return Ft()?G.ibi=S.packageName:zt()?G.apn=S.packageName:Se(y,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=R,Yl(y,g,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function Vu(){return(Vu=(0,p.Z)(function*(y){const{BuildInfo:h}=Ma(),g={};Ft()?g.iosBundleId=h.packageName:zt()?g.androidPackageName=h.packageName:Se(y,"operation-not-supported-in-this-environment"),yield xs(y,g)})).apply(this,arguments)}function Xp(){return(Xp=(0,p.Z)(function*(y,h,g){const{cordova:_}=Ma();let S=()=>{};try{yield new Promise((R,G)=>{let ae=null;function Ue(){var ht;R();const on=null===(ht=_.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof on&&on(),"function"==typeof g?.close&&g.close()}function Ke(){ae||(ae=window.setTimeout(()=>{G(ve(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&Ke()}h.addPassiveListener(Ue),document.addEventListener("resume",Ke,!1),zt()&&document.addEventListener("visibilitychange",gt,!1),S=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",gt,!1),ae&&window.clearTimeout(ae)}})}finally{S()}})).apply(this,arguments)}function Na(y){return io.apply(this,arguments)}function io(){return(io=(0,p.Z)(function*(y){const h=jc(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function jc(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}(0,O.Pz)("authIdTokenMaxAge"),function I0(y){(0,se._registerComponent)(new ue.wA("auth",(h,{options:g})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=_.options;return((ae,Ue)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:ae.name}),V(!G?.includes(":"),"argument-error",{appName:ae.name});const Ke={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ds(y)},gt=new Nt(ae,Ue,Ke);return function ke(y,h){const g=h?.persistence||[],_=(Array.isArray(g)?g:[g]).map(ne);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(gt,g),gt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,_)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ue.wA("auth-internal",h=>{const g=_n(h.getProvider("auth").getImmediate());return new _0(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(Fh,Yp,function w0(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(Fh,Yp,"esm2017")}("Browser");class Vh extends No{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,p.Z)(function*(){yield h.initPromise})()}}function tg(y){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,p.Z)(function*(y){const h=yield $c()._get(so(y));return h&&(yield $c()._remove(so(y))),h})).apply(this,arguments)}function Jl(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function $c(){return ne(pa)}function so(y){return q("authEvent",y.config.apiKey,y.name)}function Xl(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function td(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function rd(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Bu(y=(0,O.z$)()){return!("file:"!==rd()&&"ionic:"!==rd()&&"capacitor:"!==rd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ag(){try{const y=self.localStorage,h=ya();if(y)return y.setItem(h,"1"),y.removeItem(h),!function og(y=(0,O.z$)()){return function ig(){return(0,O.w1)()&&11===document?.documentMode}()||function sg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return id()&&(0,O.hl)()}return!1}function id(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function sd(){return(function b0(){return"http:"===rd()||"https:"===rd()}()||(0,O.ru)()||Bu())&&!function jh(){return(0,O.b$)()||(0,O.UG)()}()&&ag()&&!id()}function Hc(){return Bu()&&typeof document<"u"}function od(){return(od=(0,p.Z)(function*(){return!!Hc()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Or={LOCAL:"local",NONE:"none",SESSION:"session"},ni=V,Ii="persistence";function ju(y){return $u.apply(this,arguments)}function $u(){return($u=(0,p.Z)(function*(y){yield y._initializationPromise;const h=zc(),g=q(Ii,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function zc(){var y;try{return(null===(y=function Gc(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const ad=V;class _r{constructor(){this.browserResolver=ne(class Kp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mi,this._completeRedirectFn=yt,this._overrideRedirectResult=Ss}_openPopup(h,g,_,S){var R=this;return(0,p.Z)(function*(){var G;z(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ae=Yl(h,g,_,Ne(),S);return function ro(y,h,g,_=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let ae="";const Ue=Object.assign(Object.assign({},Wl),{width:_.toString(),height:S.toString(),top:R,left:G}),Ke=(0,O.z$)().toLowerCase();g&&(ae=Kt(Ke)?"_blank":g),ze(Ke)&&(h=h||"http://localhost",Ue.scrollbars="yes");const gt=Object.entries(Ue).reduce((on,[ri,Fa])=>`${on}${ri}=${Fa},`,"");if(function $r(y=(0,O.z$)()){var h;return Ft(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ke)&&"_self"!==ae)return function Zp(y,h){const g=document.createElement("a");g.href=y,g.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(h||"",ae),new Vc(null);const ht=window.open(h||"",ae,gt);V(ht,y,"popup-blocked");try{ht.focus()}catch{}return new Vc(ht)}(h,ae,ya())})()}_openRedirect(h,g,_,S){var R=this;return(0,p.Z)(function*(){return yield R._originValidation(h),function mi(y){Nn().location.href=y}(Yl(h,g,_,Ne(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:R}=this.eventManagers[g];return S?Promise.resolve(S):(z(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(h){var g=this;return(0,p.Z)(function*(){const _=yield function Wp(y){return Sa.apply(this,arguments)}(h),S=new No(h);return _.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(xa,{type:xa},S=>{var R;const G=null===(R=S?.[0])||void 0===R?void 0:R[xa];void 0!==G&&g(!!G),Se(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function wi(y){return Rh.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Us()||lt()||Ft()}}),this.cordovaResolver=ne(class ed{constructor(){this._redirectPersistence=Mi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yt,this._overrideRedirectResult=Ss}_initialize(h){var g=this;return(0,p.Z)(function*(){const _=h._key();let S=g.eventManagers.get(_);return S||(S=new Vh(h),g.eventManagers.set(_,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){Se(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,_,S){var R=this;return(0,p.Z)(function*(){!function C0(y){var h,g,_,S,R,G,ae,Ue,Ke,gt;const ht=Ma();V("function"==typeof(null===(h=ht?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(g=ht?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(S=null===(_=ht?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Ue=null===(ae=null===(G=ht?.cordova)||void 0===G?void 0:G.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(gt=null===(Ke=ht?.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function vr(){_i.clear()}(),yield R._originValidation(h);const ae=function eg(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Jl(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,S);yield function Uu(y,h){return $c()._set(so(y),h)}(h,ae);const Ue=yield function ki(y,h,g){return Ra.apply(this,arguments)}(h,ae,g),Ke=yield function fy(y){const{cordova:h}=Ma();return new Promise(g=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function nr(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Ue);return function D0(y,h,g){return Xp.apply(this,arguments)}(h,G,Ke)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ko(y){return Vu.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:_,handleOpenURL:S,BuildInfo:R}=Ma(),G=setTimeout((0,p.Z)(function*(){yield tg(h),g.onEvent(td())}),500),ae=function(){var gt=(0,p.Z)(function*(ht){clearTimeout(G);const on=yield tg(h);let ri=null;on&&ht?.url&&(ri=function Bh(y,h){var g,_;const S=function On(y){const h=Xl(y),g=h.link?decodeURIComponent(h.link):void 0,_=Xl(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Xl(S).link||S||_||g||y}(h);if(S.includes("/__/auth/callback")){const R=Xl(S),G=R.firebaseError?function gy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ae=null===(_=null===(g=G?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],Ue=ae?ve(ae):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(on,ht.url)),g.onEvent(ri||td())});return function(on){return gt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ae);const Ue=S,Ke=`${R.packageName.toLowerCase()}://`;Ma().handleOpenURL=function(){var gt=(0,p.Z)(function*(ht){if(ht.toLowerCase().startsWith(Ke)&&ae({url:ht}),"function"==typeof Ue)try{Ue(ht)}catch(on){console.error(on)}});return function(ht){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Mi,this._completeRedirectFn=yt,this._overrideRedirectResult=Ss}_initialize(h){var g=this;return(0,p.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,_,S){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,_,S)})()}_openRedirect(h,g,_,S){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,_,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Hc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ad(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,p.Z)(function*(){if(h.underlyingResolver)return;const g=yield function T0(){return od.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function ud(y){return y.unwrap()}function cg(y){return Wc(y)}function Wc(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Da.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=ou;break;case"facebook.com":_=ia;break;case"github.com":_=gc;break;case"twitter.com":_=Hr;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:ae,nonce:Ue}=h;return R||G||S||ae?ae?g.startsWith("saml.")?sa._create(g,ae):$i._fromParams({providerId:g,signInMethod:g,pendingToken:ae,idToken:S,accessToken:R}):new Hs(g).credential({idToken:S,accessToken:R,rawNonce:Ue}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function or(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function $h(y,h){var g,_;const S=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new yy(y,function An(y,h){var g;const _=(0,O.m9)(y),S=h;return V(h.customData.operationType,_,"argument-error"),V(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),Cu._fromError(_,S)}(y,h));else if(S){const R=Wc(h),G=h;R&&(G.credential=R,G.tenantId=S.tenantId||void 0,G.email=S.email||void 0,G.phoneNumber=S.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:cg(g),additionalUserInfo:Eu(g),user:Xi.getOrCreate(S)}})}function Pa(y,h){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,p.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:_=>or(y,g.confirm(_))}})).apply(this,arguments)}class yy{constructor(h,g){this.resolver=g,this.auth=function qc(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return or(ud(this.auth),this.resolver.resolveSignIn(h))}}class Xi{constructor(h){this._delegate=h,this.multiFactor=function Io(y){const h=(0,O.m9)(y);return wo.has(h)||wo.set(h,xh._fromUser(h)),wo.get(h)}(h)}static getOrCreate(h){return Xi.USER_MAP.has(h)||Xi.USER_MAP.set(h,new Xi(h)),Xi.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,p.Z)(function*(){return or(g.auth,hu(g._delegate,h))})()}linkWithPhoneNumber(h,g){var _=this;return(0,p.Z)(function*(){return Pa(_.auth,function wn(y,h,g){return vi.apply(this,arguments)}(_._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,p.Z)(function*(){return or(g.auth,function Fu(y,h,g){return Ta.apply(this,arguments)}(g._delegate,h,_r))})()}linkWithRedirect(h){var g=this;return(0,p.Z)(function*(){return yield ju(_n(g.auth)),function Z(y,h,g){return function ee(y,h,g){return Ee.apply(this,arguments)}(y,h,g)}(g._delegate,h,_r)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,p.Z)(function*(){return or(g.auth,fu(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Pa(this.auth,function Ea(y,h,g){return Nr.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return or(this.auth,function $p(y,h,g){return Fc.apply(this,arguments)}(this._delegate,h,_r))}reauthenticateWithRedirect(h){var g=this;return(0,p.Z)(function*(){return yield ju(_n(g.auth)),function b(y,h,g){return function x(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,_r)})()}sendEmailVerification(h){return function Ec(y,h){return ha.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,p.Z)(function*(){return yield function Rr(y,h){return uu.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Fl(y,h){return Ws((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function qs(y,h){return Ws((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function jp(y,h){return Pc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function bc(y,h){return Tc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Dc(y,h,g){return _u.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xi.USER_MAP=new WeakMap;const Lo=V;let Gh=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Lo(S,"invalid-api-key",{appName:g.name}),Lo(S,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?_r:void 0;this._delegate=_.initialize({options:{persistence:lg(S,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function nu(y,h,g){const _=_n(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!g?.disableWarnings,R=Si(h),{host:G,port:ae}=function Vn(y){const h=Si(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const R=S[1];return{host:R,port:hs(_.substr(R.length+1))}}{const[R,G]=_.split(":");return{host:R,port:hs(G)}}}(h);_.config.emulator={url:`${R}//${G}${null===ae?"":`:${ae}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:ae,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function fs(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function Xr(y,h){return aa.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ua(this._delegate,g)}confirmPasswordReset(g,_){return function yu(y,h,g){return yo.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var S=this;return(0,p.Z)(function*(){return or(S._delegate,function ca(y,h,g){return Sn.apply(this,arguments)}(S._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function vu(y,h){return da.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Zi(y,h){return"EMAIL_SIGNIN"===su.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,p.Z)(function*(){Lo(sd(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function Me(y,h){return tt.apply(this,arguments)}(g._delegate,_r);return _?or(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Oa(y,h){_n(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,_,S){const{next:R,error:G,complete:ae}=cd(g,_,S);return this._delegate.onAuthStateChanged(R,G,ae)}onIdTokenChanged(g,_,S){const{next:R,error:G,complete:ae}=cd(g,_,S);return this._delegate.onIdTokenChanged(R,G,ae)}sendSignInLinkToEmail(g,_){return function wc(y,h,g){return zs.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function mu(y,h,g){return Tn.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,p.Z)(function*(){let S;switch(function ug(y,h){ni(Object.values(Or).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?ni(h!==Or.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?ni(h===Or.NONE,y,"unsupported-persistence-type"):id()?ni(h===Or.NONE||h===Or.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):ni(h===Or.NONE||ag(),y,"unsupported-persistence-type")}(_._delegate,g),g){case Or.SESSION:S=Mi;break;case Or.LOCAL:S=(yield ne(Do)._isAvailable())?Do:pa;break;case Or.NONE:S=L;break;default:return Se("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return or(this._delegate,function bh(y){return bn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return or(this._delegate,Dn(this._delegate,g))}signInWithCustomToken(g){return or(this._delegate,function yc(y,h){return oa.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return or(this._delegate,function xi(y,h,g){return Dn((0,O.m9)(y),Ai.credential(h,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return or(this._delegate,function Lp(y,h,g){return la.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return Pa(this._delegate,function ot(y,h,g){return ei.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,p.Z)(function*(){return Lo(sd(),_._delegate,"operation-not-supported-in-this-environment"),or(_._delegate,function kc(y,h,g){return Mo.apply(this,arguments)}(_._delegate,g,_r))})()}signInWithRedirect(g){var _=this;return(0,p.Z)(function*(){return Lo(sd(),_._delegate,"operation-not-supported-in-this-environment"),yield ju(_._delegate),function yn(y,h,g){return function Lu(y,h,g){return D.apply(this,arguments)}(y,h,g)}(_._delegate,g,_r)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function _c(y,h){return kl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Or,y})();function cd(y,h,g){let _=y;"function"!=typeof y&&({next:_,error:h,complete:g}=y);const S=_;return{next:G=>S(G&&Xi.getOrCreate(G)),error:h,complete:g}}function lg(y,h){const g=function Fo(y,h){const g=zc();if(!g)return[];const _=q(Ii,y,h);switch(g.getItem(_)){case Or.NONE:return[L];case Or.LOCAL:return[Do,Mi];case Or.SESSION:return[Mi];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(Do)&&g.push(Do),typeof window<"u")for(const _ of[pa,Mi])g.includes(_)||g.push(_);return g.includes(L)||g.push(L),g}class ld{constructor(){this.providerId="phone",this._delegate=new Da(ud(X.Z.auth()))}static credential(h,g){return Da.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}ld.PHONE_SIGN_IN_METHOD=Da.PHONE_SIGN_IN_METHOD,ld.PROVIDER_ID=Da.PROVIDER_ID;const dd=V;class hd{constructor(h,g,_=X.Z.app()){var S;dd(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new sr(h,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vy(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Gh(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ai,FacebookAuthProvider:ia,GithubAuthProvider:gc,GoogleAuthProvider:ou,OAuthProvider:Hs,SAMLAuthProvider:Qr,PhoneAuthProvider:ld,PhoneMultiFactorGenerator:Po,RecaptchaVerifier:hd,TwitterAuthProvider:Hr,Auth:Gh,AuthCredential:lr,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(X.Z)},9751:(ut,Te,k)=>{k.d(Te,{y:()=>de});var p=k(2961),X=k(727),O=k(8822),se=k(9635),re=k(2416),le=k(576),ue=k(2806);let de=(()=>{class W{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const we=new W;return we.source=this,we.operator=Ae,we}subscribe(Ae,we,Xe){const ge=function B(W){return W&&W instanceof p.Lv||function U(W){return W&&(0,le.m)(W.next)&&(0,le.m)(W.error)&&(0,le.m)(W.complete)}(W)&&(0,X.Nn)(W)}(Ae)?Ae:new p.Hp(Ae,we,Xe);return(0,ue.x)(()=>{const{operator:fe,source:Ye}=this;ge.add(fe?fe.call(ge,Ye):Ye?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(we){Ae.error(we)}}forEach(Ae,we){return new(we=he(we))((Xe,ge)=>{const fe=new p.Hp({next:Ye=>{try{Ae(Ye)}catch(it){ge(it),fe.unsubscribe()}},error:ge,complete:Xe});this.subscribe(fe)})}_subscribe(Ae){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Ae)}[O.L](){return this}pipe(...Ae){return(0,se.U)(Ae)(this)}toPromise(Ae){return new(Ae=he(Ae))((we,Xe)=>{let ge;this.subscribe(fe=>ge=fe,fe=>Xe(fe),()=>we(ge))})}}return W.create=Ve=>new W(Ve),W})();function he(W){var Ve;return null!==(Ve=W??re.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(ut,Te,k)=>{k.d(Te,{x:()=>ue});var p=k(9751),X=k(727);const se=(0,k(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),le=k(2806);let ue=(()=>{class he extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const W=new de(this,this);return W.operator=B,W}_throwIfClosed(){if(this.closed)throw new se}next(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(B)}})}error(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:W}=this;for(;W.length;)W.shift().error(B)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:W,isStopped:Ve,observers:Ae}=this;return W||Ve?X.Lc:(this.currentObservers=null,Ae.push(B),new X.w0(()=>{this.currentObservers=null,(0,re.P)(Ae,B)}))}_checkFinalizedStatuses(B){const{hasError:W,thrownError:Ve,isStopped:Ae}=this;W?B.error(Ve):Ae&&B.complete()}asObservable(){const B=new p.y;return B.source=this,B}}return he.create=(U,B)=>new de(U,B),he})();class de extends ue{constructor(U,B){super(),this.destination=U,this.source=B}next(U){var B,W;null===(W=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===W||W.call(B,U)}error(U){var B,W;null===(W=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===W||W.call(B,U)}complete(){var U,B;null===(B=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===B||B.call(U)}_subscribe(U){var B,W;return null!==(W=null===(B=this.source)||void 0===B?void 0:B.subscribe(U))&&void 0!==W?W:X.Lc}}},2961:(ut,Te,k)=>{k.d(Te,{Hp:()=>Xe,Lv:()=>W});var p=k(576),X=k(727),O=k(2416),se=k(7849);function re(){}const le=he("C",void 0,void 0);function he(Se,ve,Ie){return{kind:Se,value:ve,error:Ie}}var U=k(3410),B=k(2806);class W extends X.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,X.Nn)(ve)&&ve.add(this)):this.destination=it}static create(ve,Ie,je){return new Xe(ve,Ie,je)}next(ve){this.isStopped?Ye(function de(Se){return he("N",Se,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ye(function ue(Se){return he("E",void 0,Se)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ye(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Ae(Se,ve){return Ve.call(Se,ve)}class we{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ve)}catch(je){ge(je)}}error(ve){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ve)}catch(je){ge(je)}else ge(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ie){ge(Ie)}}}class Xe extends W{constructor(ve,Ie,je){let $e;if(super(),(0,p.m)(ve)||!ve)$e={next:ve??void 0,error:Ie??void 0,complete:je??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),$e={next:ve.next&&Ae(ve.next,V),error:ve.error&&Ae(ve.error,V),complete:ve.complete&&Ae(ve.complete,V)}):$e=ve}this.destination=new we($e)}}function ge(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Se):(0,se.h)(Se)}function Ye(Se,ve){const{onStoppedNotification:Ie}=O.v;Ie&&U.z.setTimeout(()=>Ie(Se,ve))}const it={closed:!0,next:re,error:function fe(Se){throw Se},complete:re}},727:(ut,Te,k)=>{k.d(Te,{Lc:()=>le,w0:()=>re,Nn:()=>ue});var p=k(576);const O=(0,k(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((W,Ve)=>`${Ve+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var se=k(8737);class re{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ae of B)Ae.remove(this);else B.remove(this);const{initialTeardown:W}=this;if((0,p.m)(W))try{W()}catch(Ae){U=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Ae of Ve)try{de(Ae)}catch(we){U=U??[],we instanceof O?U=[...U,...we.errors]:U.push(we)}}if(U)throw new O(U)}}add(U){var B;if(U&&U!==this)if(this.closed)de(U);else{if(U instanceof re){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(U)}}_hasParent(U){const{_parentage:B}=this;return B===U||Array.isArray(B)&&B.includes(U)}_addParent(U){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(U),B):B?[B,U]:U}_removeParent(U){const{_parentage:B}=this;B===U?this._parentage=null:Array.isArray(B)&&(0,se.P)(B,U)}remove(U){const{_finalizers:B}=this;B&&(0,se.P)(B,U),U instanceof re&&U._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const le=re.EMPTY;function ue(he){return he instanceof re||he&&"closed"in he&&(0,p.m)(he.remove)&&(0,p.m)(he.add)&&(0,p.m)(he.unsubscribe)}function de(he){(0,p.m)(he)?he():he.unsubscribe()}},2416:(ut,Te,k)=>{k.d(Te,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Te,k)=>{k.d(Te,{E:()=>X});const X=new(k(9751).y)(re=>re.complete())},8996:(ut,Te,k)=>{k.d(Te,{D:()=>ve});var p=k(8421),X=k(5363),O=k(9468),le=k(9751),de=k(2202),he=k(576),U=k(9672);function W(Ie,je){if(!Ie)throw new Error("Iterable cannot be null");return new le.y($e=>{(0,U.f)($e,je,()=>{const V=Ie[Symbol.asyncIterator]();(0,U.f)($e,je,()=>{V.next().then(pe=>{pe.done?$e.complete():$e.next(pe.value)})},0,!0)})})}var Ve=k(3670),Ae=k(8239),we=k(1144),Xe=k(6495),ge=k(2206),fe=k(4532),Ye=k(3260);function ve(Ie,je){return je?function Se(Ie,je){if(null!=Ie){if((0,Ve.c)(Ie))return function se(Ie,je){return(0,p.Xf)(Ie).pipe((0,O.R)(je),(0,X.Q)(je))}(Ie,je);if((0,we.z)(Ie))return function ue(Ie,je){return new le.y($e=>{let V=0;return je.schedule(function(){V===Ie.length?$e.complete():($e.next(Ie[V++]),$e.closed||this.schedule())})})}(Ie,je);if((0,Ae.t)(Ie))return function re(Ie,je){return(0,p.Xf)(Ie).pipe((0,O.R)(je),(0,X.Q)(je))}(Ie,je);if((0,ge.D)(Ie))return W(Ie,je);if((0,Xe.T)(Ie))return function B(Ie,je){return new le.y($e=>{let V;return(0,U.f)($e,je,()=>{V=Ie[de.h](),(0,U.f)($e,je,()=>{let pe,z;try{({value:pe,done:z}=V.next())}catch(Q){return void $e.error(Q)}z?$e.complete():$e.next(pe)},0,!0)}),()=>(0,he.m)(V?.return)&&V.return()})}(Ie,je);if((0,Ye.L)(Ie))return function it(Ie,je){return W((0,Ye.Q)(Ie),je)}(Ie,je)}throw(0,fe.z)(Ie)}(Ie,je):(0,p.Xf)(Ie)}},8421:(ut,Te,k)=>{k.d(Te,{Xf:()=>Ve});var p=k(655),X=k(1144),O=k(8239),se=k(9751),re=k(3670),le=k(2206),ue=k(4532),de=k(6495),he=k(3260),U=k(576),B=k(7849),W=k(8822);function Ve(Se){if(Se instanceof se.y)return Se;if(null!=Se){if((0,re.c)(Se))return function Ae(Se){return new se.y(ve=>{const Ie=Se[W.L]();if((0,U.m)(Ie.subscribe))return Ie.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,X.z)(Se))return function we(Se){return new se.y(ve=>{for(let Ie=0;Ie<Se.length&&!ve.closed;Ie++)ve.next(Se[Ie]);ve.complete()})}(Se);if((0,O.t)(Se))return function Xe(Se){return new se.y(ve=>{Se.then(Ie=>{ve.closed||(ve.next(Ie),ve.complete())},Ie=>ve.error(Ie)).then(null,B.h)})}(Se);if((0,le.D)(Se))return fe(Se);if((0,de.T)(Se))return function ge(Se){return new se.y(ve=>{for(const Ie of Se)if(ve.next(Ie),ve.closed)return;ve.complete()})}(Se);if((0,he.L)(Se))return function Ye(Se){return fe((0,he.Q)(Se))}(Se)}throw(0,ue.z)(Se)}function fe(Se){return new se.y(ve=>{(function it(Se,ve){var Ie,je,$e,V;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,p.KL)(Se);!(je=yield Ie.next()).done;)if(ve.next(je.value),ve.closed)return}catch(pe){$e={error:pe}}finally{try{je&&!je.done&&(V=Ie.return)&&(yield V.call(Ie))}finally{if($e)throw $e.error}}ve.complete()})})(Se,ve).catch(Ie=>ve.error(Ie))})}},6451:(ut,Te,k)=>{k.d(Te,{T:()=>le});var p=k(8189),X=k(8421),O=k(515),se=k(7669),re=k(8996);function le(...ue){const de=(0,se.yG)(ue),he=(0,se._6)(ue,1/0),U=ue;return U.length?1===U.length?(0,X.Xf)(U[0]):(0,p.J)(he)((0,re.D)(U,de)):O.E}},5403:(ut,Te,k)=>{k.d(Te,{x:()=>X});var p=k(2961);function X(se,re,le,ue,de){return new O(se,re,le,ue,de)}class O extends p.Lv{constructor(re,le,ue,de,he,U){super(re),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=le?function(B){try{le(B)}catch(W){re.error(W)}}:super._next,this._error=de?function(B){try{de(B)}catch(W){re.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ut,Te,k)=>{k.d(Te,{U:()=>O});var p=k(4482),X=k(5403);function O(se,re){return(0,p.e)((le,ue)=>{let de=0;le.subscribe((0,X.x)(ue,he=>{ue.next(se.call(re,he,de++))}))})}},8189:(ut,Te,k)=>{k.d(Te,{J:()=>O});var p=k(5577),X=k(4671);function O(se=1/0){return(0,p.z)(X.y,se)}},5577:(ut,Te,k)=>{k.d(Te,{z:()=>de});var p=k(4004),X=k(8421),O=k(4482),se=k(9672),re=k(5403),ue=k(576);function de(he,U,B=1/0){return(0,ue.m)(U)?de((W,Ve)=>(0,p.U)((Ae,we)=>U(W,Ae,Ve,we))((0,X.Xf)(he(W,Ve))),B):("number"==typeof U&&(B=U),(0,O.e)((W,Ve)=>function le(he,U,B,W,Ve,Ae,we,Xe){const ge=[];let fe=0,Ye=0,it=!1;const Se=()=>{it&&!ge.length&&!fe&&U.complete()},ve=je=>fe<W?Ie(je):ge.push(je),Ie=je=>{Ae&&U.next(je),fe++;let $e=!1;(0,X.Xf)(B(je,Ye++)).subscribe((0,re.x)(U,V=>{Ve?.(V),Ae?ve(V):U.next(V)},()=>{$e=!0},void 0,()=>{if($e)try{for(fe--;ge.length&&fe<W;){const V=ge.shift();we?(0,se.f)(U,we,()=>Ie(V)):Ie(V)}Se()}catch(V){U.error(V)}}))};return he.subscribe((0,re.x)(U,ve,()=>{it=!0,Se()})),()=>{Xe?.()}}(W,Ve,he,B)))}},5363:(ut,Te,k)=>{k.d(Te,{Q:()=>se});var p=k(9672),X=k(4482),O=k(5403);function se(re,le=0){return(0,X.e)((ue,de)=>{ue.subscribe((0,O.x)(de,he=>(0,p.f)(de,re,()=>de.next(he),le),()=>(0,p.f)(de,re,()=>de.complete(),le),he=>(0,p.f)(de,re,()=>de.error(he),le)))})}},3099:(ut,Te,k)=>{k.d(Te,{B:()=>re});var p=k(8421),X=k(7579),O=k(2961),se=k(4482);function re(ue={}){const{connector:de=(()=>new X.x),resetOnError:he=!0,resetOnComplete:U=!0,resetOnRefCountZero:B=!0}=ue;return W=>{let Ve,Ae,we,Xe=0,ge=!1,fe=!1;const Ye=()=>{Ae?.unsubscribe(),Ae=void 0},it=()=>{Ye(),Ve=we=void 0,ge=fe=!1},Se=()=>{const ve=Ve;it(),ve?.unsubscribe()};return(0,se.e)((ve,Ie)=>{Xe++,!fe&&!ge&&Ye();const je=we=we??de();Ie.add(()=>{Xe--,0===Xe&&!fe&&!ge&&(Ae=le(Se,B))}),je.subscribe(Ie),!Ve&&Xe>0&&(Ve=new O.Hp({next:$e=>je.next($e),error:$e=>{fe=!0,Ye(),Ae=le(it,he,$e),je.error($e)},complete:()=>{ge=!0,Ye(),Ae=le(it,U),je.complete()}}),(0,p.Xf)(ve).subscribe(Ve))})(W)}}function le(ue,de,...he){if(!0===de)return void ue();if(!1===de)return;const U=new O.Hp({next:()=>{U.unsubscribe(),ue()}});return de(...he).subscribe(U)}},9468:(ut,Te,k)=>{k.d(Te,{R:()=>X});var p=k(4482);function X(O,se=0){return(0,p.e)((re,le)=>{le.add(O.schedule(()=>re.subscribe(le),se))})}},8505:(ut,Te,k)=>{k.d(Te,{b:()=>re});var p=k(576),X=k(4482),O=k(5403),se=k(4671);function re(le,ue,de){const he=(0,p.m)(le)||ue||de?{next:le,error:ue,complete:de}:le;return he?(0,X.e)((U,B)=>{var W;null===(W=he.subscribe)||void 0===W||W.call(he);let Ve=!0;U.subscribe((0,O.x)(B,Ae=>{var we;null===(we=he.next)||void 0===we||we.call(he,Ae),B.next(Ae)},()=>{var Ae;Ve=!1,null===(Ae=he.complete)||void 0===Ae||Ae.call(he),B.complete()},Ae=>{var we;Ve=!1,null===(we=he.error)||void 0===we||we.call(he,Ae),B.error(Ae)},()=>{var Ae,we;Ve&&(null===(Ae=he.unsubscribe)||void 0===Ae||Ae.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):se.y}},4408:(ut,Te,k)=>{k.d(Te,{o:()=>re});var p=k(727);class X extends p.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const O={setInterval(le,ue,...de){const{delegate:he}=O;return he?.setInterval?he.setInterval(le,ue,...de):setInterval(le,ue,...de)},clearInterval(le){const{delegate:ue}=O;return(ue?.clearInterval||clearInterval)(le)},delegate:void 0};var se=k(8737);class re extends X{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){var he;if(this.closed)return this;this.state=ue;const U=this.id,B=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(B,U,de)),this.pending=!0,this.delay=de,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(B,this.id,de),this}requestAsyncId(ue,de,he=0){return O.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;null!=de&&O.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let U,he=!1;try{this.work(ue)}catch(B){he=!0,U=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Te,k)=>{k.d(Te,{v:()=>O});var p=k(6063);class X{constructor(re,le=X.now){this.schedulerActionCtor=re,this.now=le}schedule(re,le=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,le)}}X.now=p.l.now;class O extends X{constructor(re,le=X.now){super(re,le),this.actions=[],this._active=!1}flush(re){const{actions:le}=this;if(this._active)return void le.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=le.shift());if(this._active=!1,ue){for(;re=le.shift();)re.unsubscribe();throw ue}}}},4986:(ut,Te,k)=>{k.d(Te,{z:()=>O});var p=k(4408);const O=new(k(7565).v)(p.o)},6063:(ut,Te,k)=>{k.d(Te,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(ut,Te,k)=>{k.d(Te,{z:()=>p});const p={setTimeout(X,O,...se){const{delegate:re}=p;return re?.setTimeout?re.setTimeout(X,O,...se):setTimeout(X,O,...se)},clearTimeout(X){const{delegate:O}=p;return(O?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(ut,Te,k)=>{k.d(Te,{h:()=>X});const X=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Te,k)=>{k.d(Te,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Te,k)=>{k.d(Te,{_6:()=>le,jO:()=>se,yG:()=>re});var p=k(576);function O(ue){return ue[ue.length-1]}function se(ue){return(0,p.m)(O(ue))?ue.pop():void 0}function re(ue){return function X(ue){return ue&&(0,p.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function le(ue,de){return"number"==typeof O(ue)?ue.pop():de}},8737:(ut,Te,k)=>{function p(X,O){if(X){const se=X.indexOf(O);0<=se&&X.splice(se,1)}}k.d(Te,{P:()=>p})},3888:(ut,Te,k)=>{function p(X){const se=X(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(Te,{d:()=>p})},2806:(ut,Te,k)=>{k.d(Te,{O:()=>se,x:()=>O});var p=k(2416);let X=null;function O(re){if(p.v.useDeprecatedSynchronousErrorHandling){const le=!X;if(le&&(X={errorThrown:!1,error:null}),re(),le){const{errorThrown:ue,error:de}=X;if(X=null,ue)throw de}}else re()}function se(re){p.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},9672:(ut,Te,k)=>{function p(X,O,se,re=0,le=!1){const ue=O.schedule(function(){se(),le?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(ue),!le)return ue}k.d(Te,{f:()=>p})},4671:(ut,Te,k)=>{function p(X){return X}k.d(Te,{y:()=>p})},1144:(ut,Te,k)=>{k.d(Te,{z:()=>p});const p=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ut,Te,k)=>{k.d(Te,{D:()=>X});var p=k(576);function X(O){return Symbol.asyncIterator&&(0,p.m)(O?.[Symbol.asyncIterator])}},576:(ut,Te,k)=>{function p(X){return"function"==typeof X}k.d(Te,{m:()=>p})},3670:(ut,Te,k)=>{k.d(Te,{c:()=>O});var p=k(8822),X=k(576);function O(se){return(0,X.m)(se[p.L])}},6495:(ut,Te,k)=>{k.d(Te,{T:()=>O});var p=k(2202),X=k(576);function O(se){return(0,X.m)(se?.[p.h])}},8239:(ut,Te,k)=>{k.d(Te,{t:()=>X});var p=k(576);function X(O){return(0,p.m)(O?.then)}},3260:(ut,Te,k)=>{k.d(Te,{L:()=>se,Q:()=>O});var p=k(655),X=k(576);function O(re){return(0,p.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:de,done:he}=yield(0,p.qq)(ue.read());if(he)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(de)}}finally{ue.releaseLock()}})}function se(re){return(0,X.m)(re?.getReader)}},4482:(ut,Te,k)=>{k.d(Te,{A:()=>X,e:()=>O});var p=k(576);function X(se){return(0,p.m)(se?.lift)}function O(se){return re=>{if(X(re))return re.lift(function(le){try{return se(le,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ut,Te,k)=>{k.d(Te,{U:()=>O,z:()=>X});var p=k(4671);function X(...se){return O(se)}function O(se){return 0===se.length?p.y:1===se.length?se[0]:function(le){return se.reduce((ue,de)=>de(ue),le)}}},7849:(ut,Te,k)=>{k.d(Te,{h:()=>O});var p=k(2416),X=k(3410);function O(se){X.z.setTimeout(()=>{const{onUnhandledError:re}=p.v;if(!re)throw se;re(se)})}},4532:(ut,Te,k)=>{function p(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>p})},655:(ut,Te,k)=>{function se(z,Q){var ne={};for(var te in z)Object.prototype.hasOwnProperty.call(z,te)&&Q.indexOf(te)<0&&(ne[te]=z[te]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(te=Object.getOwnPropertySymbols(z);ke<te.length;ke++)Q.indexOf(te[ke])<0&&Object.prototype.propertyIsEnumerable.call(z,te[ke])&&(ne[te[ke]]=z[te[ke]])}return ne}function de(z,Q,ne,te){return new(ne||(ne=Promise))(function(Ne,ct){function Yt(sn){try{We(te.next(sn))}catch(pn){ct(pn)}}function Ut(sn){try{We(te.throw(sn))}catch(pn){ct(pn)}}function We(sn){sn.done?Ne(sn.value):function ke(Ne){return Ne instanceof ne?Ne:new ne(function(ct){ct(Ne)})}(sn.value).then(Yt,Ut)}We((te=te.apply(z,Q||[])).next())})}function ge(z){return this instanceof ge?(this.v=z,this):new ge(z)}function fe(z,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,te=ne.apply(z,Q||[]),Ne=[];return ke={},ct("next"),ct("throw"),ct("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ct(Zt){te[Zt]&&(ke[Zt]=function(Qt){return new Promise(function(Sr,xt){Ne.push([Zt,Qt,Sr,xt])>1||Yt(Zt,Qt)})})}function Yt(Zt,Qt){try{!function Ut(Zt){Zt.value instanceof ge?Promise.resolve(Zt.value.v).then(We,sn):pn(Ne[0][2],Zt)}(te[Zt](Qt))}catch(Sr){pn(Ne[0][3],Sr)}}function We(Zt){Yt("next",Zt)}function sn(Zt){Yt("throw",Zt)}function pn(Zt,Qt){Zt(Qt),Ne.shift(),Ne.length&&Yt(Ne[0][0],Ne[0][1])}}function it(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=z[Symbol.asyncIterator];return Q?Q.call(z):(z=function W(z){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&z[Q],te=0;if(ne)return ne.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&te>=z.length&&(z=void 0),{value:z&&z[te++],done:!z}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(Ne){ne[Ne]=z[Ne]&&function(ct){return new Promise(function(Yt,Ut){!function ke(Ne,ct,Yt,Ut){Promise.resolve(Ut).then(function(We){Ne({value:We,done:Yt})},ct)}(Yt,Ut,(ct=z[Ne](ct)).done,ct.value)})}}}k.d(Te,{FC:()=>fe,KL:()=>it,_T:()=>se,mG:()=>de,qq:()=>ge})},4650:(ut,Te,k)=>{k.d(Te,{$8M:()=>Ou,$Z:()=>qy,AFp:()=>LE,AaK:()=>de,CHM:()=>gu,CRH:()=>vm,CZH:()=>Sm,CqO:()=>ul,D6c:()=>Z_,EJc:()=>VE,EpF:()=>Bg,F4k:()=>lI,FYo:()=>S,FiY:()=>Me,G48:()=>Ub,GfV:()=>Ue,Gpc:()=>B,JOm:()=>Uo,KtG:()=>mu,LFG:()=>yn,LSH:()=>ed,Lbi:()=>Ab,Lck:()=>xe,MGl:()=>Md,MMx:()=>f_,NdJ:()=>jg,OlP:()=>hn,Oqu:()=>Nv,PXZ:()=>Ur,Q6J:()=>Vg,QGY:()=>fv,QP$:()=>Kt,Qsj:()=>R,R0b:()=>ss,RDi:()=>qp,Rgc:()=>ur,SBq:()=>h,Sil:()=>gr,Suo:()=>rc,TTD:()=>Gi,TgZ:()=>wr,X6Q:()=>Vb,XFs:()=>Ze,Xpm:()=>De,Xts:()=>jh,Y36:()=>Ua,YKP:()=>ce,YNc:()=>kr,Yjl:()=>_e,Yz7:()=>Qt,Z0I:()=>ji,ZZ4:()=>Um,_Bn:()=>oE,_UZ:()=>Ad,_Vd:()=>ka,_c5:()=>nD,_uU:()=>Of,aQg:()=>hh,c2e:()=>ah,cJS:()=>xt,cg1:()=>zv,dDg:()=>$E,dqk:()=>rn,eFA:()=>Mm,ekj:()=>Er,eoX:()=>P_,f3M:()=>D,g9A:()=>M_,h0i:()=>Ge,hGG:()=>W_,iGM:()=>vl,ifc:()=>st,ip1:()=>ih,jDz:()=>aE,kL8:()=>zo,lG2:()=>q,lqb:()=>_r,lri:()=>vp,n5z:()=>Yi,oAB:()=>Rt,oxw:()=>Hg,q4F:()=>Ke,qLn:()=>Wh,qOj:()=>lv,qZA:()=>Ug,rWj:()=>O_,sBO:()=>Bb,sIi:()=>bd,s_b:()=>fm,soG:()=>hp,tb:()=>oh,tp0:()=>yt,uIk:()=>hv,vHH:()=>we,vpe:()=>fo,wAp:()=>vt,xp6:()=>tw,z2F:()=>Om,zSh:()=>ju,zs3:()=>Qc});var p=k(7579),X=k(727),O=k(9751),se=k(6451),re=k(3099);function le(i){for(let s in i)if(i[s]===le)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=le({__forward_ref__:le});function B(i){return i.__forward_ref__=B,i.toString=function(){return de(this())},i}function W(i){return Ve(i)?i():i}function Ve(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===B}class we extends Error{constructor(s,a){super(function Xe(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,s){throw new we(-201,!1)}function Ut(i,s){null==i&&function We(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function xt(i){return{providers:i.providers||[],imports:i.imports||[]}}function an(i){return hi(i,fi)||hi(i,Kr)}function ji(i){return null!==an(i)}function hi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Vs(i){return i&&(i.hasOwnProperty(Zr)||i.hasOwnProperty(ta))?i[Zr]:null}const fi=le({\u0275prov:le}),Zr=le({\u0275inj:le}),Kr=le({ngInjectableDef:le}),ta=le({ngInjectorDef:le});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let mr;function zn(i){const s=mr;return mr=i,s}function Yr(i,s,a){const c=an(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ze.Optional?null:void 0!==s?s:void ve(de(i))}function Rn(i){return{toString:i}.toString()}var Fn=(()=>((Fn=Fn||{})[Fn.OnPush=0]="OnPush",Fn[Fn.Default=1]="Default",Fn))(),st=(()=>{return(i=st||(st={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",st;var i})();const rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},Ct=[],ls=le({\u0275cmp:le}),Xt=le({\u0275dir:le}),Ti=le({\u0275pipe:le}),en=le({\u0275mod:le}),qn=le({\u0275fac:le}),xr=le({__NG_ELEMENT_ID__:le});let Je=0;function De(i){return Rn(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Fn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||st.Emulated,id:"c"+Je++,styles:i.styles||Ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return l.inputs=L(i.inputs,c),l.outputs=L(i.outputs),v&&v.forEach(I=>I(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(_t).filter(mt):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(lt).filter(mt):null,l})}function _t(i){return K(i)||ze(i)}function mt(i){return null!==i}function Rt(i){return Rn(()=>({type:i.type,bootstrap:i.bootstrap||Ct,declarations:i.declarations||Ct,imports:i.imports||Ct,exports:i.exports||Ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return jr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const q=De;function _e(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function K(i){return i[ls]||null}function ze(i){return i[Xt]||null}function lt(i){return i[Ti]||null}function Kt(i){const s=K(i)||ze(i)||lt(i);return null!==s&&s.standalone}function ln(i,s){const a=i[en]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function rr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Mr(i){return Array.isArray(i)&&!0===i[1]}function iu(i){return 0!=(8&i.flags)}function ra(i){return 2==(2&i.flags)}function dc(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function wh(i){return 0!=(256&i[2])}function Ai(i,s){return i.hasOwnProperty(qn)?i[qn]:null}class Hi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Gi(){return Hs}function Hs(i){return i.type.prototype.ngOnChanges&&(i.setInput=ou),ia}function ia(){const i=Dh(this),s=i?.current;if(s){const a=i.previous;if(a===jr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function ou(i,s,a,c){const l=Dh(i)||function sa(i,s){return i[gc]=s}(i,{previous:jr,current:null}),f=l.current||(l.current={}),v=l.previous,I=this.declaredInputs[a],E=v[I];f[I]=new Hi(E&&E.currentValue,s,v===jr),i[c]=s}Gi.ngInherit=!0;const gc="__ngSimpleChanges__";function Dh(i){return i[gc]||null}function bn(i){for(;Array.isArray(i);)i=i[0];return i}function Jr(i,s){return bn(s[i])}function Rr(i,s){return bn(s[i.index])}function mo(i,s){return i.data[s]}function qt(i,s){const a=s[i];return rr(a)?a:a[0]}function Gs(i){return 64==(64&i[2])}function gi(i,s){return null==s?null:i[s]}function du(i){i[18]=0}function Dn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Et={lFrame:bc(null),bindingsEnabled:!0};function Wi(){return Et.bindingsEnabled}function Ce(){return Et.lFrame.lView}function jt(){return Et.lFrame.tView}function gu(i){return Et.lFrame.contextLView=i,i[8]}function mu(i){return Et.lFrame.contextLView=null,i}function Tn(){let i=yu();for(;null!==i&&64===i.type;)i=i.parent;return i}function yu(){return Et.lFrame.currentTNode}function Xr(i,s){const a=Et.lFrame;a.currentTNode=i,a.isParent=s}function aa(){return Et.lFrame.isParent}function zs(){return Et.lFrame.bindingIndex++}function Vp(i,s){const a=Et.lFrame;a.bindingIndex=a.bindingRootIndex=i,vu(s)}function vu(i){Et.lFrame.currentDirectiveIndex=i}function Ec(){return Et.lFrame.currentQueryIndex}function ha(i){Et.lFrame.currentQueryIndex=i}function Dc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function _u(i,s,a){if(a&Ze.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&Ze.Host||(l=Dc(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=Et.lFrame=Cc();return c.currentTNode=s,c.lView=i,!0}function wu(i){const s=Cc(),a=i[1];Et.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Cc(){const i=Et.lFrame,s=null===i?null:i.child;return null===s?bc(i):s}function bc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Tc(){const i=Et.lFrame;return Et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Fl=Tc;function qs(){const i=Tc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Kn(){return Et.lFrame.selectedIndex}function Gr(i){Et.lFrame.selectedIndex=i}function mn(){const i=Et.lFrame;return mo(i.tView,i.selectedIndex)}function Du(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Zs(i,s,a){_o(i,s,3,a)}function vo(i,s,a,c){(3&i[2])===a&&_o(i,s,a,c)}function Ul(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function _o(i,s,a,c){const f=c??-1,v=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<v;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(Bl(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Bl(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class vs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Io(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],v=a[c++],I=a[c++];i.setAttribute(s,v,I,f)}else{const f=l,v=a[++c];Su(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),c++}}return c}function Ys(i){return 3===i||4===i||6===i}function Su(i){return 64===i.charCodeAt(0)}function fa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||$l(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function $l(i,s,a,c,l){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){v=-1;break}if(I>s){v=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function Hl(i){return-1!==i}function ir(i){return 32767&i}function ga(i,s){let a=function pa(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Mi=!0;function ma(i){const s=Mi;return Mi=i,s}let Nn=0;const mi={};function Qs(i,s){const a=xu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,va(c.data,i),va(s,null),va(c.blueprint,null));const l=Mu(i,s),f=i.injectorIndex;if(Hl(l)){const v=ir(l),I=ga(l,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[v+T]|E[v+T]}return s[f+8]=l,f}function va(i,s){i.push(0,0,0,0,0,0,0,0,s)}function xu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Mu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=Co(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function _s(i,s,a){!function Au(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(xr)&&(c=a[xr]),null==c&&(c=a[xr]=Nn++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function ws(i,s,a){if(a&Ze.Optional||void 0!==i)return i;ve()}function Mc(i,s,a,c){if(a&Ze.Optional&&void 0===c&&(c=null),0==(a&(Ze.Self|Ze.Host))){const l=i[9],f=zn(void 0);try{return l?l.get(s,c,a&Ze.Optional):Yr(s,c,a&Ze.Optional)}finally{zn(f)}}return ws(c,0,a)}function Js(i,s,a,c=Ze.Default,l){if(null!==i){if(1024&s[2]){const v=function Do(i,s,a,c,l){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=_a(f,v,a,c|Ze.Self,mi);if(I!==mi)return I;let E=f.parent;if(!E){const T=v[21];if(T){const M=T.get(a,mi,c);if(M!==mi)return M}E=Co(v),v=v[15]}f=E}return l}(i,s,a,c,mi);if(v!==mi)return v}const f=_a(i,s,a,c,mi);if(f!==mi)return f}return Mc(s,a,c,l)}function _a(i,s,a,c,l){const f=function Rc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(xr)?i[xr]:void 0;return"number"==typeof s?s>=0?255&s:Nc:s}(a);if("function"==typeof f){if(!_u(s,i,c))return c&Ze.Host?ws(l,0,c):Mc(s,a,c,l);try{const v=f(c);if(null!=v||c&Ze.Optional)return v;ve()}finally{Fl()}}else if("number"==typeof f){let v=null,I=xu(i,s),E=-1,T=c&Ze.Host?s[16][6]:null;for((-1===I||c&Ze.SkipSelf)&&(E=-1===I?Mu(i,s):s[I+8],-1!==E&&wa(c,!1)?(v=s[1],I=ir(E),s=ga(E,s)):I=-1);-1!==I;){const M=s[1];if(Ru(f,I,M.data)){const P=ql(I,s,a,v,c,T);if(P!==mi)return P}E=s[I+8],-1!==E&&wa(c,s[1].data[I+8]===T)&&Ru(f,I,s)?(v=M,I=ir(E),s=ga(E,s)):I=-1}}return l}function ql(i,s,a,c,l,f){const v=s[1],I=v.data[i+8],M=Eo(I,v,a,null==c?ra(I)&&Mi:c!=v&&0!=(3&I.type),l&Ze.Host&&f===I);return null!==M?Ki(s,v,M,I):mi}function Eo(i,s,a,c,l){const f=i.providerIndexes,v=s.data,I=1048575&f,E=i.directiveStart,M=f>>20,H=l?I+M:i.directiveEnd;for(let J=c?I:I+M;J<H;J++){const ye=v[J];if(J<E&&a===ye||J>=E&&ye.type===a)return J}if(l){const J=v[E];if(J&&yr(J)&&J.type===a)return E}return null}function Ki(i,s,a,c){let l=i[a];const f=s.data;if(function Ks(i){return i instanceof vs}(l)){const v=l;v.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(f[a]));const I=ma(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?zn(v.injectImpl):null;_u(i,c,Ze.Default);try{l=i[a]=v.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Vl(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const v=Hs(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&zn(E),ma(I),v.resolving=!1,Fl()}}return l}function Ru(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function wa(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class Xs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Js(this._tNode,this._lView,s,c,a)}}function Nc(){return new Xs(Tn(),Ce())}function Yi(i){return Rn(()=>{const s=i.prototype.constructor,a=s[qn]||Nu(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[qn]||Nu(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Nu(i){return Ve(i)?()=>{const s=Nu(W(i));return s&&s()}:Ai(i)}function Co(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Ou(i){return function zl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(Ys(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(Tn(),i)}const Is="__parameters__";function So(i,s,a){return Rn(()=>{const c=function Pu(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const v=new l(...f);return I.annotation=v,I;function I(E,T,M){const P=E.hasOwnProperty(Is)?E[Is]:Object.defineProperty(E,Is,{value:[]})[Is];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(v),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class hn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),wn(c,s)):s!==i&&s.push(c)}return s}function vi(i,s){i.forEach(a=>Array.isArray(a)?vi(a,s):s(a))}function Ea(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Nr(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function at(i,s,a){let c=Cs(i,s);return c>=0?i[1|c]=a:(c=~c,function Pc(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Ca(i,s){const a=Cs(i,s);if(a>=0)return i[1|a]}function Cs(i,s){return function xo(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const f=c+(l-c>>1),v=i[f<<a];if(s===v)return f<<a;v>s?l=f:c=f+1}return~(l<<a)}(i,s,1)}const _i={},Lc="__NG_DI_FLAG__",Ro="ngTempTokenPath",Qi=/\n/gm,vr="__source";let Ss;function Ji(i){const s=Ss;return Ss=i,s}function Bn(i,s=Ze.Default){if(void 0===Ss)throw new we(-203,!1);return null===Ss?Yr(i,void 0,s):Ss.get(i,s&Ze.Optional?null:void 0,s)}function yn(i,s=Ze.Default){return(function cs(){return mr}()||Bn)(W(i),s)}function D(i,s=Ze.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),yn(i,s)}function b(i){const s=[];for(let a=0;a<i.length;a++){const c=W(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let l,f=Ze.Default;for(let v=0;v<c.length;v++){const I=c[v],E=F(I);"number"==typeof E?-1===E?l=I.token:f|=E:l=I}s.push(yn(l,f))}else s.push(yn(c))}return s}function x(i,s){return i[Lc]=s,i.prototype[Lc]=s,i}function F(i){return i[Lc]}const Me=x(So("Optional"),8),yt=x(So("SkipSelf"),4);let Ph;function qp(i){Ph=i}class Yl{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Pi(i){return i instanceof Yl?i.changingThisBreaksApplicationSecurity:i}const Ma=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var On=(()=>((On=On||{})[On.NONE=0]="NONE",On[On.HTML=1]="HTML",On[On.STYLE=2]="STYLE",On[On.SCRIPT=3]="SCRIPT",On[On.URL=4]="URL",On[On.RESOURCE_URL=5]="RESOURCE_URL",On))();function ed(i){const s=function Bu(){const i=Ce();return i&&i[12]}();return s?s.sanitize(On.URL,i)||"":function Po(i,s){const a=function Fh(i){return i instanceof Yl&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Pi(i):function Bc(i){return(i=String(i)).match(Ma)?i:"unsafe:"+i}(ge(i))}const jh=new hn("ENVIRONMENT_INITIALIZER"),ig=new hn("INJECTOR",-1),sg=new hn("INJECTOR_DEF_TYPES");class og{get(s,a=_i){if(a===_i){const c=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw c.name="NullInjectorError",c}return a}}function ag(...i){return{\u0275providers:id(0,i)}}function id(i,...s){const a=[],c=new Set;let l;return vi(s,f=>{const v=f;Hc(v,a,[],c)&&(l||(l=[]),l.push(v))}),void 0!==l&&sd(l,a),a}function sd(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];vi(l,f=>{s.push(f)})}}function Hc(i,s,a,c){if(!(i=W(i)))return!1;let l=null,f=Vs(i);const v=!f&&K(i);if(f||v){if(v&&!v.standalone)return!1;l=i}else{const E=i.ngModule;if(f=Vs(E),!f)return!1;l=E}const I=c.has(l);if(v){if(I)return!1;if(c.add(l),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of E)Hc(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(l);try{vi(f.imports,M=>{Hc(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&sd(T,s)}if(!I){const T=Ai(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:Ct},{provide:sg,useValue:l,multi:!0},{provide:jh,useValue:()=>yn(l),multi:!0})}const E=f.providers;null==E||I||vi(E,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const od=le({provide:String,useValue:le});function Gc(i){return null!==i&&"object"==typeof i&&od in i}function Ii(i){return"function"==typeof i}const ju=new hn("Set Injector scope."),$u={},Fo={};let zc;function ad(){return void 0===zc&&(zc=new og),zc}class _r{}class ud extends _r{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lo(s,v=>this.processProvider(v)),this.records.set(ig,or(void 0,this)),l.has("environment")&&this.records.set(_r,or(void 0,this));const f=this.records.get(ju);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(sg.multi,Ct,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Ji(this),c=zn(void 0);try{return s()}finally{Ji(a),zn(c)}}get(s,a=_i,c=Ze.Default){this.assertNotDestroyed();const l=Ji(this),f=zn(void 0);try{if(!(c&Ze.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function yy(i){return"function"==typeof i||"object"==typeof i&&i instanceof hn}(s)&&an(s);I=E&&this.injectableDefInScope(E)?or(qc(s),$u):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Ze.Self?ad():this.parent).get(s,a=c&Ze.Optional&&a===_i?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ro]=v[Ro]||[]).unshift(de(s)),l)throw v;return function Z(i,s,a,c){const l=i[Ro];throw s[vr]&&l.unshift(s[vr]),i.message=function ee(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=de(s);if(Array.isArray(s))l=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let I=s[v];f.push(v+":"+("string"==typeof I?JSON.stringify(I):de(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Qi,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Ro]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{zn(f),Ji(l)}}resolveInjectorInitializers(){const s=Ji(this),a=zn(void 0);try{const c=this.get(jh.multi,Ct,Ze.Self);for(const l of c)l()}finally{Ji(s),zn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(de(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=Ii(s=W(s))?s:W(s&&s.provide);const c=function $h(i){return Gc(i)?or(void 0,i.useValue):or(Wc(i),$u)}(s);if(Ii(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=or(void 0,$u,!0),l.factory=()=>b(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===$u&&(a.value=Fo,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Hh(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=W(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function qc(i){const s=an(i),a=null!==s?s.factory:Ai(i);if(null!==a)return a;if(i instanceof hn)throw new we(204,!1);if(i instanceof Function)return function cg(i){const s=i.length;if(s>0)throw function Es(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function Ar(i){const s=i&&(i[fi]||i[Kr]);if(s){const a=function Br(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function Wc(i,s,a){let c;if(Ii(i)){const l=W(i);return Ai(l)||qc(l)}if(Gc(i))c=()=>W(i.useValue);else if(function ni(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...b(i.deps||[]));else if(function Or(i){return!(!i||!i.useExisting)}(i))c=()=>yn(W(i.useExisting));else{const l=W(i&&(i.useClass||i.provide));if(!function Pa(i){return!!i.deps}(i))return Ai(l)||qc(l);c=()=>new l(...b(i.deps))}return c}function or(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Xi(i){return!!i.\u0275providers}function Lo(i,s){for(const a of i)Array.isArray(a)?Lo(a,s):Xi(a)?Lo(a.\u0275providers,s):s(a)}class cd{}class hd{resolveComponentFactory(s){throw function lg(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let ka=(()=>{class i{}return i.NULL=new hd,i})();function vy(){return y(Tn(),Ce())}function y(i,s){return new h(Rr(i,s))}let h=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=vy,i})();function g(i){return i instanceof h?i.nativeElement:i}class S{}let R=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function G(){const i=Ce(),a=qt(Tn().index,i);return(rr(a)?a:i)[11]}(),i})(),ae=(()=>{class i{}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:()=>null}),i})();class Ue{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ke=new Ue("14.2.9"),gt={};function Ey(i){return i.ngOriginalError}class Wh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ey(s);for(;a&&Ey(a);)a=Ey(a);return a||null}}const Dy=new Map;let UD=0;const mg="__ngContext__";function Pr(i,s){rr(s)?(i[mg]=s[20],function jD(i){Dy.set(i[20],i)}(s)):i[mg]=s}function Va(i){return i instanceof Function?i():i}var Uo=(()=>((Uo=Uo||{})[Uo.Important=1]="Important",Uo[Uo.DashCase=2]="DashCase",Uo))();function Ay(i,s){return undefined(i,s)}function md(i){const s=i[3];return Mr(s)?s[3]:s}function _g(i){return L0(i[13])}function wg(i){return L0(i[4])}function L0(i){for(;null!==i&&!Mr(i);)i=i[4];return i}function yd(i,s,a,c,l){if(null!=c){let f,v=!1;Mr(c)?f=c:rr(c)&&(v=!0,c=c[0]);const I=bn(c);0===i&&null!==a?null==l?G0(s,a,I):Bo(s,a,I,l||null,!0):1===i&&null!==a?Bo(s,a,I,l||null,!0):2===i?function tC(i,s,a){const c=Dg(i,s);c&&function eC(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,v):3===i&&s.destroyNode(I),null!=f&&function uA(i,s,a,c,l){const f=a[7];f!==bn(a)&&yd(s,i,c,f,l);for(let I=10;I<a.length;I++){const E=a[I];Kc(E[1],E,i,s,c,f)}}(s,i,f,a,l)}}function Ig(i,s,a){return i.createElement(s,a)}function j0(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,Dn(l,-1)),a.splice(c,1)}function Ny(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&j0(l,c),s>0&&(i[a-1][4]=c[4]);const f=Nr(i,10+s);!function Ry(i,s){Kc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=f[19];null!==v&&v.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Yh(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Kc(i,s,a,3,null,null),function oA(i){let s=i[13];if(!s)return Eg(i[1],i);for(;s;){let a=null;if(rr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)rr(s)&&Eg(s[1],s),s=s[3];null===s&&(s=i),rr(s)&&Eg(s[1],s),a=s&&s[4]}s=a}}(s)}}function Eg(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Py(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof vs)){const f=a[c+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const I=l[f[v]],E=f[v+1];try{E.call(I)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function Oy(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],I="function"==typeof v?v(s):bn(s[v]),E=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const v=c[l=a[f+1]];a[f].call(v)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Mr(s[3])){a!==s[3]&&j0(a,s);const c=s[19];null!==c&&c.detachView(i)}!function $D(i){Dy.delete(i[20])}(s)}}function $0(i,s,a){return function H0(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===st.None||l===st.Emulated)return null}return Rr(c,a)}(i,s.parent,a)}function Bo(i,s,a,c,l){i.insertBefore(s,a,c,l)}function G0(i,s,a){i.appendChild(s,a)}function z0(i,s,a,c,l){null!==c?Bo(i,s,a,c,l):G0(i,s,a)}function Dg(i,s){return i.parentNode(s)}let ky=function W0(i,s,a){return 40&i.type?Rr(i,a):null};function Jh(i,s,a,c){const l=$0(i,c,s),f=s[11],I=function pr(i,s,a){return ky(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)z0(f,l,a[E],I,!1);else z0(f,l,a,I,!1)}function Cg(i,s){if(null!==s){const a=s.type;if(3&a)return Rr(s,i);if(4&a)return Z0(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Cg(i,c);{const l=i[s.index];return Mr(l)?Z0(-1,l):bn(l)}}if(32&a)return Ay(s,i)()||bn(i[s.index]);{const c=Fy(i,s);return null!==c?Array.isArray(c)?c[0]:Cg(md(i[16]),c):Cg(i,s.next)}}return null}function Fy(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Z0(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return Cg(c,l)}return s[7]}function Ly(i,s,a,c,l,f,v){for(;null!=a;){const I=c[a.index],E=a.type;if(v&&0===s&&(I&&Pr(bn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)Ly(i,s,a.child,c,l,f,!1),yd(s,i,l,I,f);else if(32&E){const T=Ay(a,c);let M;for(;M=T();)yd(s,i,l,M,f);yd(s,i,l,I,f)}else 16&E?Xh(i,s,c,a,l,f):yd(s,i,l,I,f);a=v?a.projectionNext:a.next}}function Kc(i,s,a,c,l,f){Ly(a,c,i.firstChild,s,l,f,!1)}function Xh(i,s,a,c,l,f){const v=a[16],E=v[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)yd(s,i,l,E[T],f);else Ly(i,s,E,v[3],l,f,!0)}function Yc(i,s,a){i.setAttribute(s,"style",a)}function ef(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function nC(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const Vy="ng-template";function Uy(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==nC(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function Q0(i){return 4===i.type&&i.value!==Vy}function iC(i,s,a){return s===(4!==i.type||a?i.value:Vy)}function sC(i,s,a){let c=4;const l=i.attrs||[],f=function cA(i){for(let s=0;s<i.length;s++)if(Ys(i[s]))return s;return i.length}(l);let v=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!v)if(4&c){if(c=2|1&c,""!==E&&!iC(i,E,a)||""===E&&1===s.length){if(Rs(c))return!1;v=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!Uy(i.attrs,T,a)){if(Rs(c))return!1;v=!0}continue}const P=oC(8&c?"class":E,l,Q0(i),a);if(-1===P){if(Rs(c))return!1;v=!0;continue}if(""!==T){let H;H=P>f?"":l[P+1].toLowerCase();const J=8&c?H:null;if(J&&-1!==nC(J,T,0)||2&c&&T!==H){if(Rs(c))return!1;v=!0}}}}else{if(!v&&!Rs(c)&&!Rs(E))return!1;if(v&&Rs(E))continue;v=!1,c=E|1&c}}return Rs(c)||v}function Rs(i){return 0==(1&i)}function oC(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const v=s[l];if(v===i)return l;if(3===v||6===v)f=!0;else{if(1===v||2===v){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=f?1:2}return-1}return function J0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function aC(i,s,a=!1){for(let c=0;c<s.length;c++)if(sC(i,s[c],a))return!0;return!1}function X0(i,s){return i?":not("+s.trim()+")":s}function ew(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];l+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+v:4&c&&(l+=" "+v);else""!==l&&!Rs(v)&&(s+=X0(f,l),l=""),c=v,f=f||!Rs(c);a++}return""!==l&&(s+=X0(f,l)),s}const Ot={};function tw(i){nw(jt(),Ce(),Kn()+i,!1)}function nw(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Zs(s,f,a)}else{const f=i.preOrderHooks;null!==f&&vo(s,f,0,a)}Gr(a)}function sw(i,s=null,a=null,c){const l=ow(i,s,a,c);return l.resolveInjectorInitializers(),l}function ow(i,s=null,a=null,c,l=new Set){const f=[a||Ct,ag(i)];return c=c||("object"==typeof i?void 0:de(i)),new ud(f,s||ad(),c||null,l)}let Qc=(()=>{class i{static create(a,c){if(Array.isArray(a))return sw({name:""},c,a,"");{const l=a.name??"";return sw({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=_i,i.NULL=new og,i.\u0275prov=Qt({token:i,providedIn:"any",factory:()=>yn(ig)}),i.__NG_ELEMENT_ID__=-1,i})();function Ua(i,s=Ze.Default){const a=Ce();return null===a?yn(i,s):Js(Tn(),a,W(i),s)}function qy(){throw new Error("invalid")}function af(i,s){return i<<17|s<<2}function xn(i){return i>>17&32767}function _w(i){return 2|i}function Wu(i){return(131068&i)>>2}function uf(i,s){return-131069&i|s<<2}function cf(i){return 1|i}function Jy(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const v=i.data[f];ha(l),v.contentQueries(2,s[f],f)}}}function Ng(i,s,a,c,l,f,v,I,E,T,M){const P=s.blueprint.slice();return P[0]=l,P[2]=76|c,(null!==M||i&&1024&i[2])&&(P[2]|=1024),du(P),P[3]=P[15]=i,P[8]=a,P[10]=v||i&&i[10],P[11]=I||i&&i[11],P[12]=E||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=f,P[20]=function BD(){return UD++}(),P[21]=M,P[16]=2==s.type?i[16]:P,P}function pf(i,s,a,c,l){let f=i.data[s];if(null===f)f=function Xy(i,s,a,c,l){const f=yu(),v=aa(),E=i.data[s]=function yf(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==f&&(v?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,l),function Lp(){return Et.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const v=function yo(){const i=Et.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return Xr(f,!0),f}function rl(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function Rw(i,s,a){wu(s);try{const c=i.viewQuery;null!==c&&sl(1,c,a);const l=i.template;null!==l&&Nw(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Jy(i,s),i.staticViewQueries&&sl(2,i.viewQuery,a);const f=i.components;null!==f&&function Mw(i,s){for(let a=0;a<s.length;a++)zw(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,qs()}}function Ed(i,s,a,c){const l=s[2];if(128!=(128&l)){wu(s);try{du(s),function wc(i){return Et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Nw(i,s,a,2,c);const v=3==(3&l);if(v){const T=i.preOrderCheckHooks;null!==T&&Zs(s,T,null)}else{const T=i.preOrderHooks;null!==T&&vo(s,T,0,null),Ul(s,0)}if(function ov(i){for(let s=_g(i);null!==s;s=wg(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&Dn(f,1),l[2]|=512}}}(s),function OC(i){for(let s=_g(i);null!==s;s=wg(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Gs(c)&&Ed(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&Jy(i,s),v){const T=i.contentCheckHooks;null!==T&&Zs(s,T)}else{const T=i.contentHooks;null!==T&&vo(s,T,1),Ul(s,1)}!function bC(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Gr(~l);else{const f=l,v=a[++c],I=a[++c];Vp(v,f),I(2,s[f])}}}finally{Gr(-1)}}(i,s);const I=i.components;null!==I&&function TC(i,s){for(let a=0;a<s.length;a++)PC(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&sl(2,E,c),v){const T=i.viewCheckHooks;null!==T&&Zs(s,T)}else{const T=i.viewHooks;null!==T&&vo(s,T,2),Ul(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Dn(s[3],-1))}finally{qs()}}}function Nw(i,s,a,c,l){const f=Kn(),v=2&c;try{Gr(-1),v&&s.length>22&&nw(i,s,22,!1),a(c,l)}finally{Gr(f)}}function gf(i,s,a){!Wi()||(function Uw(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Qs(a,s),Pr(c,s);const v=a.initialInputs;for(let I=l;I<f;I++){const E=i.data[I],T=yr(E);T&&RC(s,a,E);const M=Ki(s,i,I,a);Pr(M,s),null!==v&&NC(0,I-l,M,E,0,v),T&&(qt(a.index,s)[8]=M)}}(i,s,a,Rr(a,s)),128==(128&a.flags)&&function iv(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,v=function Ic(){return Et.lFrame.currentDirectiveIndex}();try{Gr(f);for(let I=c;I<l;I++){const E=i.data[I],T=s[I];vu(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Bw(E,T)}}finally{Gr(-1),vu(v)}}(i,s,a))}function tv(i,s,a=Rr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const v=c[f+1],I=-1===v?a(s,i):i[v];i[l++]=I}}}function SC(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=nv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function nv(i,s,a,c,l,f,v,I,E,T){const M=22+c,P=M+l,H=function mf(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ot);return a}(M,P),J="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:s,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:J,incompleteFirstPass:!1}}function rv(i,s,a,c){const l=Ww(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&uv(i).push(c,l.length-1))}function AC(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function kw(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,v=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const M=l[T],P=M.inputs,H=null===f||Q0(s)?null:Gw(P,f);v.push(H),I=AC(P,T,I),E=AC(M.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=I,s.outputs=E}function Ns(i,s,a,c,l,f,v,I){const E=Rr(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[c])?(If(i,a,M,c,l),ra(s)&&xC(a,s.index)):3&s.type&&(c=function Fw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=v?v(l,s.value||"",c):l,f.setProperty(E,c,l))}function xC(i,s){const a=qt(s,i);16&a[2]||(a[2]|=32)}function Og(i,s,a,c){let l=!1;if(Wi()){const f=function Pg(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const v=c[f];aC(a,v.selectors,!1)&&(l||(l=[]),_s(Qs(a,s),i,v.type),yr(v)?(jw(i,a),l.unshift(v)):l.push(v))}return l}(i,s,a),v=null===c?null:{"":-1};if(null!==f){l=!0,Hw(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const P=f[M];P.providersResolver&&P.providersResolver(P)}let I=!1,E=!1,T=rl(i,s,f.length,null);for(let M=0;M<f.length;M++){const P=f[M];a.mergedAttrs=fa(a.mergedAttrs,P.hostAttrs),sv(i,a,s,T,P),$w(T,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const H=P.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}kw(i,a)}v&&function vA(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new we(-301,!1);c.push(s[l],f)}}}(a,c,v)}return a.mergedAttrs=fa(a.mergedAttrs,a.attrs),l}function Lw(i,s,a,c,l,f){const v=f.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function Vw(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,v)}}function Bw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function jw(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function $w(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;yr(s)&&(a[""]=i)}}function Hw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function sv(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=Ai(l.type)),v=new vs(f,yr(l),Ua);i.blueprint[c]=v,a[c]=v,Lw(i,s,0,c,rl(i,a,l.hostVars,Ot),l)}function RC(i,s,a){const c=Rr(s,i),l=SC(a),f=i[10],v=il(i,Ng(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=v}function oo(i,s,a,c,l,f){const v=Rr(i,s);!function vf(i,s,a,c,l,f,v){if(null==f)i.removeAttribute(s,l,a);else{const I=null==v?ge(f):v(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],v,f,i.value,a,c,l)}function NC(i,s,a,c,l,f){const v=f[s];if(null!==v){const I=c.setInput;for(let E=0;E<v.length;){const T=v[E++],M=v[E++],P=v[E++];null!==I?c.setInput(a,P,T,M):a[M]=P}}}function Gw(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Dd(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function PC(i,s){const a=qt(s,i);if(Gs(a)){const c=a[1];48&a[2]?Ed(c,a,c.template,a[8]):a[5]>0&&_f(a)}}function _f(i){for(let c=_g(i);null!==c;c=wg(c))for(let l=10;l<c.length;l++){const f=c[l];if(Gs(f))if(512&f[2]){const v=f[1];Ed(v,f,v.template,f[8])}else f[5]>0&&_f(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=qt(a[c],i);Gs(l)&&l[5]>0&&_f(l)}}function zw(i,s){const a=qt(s,i),c=a[1];(function kC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Rw(c,a,a[8])}function il(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function av(i){for(;i;){i[2]|=32;const s=md(i);if(wh(i)&&!s)return i;i=s}return null}function wf(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{Ed(i,s,i.template,a)}catch(v){throw c&&FC(s,v),v}finally{l.end&&l.end()}}function sl(i,s,a){ha(0),s(i,a)}function Ww(i){return i[7]||(i[7]=[])}function uv(i){return i.cleanup||(i.cleanup=[])}function FC(i,s){const a=i[9],c=a?a.get(Wh,null):null;c&&c.handleError(s)}function If(i,s,a,c,l){for(let f=0;f<a.length;){const v=a[f++],I=a[f++],E=s[v],T=i.data[v];null!==T.setInput?T.setInput(E,l,c,I):E[I]=l}}function Ef(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const I=s[v];"number"==typeof I?f=I:1==f?l=he(l,I):2==f&&(c=he(c,I+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function Df(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(bn(f)),Mr(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&Df(E[1],E,T,c)}const v=a.type;if(8&v)Df(i,s,a.child,c);else if(32&v){const I=Ay(a,s);let E;for(;E=I();)c.push(E)}else if(16&v){const I=Fy(s,a);if(Array.isArray(I))c.push(...I);else{const E=md(s[16]);Df(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class uo{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Df(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Mr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Ny(s,c),Nr(a,c))}this._attachedToViewContainer=!1}Yh(this._lView[1],this._lView)}onDestroy(s){rv(this._lView[1],this._lView,null,s)}markForCheck(){av(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){wf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function B0(i,s){Kc(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class LC extends uo{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;wf(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class kg extends ka{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=K(s);return new Cf(a,this.ngModule)}}function Kw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class VC{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,gt,c);return l!==gt||a===gt?l:this.parentInjector.get(s,a,c)}}class Cf extends cd{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function cC(i){return i.map(ew).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Kw(this.componentDef.inputs)}get outputs(){return Kw(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof _r?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new VC(s,f):s,I=v.get(S,null);if(null===I)throw new we(407,!1);const E=v.get(ae,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=c?function Pw(i,s,a){return i.selectRootElement(s,a===st.ShadowDom)}(T,c,this.componentDef.encapsulation):Ig(I.createRenderer(null,this.componentDef),M,function Yw(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),H=this.componentDef.onPush?288:272,J=nv(0,null,null,1,0,null,null,null,null,null),ye=Ng(null,J,null,H,null,null,I,T,E,v,null);let Fe,Le;wu(ye);try{const rt=function $C(i,s,a,c,l,f){const v=a[1];a[22]=i;const E=pf(v,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(Ef(E,T,!0),null!==i&&(Io(l,i,T),null!==E.classes&&ef(l,i,E.classes),null!==E.styles&&Yc(l,i,E.styles)));const M=c.createRenderer(i,s),P=Ng(a,SC(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return v.firstCreatePass&&(_s(Qs(E,a),v,s.type),jw(v,E),Hw(E,a.length,1)),il(a,P),a[22]=P}(P,this.componentDef,ye,I,T);if(P)if(c)Io(T,P,["ng-version",Ke.full]);else{const{attrs:pt,classes:be}=function lC(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!Rs(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);pt&&Io(T,P,pt),be&&be.length>0&&ef(T,P,be.join(" "))}if(Le=mo(J,22),void 0!==a){const pt=Le.projection=[];for(let be=0;be<this.ngContentSelectors.length;be++){const It=a[be];pt.push(null!=It?Array.from(It):null)}}Fe=function Qw(i,s,a,c){const l=a[1],f=function MC(i,s,a){const c=Tn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),sv(i,c,s,rl(i,s,1,null),a),kw(i,c));const l=Ki(s,i,c.directiveStart,c);Pr(l,s);const f=Rr(c,s);return f&&Pr(f,s),l}(l,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=Tn();s.contentQueries(1,f,I.directiveStart)}const v=Tn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Gr(v.index),Lw(a[1],v,0,v.directiveStart,v.directiveEnd,s),Bw(s,f)),f}(rt,this.componentDef,ye,[HC]),Rw(J,ye,null)}finally{qs()}return new BC(this.componentType,Fe,y(Le,ye),ye,Le)}}class BC extends class Gh{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new LC(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;If(f[1],f,l,s,a),xC(f,this._tNode.index)}}get injector(){return new Xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function HC(){const i=Tn();Du(Ce()[1],i)}function lv(i){let s=function cv(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(yr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new we(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const v=i;v.inputs=Xw(i.inputs),v.declaredInputs=Xw(i.declaredInputs),v.outputs=Xw(i.outputs);const I=l.hostBindings;I&&eI(i,I);const E=l.viewQuery,T=l.contentQueries;if(E&&IA(i,E),T&&EA(i,T),ue(i.inputs,l.inputs),ue(i.declaredInputs,l.declaredInputs),ue(i.outputs,l.outputs),yr(l)&&l.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let v=0;v<f.length;v++){const I=f[v];I&&I.ngInherit&&I(i),I===lv&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Jw(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=fa(l.hostAttrs,a=fa(a,l.hostAttrs))}}(c)}function Xw(i){return i===jr?{}:i===Ct?[]:i}function IA(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function EA(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,f)=>{s(c,l,f),a(c,l,f)}:s}function eI(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let dv=null;function Cd(){if(!dv){const i=rn.Symbol;if(i&&i.iterator)dv=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(dv=c)}}}return dv}function bd(i){return!!rI(i)&&(Array.isArray(i)||!(i instanceof Map)&&Cd()in i)}function rI(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function si(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function hv(i,s,a,c){const l=Ce();return si(l,zs(),s)&&(jt(),oo(mn(),l,i,s,a,c)),hv}function Os(i,s,a,c){return si(i,zs(),a)?s+ge(a)+c:Ot}function kr(i,s,a,c,l,f,v,I){const E=Ce(),T=jt(),M=i+22,P=T.firstCreatePass?function Lg(i,s,a,c,l,f,v,I,E){const T=s.consts,M=pf(s,i,4,v||null,gi(T,I));Og(s,a,M,gi(T,E)),Du(s,M);const P=M.tViews=nv(2,M,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,l,f,v):T.data[M];Xr(P,!1);const H=E[11].createComment("");Jh(T,E,H,P),Pr(H,E),il(E,E[M]=Dd(H,E,H,P)),dc(P)&&gf(T,E,P),null!=v&&tv(E,P,I)}function Vg(i,s,a){const c=Ce();return si(c,zs(),s)&&Ns(jt(),mn(),c,i,s,c[11],a,!1),Vg}function Af(i,s,a,c,l){const v=l?"class":"style";If(i,a,s.inputs[v],v,c)}function wr(i,s,a,c){const l=Ce(),f=jt(),v=22+i,I=l[11],E=l[v]=Ig(I,s,function Eu(){return Et.lFrame.currentNamespace}()),T=f.firstCreatePass?function uI(i,s,a,c,l,f,v){const I=s.consts,T=pf(s,i,2,l,gi(I,f));return Og(s,a,T,gi(I,v)),null!==T.attrs&&Ef(T,T.attrs,!1),null!==T.mergedAttrs&&Ef(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,f,l,0,s,a,c):f.data[v];Xr(T,!0);const M=T.mergedAttrs;null!==M&&Io(I,E,M);const P=T.classes;null!==P&&ef(I,E,P);const H=T.styles;return null!==H&&Yc(I,E,H),64!=(64&T.flags)&&Jh(f,l,E,T),0===function fu(){return Et.lFrame.elementDepthCount}()&&Pr(E,l),function pu(){Et.lFrame.elementDepthCount++}(),dc(T)&&(gf(f,l,T),function ev(i,s,a){if(iu(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,T,l)),null!==c&&tv(l,T),wr}function Ug(){let i=Tn();aa()?function ua(){Et.lFrame.isParent=!1}():(i=i.parent,Xr(i,!1));const s=i;!function mc(){Et.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(Du(a,i),iu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Tu(i){return 0!=(16&i.flags)}(s)&&Af(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function jl(i){return 0!=(32&i.flags)}(s)&&Af(a,s,Ce(),s.stylesWithoutHost,!1),Ug}function Ad(i,s,a,c){return wr(i,s,a,c),Ug(),Ad}function Bg(){return Ce()}function fv(i){return!!i&&"function"==typeof i.then}function lI(i){return!!i&&"function"==typeof i.subscribe}const ul=lI;function jg(i,s,a,c){const l=Ce(),f=jt(),v=Tn();return function hI(i,s,a,c,l,f,v,I){const E=dc(c),M=i.firstCreatePass&&uv(i),P=s[8],H=Ww(s);let J=!0;if(3&c.type||I){const Le=Rr(c,s),rt=I?I(Le):Le,pt=H.length,be=I?Ht=>I(bn(Ht[c.index])):c.index;let It=null;if(!I&&E&&(It=function dI(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const v=l[f];if(v===a&&l[f+1]===c){const I=s[7],E=l[f+2];return I.length>E?I[E]:null}"string"==typeof v&&(f+=2)}return null}(i,s,l,c.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=f,It.__ngLastListenerFn__=f,J=!1;else{f=Mf(c,s,P,f,!1);const Ht=a.listen(rt,l,f);H.push(f,Ht),M&&M.push(l,be,pt,pt+1)}}else f=Mf(c,s,P,f,!1);const ye=c.outputs;let Fe;if(J&&null!==ye&&(Fe=ye[l])){const Le=Fe.length;if(Le)for(let rt=0;rt<Le;rt+=2){const fn=s[Fe[rt]][Fe[rt+1]].subscribe(f),ic=H.length;H.push(f,fn),M&&M.push(l,c.index,ic,-(ic+1))}}}(f,l,l[11],v,i,s,0,c),jg}function pv(i,s,a,c){try{return!1!==a(c)}catch(l){return FC(i,l),!1}}function Mf(i,s,a,c,l){return function f(v){if(v===Function)return c;av(2&i.flags?qt(i.index,s):s);let E=pv(s,0,c,v),T=f.__ngNextListenerFn__;for(;T;)E=pv(s,0,T,v)&&E,T=T.__ngNextListenerFn__;return l&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function Hg(i=1){return function Ws(i){return(Et.lFrame.contextLView=function Iu(i,s){for(;i>0;)s=s[15],i--;return s}(i,Et.lFrame.contextLView))[8]}(i)}function Md(i,s,a,c,l){const f=Ce(),v=Os(f,s,a,c);return v!==Ot&&Ns(jt(),mn(),f,i,v,f[11],l,!1),Md}function vv(i,s,a,c,l){const f=i[a+1],v=null===s;let I=c?xn(f):Wu(f),E=!1;for(;0!==I&&(!1===E||v);){const M=i[I+1];Gg(i[I],s)&&(E=!0,i[I+1]=c?cf(M):_w(M)),I=c?xn(M):Wu(M)}E&&(i[a+1]=c?_w(f):cf(f))}function Gg(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Cs(i,s)>=0}function Er(i,s){return function Ps(i,s,a,c){const l=Ce(),f=jt(),v=function Zi(i){const s=Et.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Tv(i,s,a,c){const l=i.data;if(null===l[a+1]){const f=l[Kn()],v=function TI(i,s){return s>=i.expandoStartIndex}(i,a);(function Rv(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!v&&(s=!1),s=function Sv(i,s,a,c){const l=function da(i){const s=Et.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=Yu(a=xv(null,i,s,a,c),s.attrs,c),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==l)if(a=xv(l,i,s,a,c),null===f){let E=function YC(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Wu(c))return i[xn(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=xv(null,i,s,E[1],c),E=Yu(E,s.attrs,c),function Av(i,s,a,c){i[xn(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function SI(i,s,a){let c;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)c=Yu(c,i[f].hostAttrs,a);return Yu(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(l,f,s,c),function _I(i,s,a,c,l,f){let v=f?s.classBindings:s.styleBindings,I=xn(v),E=Wu(v);i[c]=a;let M,T=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||Cs(P,M)>0)&&(T=!0)}else M=a;if(l)if(0!==E){const H=xn(i[I+1]);i[c+1]=af(H,I),0!==H&&(i[H+1]=uf(i[H+1],c)),i[I+1]=function vw(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=af(I,0),0!==I&&(i[I+1]=uf(i[I+1],c)),I=c;else i[c+1]=af(E,0),0===I?I=c:i[E+1]=uf(i[E+1],c),E=c;T&&(i[c+1]=_w(i[c+1])),vv(i,M,c,!0),vv(i,M,c,!1),function wI(i,s,a,c,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Cs(f,s)>=0&&(a[c+1]=cf(a[c+1]))}(s,M,i,c,f),v=af(I,E),f?s.classBindings=v:s.styleBindings=v}(l,f,s,a,v,c)}}(f,i,v,c),s!==Ot&&si(l,v,s)&&function xI(i,s,a,c,l,f,v,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];Nf(function Ag(i){return 1==(1&i)}(T)?Od(E,s,a,l,Wu(T),v):void 0)||(Nf(f)||function Ba(i){return 2==(2&i)}(T)&&(f=Od(E,null,a,l,I,v)),function Y0(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Uo.DashCase;null==l?i.removeStyle(a,c,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Uo.Important),i.setStyle(a,c,l,f))}}(c,v,Jr(Kn(),a),l,f))}(f,f.data[Kn()],l,l[11],i,l[v+1]=function MI(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(Pi(i)))),i}(s,a),c,v)}(i,s,null,!0),Er}function xv(i,s,a,c,l){let f=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(f=s[I],c=Yu(c,f.hostAttrs,l),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function Yu(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?l=v:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),at(i,v,!!a||s[++f]))}return void 0===i?null:i}function Od(i,s,a,c,l,f){const v=null===s;let I;for(;l>0;){const E=i[l],T=Array.isArray(E),M=T?E[1]:E,P=null===M;let H=a[l+1];H===Ot&&(H=P?Ct:void 0);let J=P?Ca(H,c):M===c?H:void 0;if(T&&!Nf(J)&&(J=Ca(E,c)),Nf(J)&&(I=J,v))return I;const ye=i[l+1];l=v?xn(ye):Wu(ye)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(I=Ca(E,c))}return I}function Nf(i){return void 0!==i}function Of(i,s=""){const a=Ce(),c=jt(),l=i+22,f=c.firstCreatePass?pf(c,l,1,s,null):c.data[l],v=a[l]=function My(i,s){return i.createText(s)}(a[11],s);Jh(c,a,v,f),Xr(f,!1)}function Nv(i){return Ov("",i,""),Nv}function Ov(i,s,a){const c=Ce(),l=Os(c,i,s,a);return l!==Ot&&function ao(i,s,a){const c=Jr(s,i);!function V0(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Kn(),l),Ov}const $a=void 0;var XC=["en",[["a","p"],["AM","PM"],$a],[["AM","PM"],$a,$a],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$a,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$a,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$a,"{1} 'at' {0}",$a],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JC(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let dl={};function zv(i){const s=function Pn(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Bf(s);if(a)return a;const c=s.split("-")[0];if(a=Bf(c),a)return a;if("en"===c)return XC;throw new we(701,!1)}function zo(i){return zv(i)[vt.PluralCase]}function Bf(i){return i in dl||(dl[i]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[i]),dl[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const qo="en-US";let BI=qo;function Jf(i,s,a,c,l){if(i=W(i),Array.isArray(i))for(let f=0;f<i.length;f++)Jf(i[f],s,a,c,l);else{const f=jt(),v=Ce();let I=Ii(i)?i:W(i.provide),E=Wc(i);const T=Tn(),M=1048575&T.providerIndexes,P=T.directiveStart,H=T.providerIndexes>>20;if(Ii(i)||!i.multi){const J=new vs(E,l,Ua),ye=jn(I,s,l?M:M+H,P);-1===ye?(_s(Qs(T,v),f,I),c_(f,i,s.length),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(J),v.push(J)):(a[ye]=J,v[ye]=J)}else{const J=jn(I,s,M+H,P),ye=jn(I,s,M,M+H),Fe=J>=0&&a[J],Le=ye>=0&&a[ye];if(l&&!Le||!l&&!Fe){_s(Qs(T,v),f,I);const rt=function Dt(i,s,a,c,l){const f=new vs(i,a,Ua);return f.multi=[],f.index=s,f.componentProviders=0,Re(f,l,c&&!a),f}(l?l_:fl,a.length,l,c,E);!l&&Le&&(a[ye].providerFactory=rt),c_(f,i,s.length,0),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(rt),v.push(rt)}else c_(f,i,J>-1?J:ye,Re(a[l?ye:J],E,!l&&c));!l&&c&&Le&&a[ye].componentProviders++}}}function c_(i,s,a,c){const l=Ii(s),f=function ug(i){return!!i.useClass}(s);if(l||f){const E=(f?W(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,E]):T[M+1].push(c,E)}else T.push(a,E)}}}function Re(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function jn(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function fl(i,s,a,c){return et(this.multi,[])}function l_(i,s,a,c){const l=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Ki(a,a[1],this.providerFactory.index,c);f=I.slice(0,v),et(l,f);for(let E=v;E<I.length;E++)f.push(I[E])}else f=[],et(l,f);return f}function et(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function oE(i,s=[]){return a=>{a.providersResolver=(c,l)=>function tc(i,s,a){const c=jt();if(c.firstCreatePass){const l=yr(i);Jf(a,c.data,c.blueprint,l,!0),Jf(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class Ge{}class ce{}function xe(i,s){return new d_(i,s??null)}class d_ extends Ge{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kg(this);const c=ln(s);this._bootstrapComponents=Va(c.bootstrap),this._r3Injector=ow(s,a,[{provide:Ge,useValue:this},{provide:ka,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class h_ extends ce{constructor(s){super(),this.moduleType=s}create(s){return new d_(this.moduleType,s)}}class db extends Ge{constructor(s,a,c){super(),this.componentFactoryResolver=new kg(this),this.instance=null;const l=new ud([...s,{provide:Ge,useValue:this},{provide:ka,useValue:this.componentFactoryResolver}],a||ad(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function f_(i,s,a=null){return new db(i,s,a).injector}let hb=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=id(0,a.type),l=c.length>0?f_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Qt({token:i,providedIn:"environment",factory:()=>new i(yn(_r))}),i})();function aE(i){i.getStandaloneInjector=s=>s.get(hb).getOrCreateStandaloneInjector(i)}function Ha(i){return s=>{setTimeout(i,void 0,s)}}const fo=class yE extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),v=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(f=Ha(f),l&&(l=Ha(l)),v&&(v=Ha(v)));const I=super.subscribe({next:l,error:f,complete:v});return s instanceof X.w0&&s.add(I),I}};function tr(){return this._results[Cd()]()}class Wd{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Cd(),c=Wd.prototype;c[a]||(c[a]=tr)}get changes(){return this._changes||(this._changes=new fo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=wn(s);(this._changesDetected=!function ei(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ur=(()=>{class i{}return i.__NG_ELEMENT_ID__=Zd,i})();const vn=ur,vE=class extends vn{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Ng(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(c)),Rw(c,l,s),new uo(l)}};function Zd(){return ai(Tn(),Ce())}function ai(i,s){return 4&i.type?new vE(s,i,y(i,s)):null}let fm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Dr,i})();function Dr(){return pm(Tn(),Ce())}const _b=fm,Ga=class extends _b{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Xs(this._hostTNode,this._hostLView)}get parentInjector(){const s=Mu(this._hostTNode,this._hostLView);if(Hl(s)){const a=ga(s,this._hostLView),c=ir(s);return new Xs(a[1].data[c+8],a)}return new Xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=$n(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,l),v}createComponent(s,a,c,l,f){const v=s&&!function yi(i){return"function"==typeof i}(s);let I;if(v)I=a;else{const P=a||{};I=P.index,c=P.injector,l=P.projectableNodes,f=P.environmentInjector||P.ngModuleRef}const E=v?s:new Cf(K(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const H=(v?T:this.parentInjector).get(_r,null);H&&(f=H)}const M=E.create(T,l,void 0,f);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,l=c[1];if(function lu(i){return Mr(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=c[3],H=new Ga(P,P[6],P[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function JD(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],Ea(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function XD(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,v,f);const I=Z0(f,v),E=c[11],T=Dg(E,v[7]);return null!==T&&function U0(i,s,a,c,l,f){c[0]=l,c[6]=s,Kc(i,c,a,1,l,f)}(l,v[6],E,c,T,I),s.attachToViewContainerRef(),Ea(za(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=$n(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Ny(this._lContainer,a);c&&(Nr(za(this._lContainer),a),Yh(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Ny(this._lContainer,a);return c&&null!=Nr(za(this._lContainer),a)?new uo(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function $n(i){return i[8]}function za(i){return i[8]||(i[8]=[])}function pm(i,s){let a;const c=s[i.index];if(Mr(c))a=c;else{let l;if(8&i.type)l=bn(c);else{const f=s[11];l=f.createComment("");const v=Rr(i,s);Bo(f,Dg(f,v),l,function q0(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=Dd(c,s,l,i),il(s,a)}return new Ga(a,i,s)}class Zo{constructor(s){this.queryList=s,this.matches=null}clone(){return new Zo(this.queryList)}setDirty(){this.queryList.setDirty()}}class ml{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const v=a.getByIndex(f);l.push(this.queries[v.indexInDeclarationView].clone())}return new ml(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Yd(s,a).matches&&this.queries[a].setDirty()}}class Kd{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class gm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new gm(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Ko{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Ko(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,mm(a,f)),this.matchTNodeWithReadOption(s,a,Eo(a,s,f,!1,!1))}else c===ur?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Eo(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===h||l===fm||l===ur&&4&a.type)this.addMatch(a.index,-2);else{const f=Eo(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function mm(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Yo(i,s,a,c){return-1===a?function yl(i,s){return 11&i.type?y(i,s):4&i.type?ai(i,s):null}(s,i):-2===a?function rp(i,s,a){return a===h?y(s,i):a===ur?ai(s,i):a===fm?pm(s,i):void 0}(i,s,c):Ki(i,i[1],a,s)}function qa(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,v=a.matches,I=[];for(let E=0;E<v.length;E+=2){const T=v[E];I.push(T<0?null:Yo(s,f[T],v[E+1],a.metadata.read))}l.matches=I}return l.matches}function ym(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const v=qa(i,s,l,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(v[I/2]);else{const T=f[I+1],M=s[-E];for(let P=10;P<M.length;P++){const H=M[P];H[17]===H[3]&&ym(H[1],H,T,c)}if(null!==M[9]){const P=M[9];for(let H=0;H<P.length;H++){const J=P[H];ym(J[1],J,T,c)}}}}}return c}function vl(i){const s=Ce(),a=jt(),c=Ec();ha(c+1);const l=Yd(a,c);if(i.dirty&&function cu(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?ym(a,s,c,[]):qa(a,s,l,c);i.reset(f,g),i.notifyOnChanges()}return!0}return!1}function rc(i,s,a,c){const l=jt();if(l.firstCreatePass){const f=Tn();(function I_(i,s,a){null===i.queries&&(i.queries=new gm),i.queries.track(new Ko(s,a))})(l,new Kd(s,a,c),f.index),function _m(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function w_(i,s,a){const c=new Wd(4==(4&a));rv(i,s,c,c.destroy),null===s[19]&&(s[19]=new ml),s[19].queries.push(new Zo(c))}(l,Ce(),a)}function vm(){return function ip(i,s){return i[19].queries[s].queryList}(Ce(),Ec())}function Yd(i,s){return i.queries.getByIndex(s)}function dp(...i){}const ih=new hn("Application Initializer");let Sm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=dp,this.reject=dp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(fv(f))a.push(f);else if(ul(f)){const v=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(yn(ih,8))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const LE=new hn("AppId",{providedIn:"root",factory:function Mn(){return`${sh()}${sh()}${sh()}`}});function sh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const M_=new hn("Platform Initializer"),Ab=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),oh=new hn("appBootstrapListener");let ah=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const hp=new hn("LocaleId",{providedIn:"root",factory:()=>D(hp,Ze.Optional|Ze.SkipSelf)||function Za(){return typeof $localize<"u"&&$localize.locale||qo}()}),VE=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Rb{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let gr=(()=>{class i{compileModuleSync(a){return new h_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Va(ln(a).declarations).reduce((v,I)=>{const E=K(I);return E&&v.push(new Cf(E)),v},[]);return new Rb(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const pp=(()=>Promise.resolve(0))();function Am(i){typeof Zone>"u"?pp.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ss{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fo(!1),this.onMicrotaskEmpty=new fo(!1),this.onStable=new fo(!1),this.onError=new fo(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Qo(){let i=rn.requestAnimationFrame,s=rn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Bt(i){const s=()=>{!function Ob(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,N_(i),i.isCheckStableRunning=!0,R_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),N_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,v,I)=>{try{return mp(i),a.invokeTask(l,f,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),uh(i)}},onInvoke:(a,c,l,f,v,I,E)=>{try{return mp(i),a.invoke(l,f,v,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),uh(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,N_(i),R_(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+l,s,gp,dp,dp);try{return f.runTask(v,a,c)}finally{f.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const gp={};function R_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function N_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function mp(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function uh(i){i._nesting--,R_(i)}class yp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fo,this.onMicrotaskEmpty=new fo,this.onStable=new fo,this.onError=new fo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const vp=new hn(""),O_=new hn("");let xm,$E=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xm||(function Pb(i){xm=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),Am(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Am(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(yn(ss),yn(P_),yn(O_))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac}),i})(),P_=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return xm?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ya=null;const HE=new hn("AllowMultipleToken"),k_=new hn("PlatformDestroyListeners");class Ur{constructor(s,a){this.name=s,this.token=a}}function Mm(i,s,a=[]){const c=`Platform: ${s}`,l=new hn(c);return(f=[])=>{let v=Rm();if(!v||v.injector.get(HE,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function F_(i){if(Ya&&!Ya.get(HE,!1))throw new we(400,!1);Ya=i;const s=i.get(L_);(function ch(i){const s=i.get(M_,null);s&&s.forEach(a=>a())})(i)}(function lh(i=[],s){return Qc.create({name:s,providers:[{provide:ju,useValue:"platform"},{provide:k_,useValue:new Set([()=>Ya=null])},...i]})}(I,c))}return function zE(i){const s=Rm();if(!s)throw new we(401,!1);return s}()}}function Rm(){return Ya?.get(L_)??null}let L_=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function WE(i,s){let a;return a="noop"===i?new yp:("zone.js"===i?void 0:i)||new ss(s),a}(c?.ngZone,function qE(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:ss,useValue:l}];return l.run(()=>{const v=Qc.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(v),E=I.injector.get(Wh,null);if(!E)throw new we(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{wp(this._modules,I),T.unsubscribe()})}),function dh(i,s,a){try{const c=a();return fv(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=I.injector.get(Sm);return T.runInitializers(),T.donePromise.then(()=>(function Vd(i){Ut(i,"Expected localeId to be defined"),"string"==typeof i&&(BI=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(hp,qo)||qo),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=Nm({},c);return function _p(i,s,a){const c=new h_(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(Om);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(k_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(yn(Qc))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Nm(i,s){return Array.isArray(s)?s.reduce(Nm,i):{...i,...s}}let Om=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),Am(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(f,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof cd;if(!this._injector.get(Sm).done)throw!l&&Kt(a),new we(405,false);let v;v=l?a:this._injector.get(ka).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function Fb(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Ge),T=v.create(Qc.NULL,[],c||v.selector,I),M=T.location.nativeElement,P=T.injector.get(vp,null);return P?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),wp(this.components,T),P?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;wp(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(oh,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>wp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(yn(ss),yn(_r),yn(Wh))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function wp(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let KE=!0,V_=!1;function Vb(){return V_=!0,KE}function Ub(){if(V_)throw new Error("Cannot enable prod mode after platform setup.");KE=!1}let Bb=(()=>{class i{}return i.__NG_ELEMENT_ID__=jb,i})();function jb(i){return function QE(i,s,a){if(ra(i)&&!a){const c=qt(i.index,s);return new uo(c,c)}return 47&i.type?new uo(s[16],s):null}(Tn(),Ce(),16==(16&i))}class H_{constructor(){}supports(s){return bd(s)}create(s){return new eD(s)}}const Wb=(i,s)=>s;class eD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Wb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const v=!c||a&&a.currentIndex<br(c,l,f)?a:c,I=br(v,l,f),E=v.currentIndex;if(v===c)l--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)l++;else{f||(f=[]);const T=I-l,M=E-l;if(T!=M){for(let H=0;H<T;H++){const J=H<f.length?f[H]:f[H]=0,ye=J+H;M<=ye&&ye<T&&(f[H]=J+1)}f[v.previousIndex]=M-T}}I!==E&&s(v,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!bd(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],v=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,f,v,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,I),c=!0),a=a._next}else l=0,function CA(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Cd()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{v=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new tD(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Lm),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class tD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zb{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Lm{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Zb,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function br(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class Vm{constructor(){}supports(s){return s instanceof Map||rI(s)}create(){return new G_}}class G_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||rI(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,v=l._next;return f&&(f._next=v),v&&(v._prev=f),l._next=null,l._prev=null,l}const c=new z_(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class z_{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eu(){return new Um([new H_])}let Um=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||eu()),deps:[[i,new yt,new Me]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:eu}),i})();function q_(){return new hh([new Vm])}let hh=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||q_()),deps:[[i,new yt,new Me]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:q_}),i})();const nD=Mm(null,"core",[]);let W_=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(yn(Om))},i.\u0275mod=Rt({type:i}),i.\u0275inj=xt({}),i})();function Z_(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ut,Te,k)=>{k.d(Te,{Z:()=>we});var p=k(2090),X=k(4859),O=k(9681),se=k(1877);class re{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,O._addComponent)(ge,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,fe=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const it=this._delegate.container.getProvider(ge);return!it.isInitialized()&&"EXPLICIT"===(null===(Ye=it.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&it.initialize(),it.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const Xe=function de(Xe){const ge={},fe={__esModule:!0,initializeApp:function Se($e,V={}){const pe=O.initializeApp($e,V);if((0,p.r3)(ge,pe.name))return ge[pe.name];const z=new Xe(pe,fe);return ge[pe.name]=z,z},app:it,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie($e){const V=$e.name,pe=V.replace("-compat","");if(O._registerComponent($e)&&"PUBLIC"===$e.type){const z=(Q=it())=>{if("function"!=typeof Q[pe])throw ue.create("invalid-app-argument",{appName:V});return Q[pe]()};void 0!==$e.serviceProps&&(0,p.ZB)(z,$e.serviceProps),fe[pe]=z,Xe.prototype[pe]=function(...Q){return this._getService.bind(this,V).apply(this,$e.multipleInstances?Q:[])}}return"PUBLIC"===$e.type?fe[pe]:null},removeApp:function Ye($e){delete ge[$e]},useAsService:function je($e,V){return"serverAuth"===V?null:V},modularAPIs:O}};function it($e){if(!(0,p.r3)(ge,$e=$e||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:$e});return ge[$e]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ve(){return Object.keys(ge).map($e=>ge[$e])}}),it.App=Xe,fe}(re);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ge(fe){(0,p.ZB)(Xe,fe)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Xe}(),B=new se.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=U;!function Ae(Xe){(0,O.registerVersion)("@firebase/app-compat","0.1.38",Xe)}()},9681:(ut,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Vs,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Qt,_apps:()=>sn,_clearComponents:()=>ji,_components:()=>pn,_getProvider:()=>xt,_registerComponent:()=>Sr,_removeServiceInstance:()=>an,deleteApp:()=>ta,getApp:()=>Zr,getApps:()=>Kr,initializeApp:()=>fi,onLog:()=>cs,registerVersion:()=>mr,setLogLevel:()=>zn});var p=k(5861),X=k(4859),O=k(1877),se=k(2090),re=k(8766);class le{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function ue(Je){return"VERSION"===Je.getComponent()?.type}(Qe)){const _t=Qe.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Qe=>Qe).join(" ")}}const de="@firebase/app",U=new O.Yd("@firebase/app"),Ut="[DEFAULT]",We={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,pn=new Map;function Zt(Je,De){try{Je.container.addComponent(De)}catch(Qe){U.debug(`Component ${De.name} failed to register with FirebaseApp ${Je.name}`,Qe)}}function Qt(Je,De){Je.container.addOrOverwriteComponent(De)}function Sr(Je){const De=Je.name;if(pn.has(De))return U.debug(`There were multiple attempts to register component ${De}.`),!1;pn.set(De,Je);for(const Qe of sn.values())Zt(Qe,Je);return!0}function xt(Je,De){const Qe=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Je.container.getProvider(De)}function an(Je,De,Qe=Ut){xt(Je,De).clearInstance(Qe)}function ji(){pn.clear()}const Ar=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Br{constructor(De,Qe,_t){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}const Vs="9.13.0";function fi(Je,De={}){let Qe=Je;"object"!=typeof De&&(De={name:De});const _t=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},De),mt=_t.name;if("string"!=typeof mt||!mt)throw Ar.create("bad-app-name",{appName:String(mt)});if(Qe||(Qe=(0,se.aH)()),!Qe)throw Ar.create("no-options");const Rt=sn.get(mt);if(Rt){if((0,se.vZ)(Qe,Rt.options)&&(0,se.vZ)(_t,Rt.config))return Rt;throw Ar.create("duplicate-app",{appName:mt})}const j=new X.H0(mt);for(const q of pn.values())j.addComponent(q);const L=new Br(Qe,_t,j);return sn.set(mt,L),L}function Zr(Je=Ut){const De=sn.get(Je);if(!De&&Je===Ut)return fi();if(!De)throw Ar.create("no-app",{appName:Je});return De}function Kr(){return Array.from(sn.values())}function ta(Je){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(Je){const De=Je.name;sn.has(De)&&(sn.delete(De),yield Promise.all(Je.container.getProviders().map(Qe=>Qe.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function mr(Je,De,Qe){var _t;let mt=null!==(_t=We[Je])&&void 0!==_t?_t:Je;Qe&&(mt+=`-${Qe}`);const Rt=mt.match(/\s|\//),j=De.match(/\s|\//);if(Rt||j){const L=[`Unable to register library "${mt}" with version "${De}":`];return Rt&&L.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),Rt&&j&&L.push("and"),j&&L.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void U.warn(L.join(" "))}Sr(new X.wA(`${mt}-version`,()=>({library:mt,version:De}),"VERSION"))}function cs(Je,De){if(null!==Je&&"function"!=typeof Je)throw Ar.create("invalid-log-argument");(0,O.Am)(Je,De)}function zn(Je){(0,O.Ub)(Je)}const Rn="firebase-heartbeat-store";let Fn=null;function dn(){return Fn||(Fn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Je,De)=>{0===De&&Je.createObjectStore(Rn)}}).catch(Je=>{throw Ar.create("idb-open",{originalErrorMessage:Je.message})})),Fn}function st(){return(st=(0,p.Z)(function*(Je){var De;try{return(yield dn()).transaction(Rn).objectStore(Rn).get(Ln(Je))}catch(Qe){if(Qe instanceof se.ZR)U.warn(Qe.message);else{const _t=Ar.create("idb-get",{originalErrorMessage:null===(De=Qe)||void 0===De?void 0:De.message});U.warn(_t.message)}}})).apply(this,arguments)}function rn(Je,De){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(Je,De){var Qe;try{const mt=(yield dn()).transaction(Rn,"readwrite");return yield mt.objectStore(Rn).put(De,Ln(Je)),mt.done}catch(_t){if(_t instanceof se.ZR)U.warn(_t.message);else{const mt=Ar.create("idb-set",{originalErrorMessage:null===(Qe=_t)||void 0===Qe?void 0:Qe.message});U.warn(mt.message)}}})).apply(this,arguments)}function Ln(Je){return`${Je.name}!${Je.options.appId}`}class ls{constructor(De){this.container=De,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new en(Qe),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var De=this;return(0,p.Z)(function*(){const _t=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=Xt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==mt&&!De._heartbeatsCache.heartbeats.some(Rt=>Rt.date===mt))return De._heartbeatsCache.heartbeats.push({date:mt,agent:_t}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Rt=>{const j=new Date(Rt.date).valueOf();return Date.now()-j<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,p.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Qe=Xt(),{heartbeatsToSend:_t,unsentEntries:mt}=function Ti(Je,De=1024){const Qe=[];let _t=Je.slice();for(const mt of Je){const Rt=Qe.find(j=>j.agent===mt.agent);if(Rt){if(Rt.dates.push(mt.date),qn(Qe)>De){Rt.dates.pop();break}}else if(Qe.push({agent:mt.agent,dates:[mt.date]}),qn(Qe)>De){Qe.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:_t}}(De._heartbeatsCache.heartbeats),Rt=(0,se.L)(JSON.stringify({version:2,heartbeats:_t}));return De._heartbeatsCache.lastSentHeartbeatDate=Qe,mt.length>0?(De._heartbeatsCache.heartbeats=mt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Rt})()}}function Xt(){return(new Date).toISOString().substring(0,10)}class en{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,p.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function ft(Je){return st.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Qe=this;return(0,p.Z)(function*(){var _t;if(yield Qe._canUseIndexedDBPromise){const Rt=yield Qe.read();return rn(Qe.app,{lastSentHeartbeatDate:null!==(_t=De.lastSentHeartbeatDate)&&void 0!==_t?_t:Rt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Qe=this;return(0,p.Z)(function*(){var _t;if(yield Qe._canUseIndexedDBPromise){const Rt=yield Qe.read();return rn(Qe.app,{lastSentHeartbeatDate:null!==(_t=De.lastSentHeartbeatDate)&&void 0!==_t?_t:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...De.heartbeats]})}})()}}function qn(Je){return(0,se.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function xr(Je){Sr(new X.wA("platform-logger",De=>new le(De),"PRIVATE")),Sr(new X.wA("heartbeat",De=>new ls(De),"PRIVATE")),mr(de,"0.8.3",Je),mr(de,"0.8.3","esm2017"),mr("fire-js","")}("")},4859:(ut,Te,k)=>{k.d(Te,{H0:()=>de,wA:()=>O});var p=k(5861),X=k(2090);class O{constructor(U,B,W){this.name=U,this.instanceFactory=B,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const se="[DEFAULT]";class re{constructor(U,B){this.name=U,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const B=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(B)){const W=new X.BH;if(this.instancesDeferred.set(B,W),this.isInitialized(B)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:B});Ve&&W.resolve(Ve)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(U){var B;const W=this.normalizeInstanceIdentifier(U?.identifier),Ve=null!==(B=U?.optional)&&void 0!==B&&B;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Ae){if(Ve)return null;throw Ae}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[B,W]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(B);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ve});W.resolve(Ae)}catch{}}}}clearInstance(U=se){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,p.Z)(function*(){const B=Array.from(U.instances.values());yield Promise.all([...B.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...B.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=se){return this.instances.has(U)}getOptions(U=se){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:B={}}=U,W=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:W,options:B});for(const[Ae,we]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Ae)&&we.resolve(Ve);return Ve}onInit(U,B){var W;const Ve=this.normalizeInstanceIdentifier(B),Ae=null!==(W=this.onInitCallbacks.get(Ve))&&void 0!==W?W:new Set;Ae.add(U),this.onInitCallbacks.set(Ve,Ae);const we=this.instances.get(Ve);return we&&U(we,Ve),()=>{Ae.delete(U)}}invokeOnInitCallbacks(U,B){const W=this.onInitCallbacks.get(B);if(W)for(const Ve of W)try{Ve(U,B)}catch{}}getOrInitializeService({instanceIdentifier:U,options:B={}}){let W=this.instances.get(U);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===se?void 0:he),options:B}),this.instances.set(U,W),this.instancesOptions.set(U,B),this.invokeOnInitCallbacks(W,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,W)}catch{}var he;return W||null}normalizeInstanceIdentifier(U=se){return this.component?this.component.multipleInstances?U:se:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const B=this.getProvider(U.name);if(B.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);B.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const B=new re(U,this);return this.providers.set(U,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Te,k)=>{k.d(Te,{Am:()=>he,Ub:()=>de,Yd:()=>ue,in:()=>X});const p=[];var X=(()=>{return(U=X||(X={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",X;var U})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},se=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},le=(U,B,...W)=>{if(B<U.logLevel)return;const Ve=(new Date).toISOString(),Ae=re[B];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ae](`[${Ve}]  ${U.name}:`,...W)};class ue{constructor(B){this.name=B,this._logLevel=se,this._logHandler=le,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in X))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...B),this._logHandler(this,X.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...B),this._logHandler(this,X.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,X.INFO,...B),this._logHandler(this,X.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,X.WARN,...B),this._logHandler(this,X.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...B),this._logHandler(this,X.ERROR,...B)}}function de(U){p.forEach(B=>{B.setLogLevel(U)})}function he(U,B){for(const W of p){let Ve=null;B&&B.level&&(Ve=O[B.level]),W.userLogHandler=null===U?null:(Ae,we,...Xe)=>{const ge=Xe.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Ve??Ae.logLevel)&&U({level:X[we].toLowerCase(),message:ge,args:Xe,type:Ae.name})}}}},8766:(ut,Te,k)=>{k.d(Te,{Lj:()=>Se,X3:()=>it});var p=k(5861);let O,se;const ue=new WeakMap,de=new WeakMap,he=new WeakMap,U=new WeakMap,B=new WeakMap;let Ae={get(V,pe,z){if(V instanceof IDBTransaction){if("done"===pe)return de.get(V);if("objectStoreNames"===pe)return V.objectStoreNames||he.get(V);if("store"===pe)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return fe(V[pe])},set:(V,pe,z)=>(V[pe]=z,!0),has:(V,pe)=>V instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in V};function ge(V){return"function"==typeof V?function Xe(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...pe){return V.apply(Ye(this),pe),fe(ue.get(this))}:function(...pe){return fe(V.apply(Ye(this),pe))}:function(pe,...z){const Q=V.call(Ye(this),pe,...z);return he.set(Q,pe.sort?pe.sort():[pe]),fe(Q)}}(V):(V instanceof IDBTransaction&&function Ve(V){if(de.has(V))return;const pe=new Promise((z,Q)=>{const ne=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",ke),V.removeEventListener("abort",ke)},te=()=>{z(),ne()},ke=()=>{Q(V.error||new DOMException("AbortError","AbortError")),ne()};V.addEventListener("complete",te),V.addEventListener("error",ke),V.addEventListener("abort",ke)});de.set(V,pe)}(V),((V,pe)=>pe.some(z=>V instanceof z))(V,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ae):V)}function fe(V){if(V instanceof IDBRequest)return function W(V){const pe=new Promise((z,Q)=>{const ne=()=>{V.removeEventListener("success",te),V.removeEventListener("error",ke)},te=()=>{z(fe(V.result)),ne()},ke=()=>{Q(V.error),ne()};V.addEventListener("success",te),V.addEventListener("error",ke)});return pe.then(z=>{z instanceof IDBCursor&&ue.set(z,V)}).catch(()=>{}),B.set(pe,V),pe}(V);if(U.has(V))return U.get(V);const pe=ge(V);return pe!==V&&(U.set(V,pe),B.set(pe,V)),pe}const Ye=V=>B.get(V);function it(V,pe,{blocked:z,upgrade:Q,blocking:ne,terminated:te}={}){const ke=indexedDB.open(V,pe),Ne=fe(ke);return Q&&ke.addEventListener("upgradeneeded",ct=>{Q(fe(ke.result),ct.oldVersion,ct.newVersion,fe(ke.transaction))}),z&&ke.addEventListener("blocked",()=>z()),Ne.then(ct=>{te&&ct.addEventListener("close",()=>te()),ne&&ct.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Ne}function Se(V,{blocked:pe}={}){const z=indexedDB.deleteDatabase(V);return pe&&z.addEventListener("blocked",()=>pe()),fe(z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],je=new Map;function $e(V,pe){if(!(V instanceof IDBDatabase)||pe in V||"string"!=typeof pe)return;if(je.get(pe))return je.get(pe);const z=pe.replace(/FromIndex$/,""),Q=pe!==z,ne=Ie.includes(z);if(!(z in(Q?IDBIndex:IDBObjectStore).prototype)||!ne&&!ve.includes(z))return;const te=function(){var ke=(0,p.Z)(function*(Ne,...ct){const Yt=this.transaction(Ne,ne?"readwrite":"readonly");let Ut=Yt.store;return Q&&(Ut=Ut.index(ct.shift())),(yield Promise.all([Ut[z](...ct),ne&&Yt.done]))[0]});return function(ct){return ke.apply(this,arguments)}}();return je.set(pe,te),te}!function we(V){Ae=V(Ae)}(V=>({...V,get:(pe,z,Q)=>$e(pe,z)||V.get(pe,z,Q),has:(pe,z)=>!!$e(pe,z)||V.has(pe,z)}))},5861:(ut,Te,k)=>{function p(O,se,re,le,ue,de,he){try{var U=O[de](he),B=U.value}catch(W){return void re(W)}U.done?se(B):Promise.resolve(B).then(le,ue)}function X(O){return function(){var se=this,re=arguments;return new Promise(function(le,ue){var de=O.apply(se,re);function he(B){p(de,le,ue,he,U,"next",B)}function U(B){p(de,le,ue,he,U,"throw",B)}he(void 0)})}}k.d(Te,{Z:()=>X})}},ut=>{ut(ut.s=6155)}]);